\chapter{Considerações Finais}
\label{cap:conclusao}

% A convergência de serviços tecnológicos disponibilizados através da Internet tem impulsionado o uso dos sistemas para distribuição de mídias ao vivo por parte dos usuários, tornando-se uma importante ferramenta para acesso rápido à informação e entretenimento. O aumento significativo da demanda por este tipo de serviço aumenta também a exigência dos serviços de rede, os quais precisam ser disponibilizados de forma apropriada a fim de otimizar a entrega dos pacotes de dados.

% Esses sistemas fazem parte tem atraído a atenção dos usuários porque se permite o livre acesso a conteúdos antes possíveis apenas através dos sistemas tradicionais de TV, os quais exigem altos custos de instalação e manutenção, inclusive para o usuário final.

Neste trabalho, apresentou-se um novo protocolo de distribuição de mídias ao vivo chamado \textit{Global Media Transmission Protocol} (GMTP). O GMTP atua nas camadas de transporte e de rede (\textit{cross-layer}) da pilha TCP/IP, seguindo uma arquitetura de rede híbrida P2P/CDN, através da qual transmitem-se pacotes de dados de um ou mais sistemas. Para isto, constituem-se redes de favores formadas por roteadores, que cooperam entre si a fim de entregarem o conteúdo multimídia de interesse comum aos seus clientes. As parcerias entre os roteadores são determinadas pelos servidores, com base na capacidade dos canais já em uso para disseminar o conteúdo, obtidas e atualizadas periodicamente por meio de um algoritmo de controle de congestionamento assistido pela rede. Nesse contexto, apresentou-se o GMTP em duas perspectivas: projeto e desempenho.

Na perspectiva do projeto, avaliaram-se os principais requisitos de aplicação e as técnicas de distribuição de mídias ao vivo utilizadas no estado da prática e da arte, ajustando-as de forma a permitir a interoperabilidade dos sistemas a fim de fazer melhor uso dos recursos compartilhados de rede. Aliado aos ajustes realizados, definiram-se estratégias como o registro de participação; o compartilhamento de conteúdo por meio da intersecção de rotas; a generalização da descrição da mídia; a definição das parcerias entre os roteadores com base na largura de banda disponível dos canais em uso para distribuir o conteúdo multimídia; a eleição de nós para auxiliar no controle de congestionamento; e funções para validação dos pacotes de dados. Com essas estratégias, sustenta-se a proposta de que o uso do GMTP mitigará a construção de sistemas interoperáveis, separando-se a forma de transportar os dados multimídia e delegando-se à aplicação a responsabilidade de reproduzir o conteúdo aos usuários finais. Além disso, a forma de expor os serviços do GMTP à aplicação possibilita a fácil migração das aplicações existentes.

Na perspectiva do desempenho, estudou-se o GMTP em confrontos com as propostas Denacast/CoolStreaming e CCN-TV, avaliando-se as principais métricas de qualidade de serviço: atraso de inicialização, índice de continuidade, qualidade da mídia recebida pelos nós clientes e sobrecarga de controle. Com base nos resultados obtidos por meio da simulação de um cenário real, demonstrou-se que o GMTP obteve um desempenho \ut{61,44}{\%} melhor que o Denacast/CoolStreaming e \ut{36,27}{\%} melhor que o CCN-TV. 

\section{Conclusões}

Com base nas limitações das propostas para distribuição de mídias ao vivo e seus problemas apresentados na Seção~\ref{sec:problematica} e no Capítulo~\ref{cap:trabalhosrelacionados}, as principais conclusões obtidas neste trabalho são enumeradas a seguir.

\begin{enumerate}

  \item O problema da interoperabilidade entre os sistemas de distribuição de mídias ao vivo pode ser resolvido através da abstração e da otimização das principais técnicas para distribuição de mídias ao vivo, propondo-se novos métodos de conectividade multi-ponto e compartilhamento de conteúdo, tudo disponibilizado na camada de transporte e rede, sem sofrer a influência da camada de aplicação. Como consequência, conclui-se também que:

  \begin{enumerate}

    \item o conceito de socket empregado no GMTP, permite uma abstração de distribuição P2P com suporte transparente ao uso de multicast por parte da aplicação, compartilhando-se os pacotes de dados entre múltiplos sistemas interessados por um mesmo conteúdo, o que reduz o consumo de recursos de rede e melhora a qualidade de serviço oferecida às aplicações;

    \item diversas funções para distribuição de mídias ao vivo realizadas pelas aplicações se tornam obsoletas (ou foram movidas e adaptadas em uma camada mais apropriada), tais como seleção de clientes parceiros; tolerância à desconexões; estratégias para atenuar o \textit{churn}; obtenção e gerenciamento de informações que auxiliam os algoritmos de seleção de nós com base no contexto (localização, perfil do usuário, estimativas e medições de custos entre nós, etc.); estratégias de incentivo à cooperação e para inibir a participação de nós \textit{free-riders}; estratégias para monitorar a capacidade de recepção dos clientes e adaptação de fluxo com base em tal informação; e estratégias para avaliar e/ou inibir ataques de poluição;

    \item como consequência do item anterior, o desenvolvimento de sistemas se torna mais eficiente (mais rápido e com menor chances de erros) devido ao emprego de funções de software relacionadas à distribuição de mídias ao vivo desacopladas da aplicação. Esta decisão evita o uso de diferentes bibliotecas de software que, apesar de facilitar o desenvolvimento, não resolve o problema da interoperabilidade discutido anteriormente e são incapazes de usar toda a capacidade de transmissão que a rede pode oferecer.

  \end{enumerate}

  \item As soluções de aplicação são incomparáveis às soluções baseadas no núcleo da rede para distribuição de mídias ao vivo, por isso observou-se confrontos mais acentuado entre o GMTP e o CCN-TV. No contexto de aplicação, constatou-se o pior desempenho para as métricas avaliadas para o Denacast, apresentando-se problemas de escalabilidade a partir de uma certa quantidade de nós clientes, sendo influenciado pela dinâmica da rede. Já no contexto do CCN-TV, em geral da CCN, conclui-se que o GMTP obteve um desempenho superior devido aos seguintes motivos:

  \begin{enumerate}

    \item O modelo de serviço \textit{push/pull} empregado no GMTP é mais apropriado para distribuir conteúdos ao vivo, ou seja, para sistemas que tenham como um dos principais requisitos a entrega do conteúdo em um curto espaço de tempo e que não necessite de entrega confiável. A principal consequência positiva desse modelo de serviço é que os sistemas finais interessados em obter um determinado conteúdo não precisam transmitir periodicamente requisições para continuar recebendo um determinado conteúdo, como ocorre na rede CCN.

    \item Apesar dos pesquisadores que propuseram o CCN alegarem que não é preciso um sistema final conhecer a localização de um determinado conteúdo de interesse (endereço IP do servidor, por exemplo), neste trabalho, conclui-se o contrário. Ou seja, ainda convém manter a identificação do sistema final de destino, visto que se pode otimizar métricas importantes, como o atraso de inicialização, como demonstrou-se neste trabalho.

    \item Devido ao modelo de serviço empregado na rede CCN, os nós clientes não conseguem saber se ainda é possível recuperar um determinado conteúdo ou não. Isto impacta diretamente na tomada de decisão se ainda faz sentido retransmitir um pacote de interesse correspondente a um pacote de dados a ser reproduzido ou se não faz mais sentido aguardar sua chegada. Além disso, os pacotes de interesse são dependentes da capacidade de \textit{upload} do cliente, o que pode reduzir a quantidade de pacotes a serem recebidos por cliente, mesmo havendo largura de banda de \textit{download} disponível e suficiente.

  \end{enumerate}

  \item Apesar do custo computacional de fazer com que todos os roteadores alterem a requisição para adicionar seu identificador a fim de conhecer as rotas de rede utilizadas para disseminar um determinado conteúdo, consegue-se:

  \begin{enumerate}

    \item reduzir a quantidade de conexão ao nó servidor;

    \item entregar os pacotes de dados mais rapidamente aos sistemas finais por meio da formação de parcerias por intersecção;

    \item melhorar a toma de decisão para propor parcerias entre os roteadores, com base em informações mais precisas sobre a capacidade de transmissão do canal.

  \end{enumerate}

  \item Apesar de constatações em trabalhos anteriores de que os algoritmos de controle de congestionamento assistidos pela rede melhoram o desempenho da rede nas transmissões de dados, neste trabalho, reforçou-se não somente este fato, mas também conclui-se que a aplicabilidade desse tipo de algoritmo pode servir para melhorar o desempenho no processo de distribuir de mídias ao vivo, utilizando-se informações mais acuradas para a formação de parcerias. Especificamente, utilizar informações explícitas sobre o congestionamento da rede para permitir um servidor determinar parcerias com base nas rotas já em uso para disseminar um conteúdo multimídia, melhoram-se métricas importantes, como o índice de continuidade e a qualidade do conteúdo entregue aos sistemas finais. Nesse contexto, utilizar o RCP e adaptá-lo para o cenário de distribuição de mídias ao vivo foi uma escolha adequada, pois se trata de uma proposta invariante à distribuição do tamanho do fluxo. Isto é, independente do tamanho do fluxos de dados, se é de curta ou de longa duração, o RCP compartilha o canal de forma mais eficiente porque emula o PS independente de quais e quantos são os fluxos, estabilizando-se a taxa de transmissão dos sistemas finais mais rapidamente, o que ocorre a cada intervalo médio de RTT e de acordo com a demanda real em um determinado instante. Além disso, o RCP aliado ao conceito de sub-fluxo proposto neste trabalho, é simples e praticável, pois a taxa de transmissão ofertada é definida sem o conhecimento do número exato de fluxos, baseando-se somente no tamanho da fila, no tráfego agregado de entrada e no RTT do tráfego passando através do roteador. A função de sub-fluxo empregado no GMTP-UCC (Seção~\ref{subsec:mudccp-ucc}) permite que roteadores com maior capacidade de recepção continuem recebendo um fluxo multimídia em uma taxa possível, mesmo que outros roteadores no caminho até um determinado cliente possua uma capacidade inferior de recepção em um determinado instante. Essa função otimiza métricas como qualidade da mídia a ser reproduzida ao usuário final.

%   \item Constataram-se melhorias de desempenho na transmissão de fluxos multimídia quando utilizado uma versão adaptada do RCP com o conceito de sub-fluxos, comparando-se com a versão normal do RCP.

  \item Com base em revisões da literatura e nos resultados apresentados, não convém utilizar CCN para distribuição de mídias ao vivo. Nesse contexto, as propostas existentes ainda são imaturas devido às incertezas do projeto arquitetural e remoção de informações importantes, como os endereços dos sistemas finais. Especificamente, mudar de um espaço de endereçamento de um bilhão de endereços IPs para pelo menos um trilhão de nomes de conteúdos pode causar problemas críticos de desempenho devido à necessidade de ter que processar tamanha quantidade de dados~\cite{6691438}. No caso do GMTP, buscou-se dividir com os servidores a sobrecarga de processamento nodal relacionada às atividades de distribuição de conteúdo, sendo portanto uma abordagem híbrida rede/hospedeiro. Isto ocorre quando a rede gera informações sobre o tráfego de dados e os hospedeiros as utilizam para tomar decisões no processo de constituir e manter a rede de favores, enfraquecendo a relação um-para-um de conectividade ao permitir que os roteadores realizem \textit{cache} dos pacotes de dados para agirem como se fossem os próprios hospedeiros.

  \item Apesar do GMTP não ser um protocolo com suporte a garantia de entrega, demonstrou-se e conclui-se que, ao fazer melhor uso dos recursos de rede, é possível transmitir pacotes de dados e oferecer uma boa qualidade de serviço às aplicações, mesmo em redes com altos níveis de congestionamento da rede e uma certa taxa de perda de dados, como foi o caso do cenário adotado nos experimentos realizados no contexto deste trabalho.

\end{enumerate}

% Enfim, com base em tudo que foi exposto,  o GMTP apresenta um desempenho satisfatório no que diz respeito à qualidade de serviços oferecida aos sistemas de distribuição de mídias ao vivo, ao tempo em que faz uso eficiente dos recursos de rede.


% * p17: na sua tese, o que seria um resultado que a negaria? Ela não pode ser óbvia.
%      - Um protocolo que comprovasse fazer melhor do que o GMTP considerando apenas a comunicação end-to-end, com suporte a controle de congestionamento (o que mais??)
%      - Seleção de nós é importante

% COMENTAR O QUE NEGARIA A MINHA TESE, TANTO NO CONTEXTO DE UM SISTEMA (EX. DENACAST) QUANTO NO CONTEXTO DE INFRA (EX. CCN)

% * Colocar no último slide da apresentação: os direcionamentos sugeridos na qualificação foram fundamentais para...

\section{Limitações e Trabalhos Futuros}

Nessa seção, apresentam-se as limitações e os trabalhos futuros relacionados ao GMTP.

\begin{enumerate}
%   ~\cite{1019258}
  \item Devido à limitação do tamanho dos datagramas IP em \ut{1500}{Bytes}, o funcionamento correto do GMTP é limitado em topologias de rede em que a distância entre dois sistemas finais não pode ultrapassar 72 saltos para IPv4 e 44 saltos para IPv6. Apesar dessa limitação, estudos anteriores podem ser úteis para estimar a distância máxima entre dois sistemas finais quaisquer conectados à Internet~\cite{958323,1019258} e investigar alternativas para superar essa limitação do GMTP. Nesse contexto, pode-se fazer uso de fragmentação na camada IP.

  \item Sugere-se investigar a possibilidade de reduzir a frequência em que um roteador adiciona seu identificador no pacote de requisição de uma mídia. Esta ação pode aumentar o atraso de processamento nodal e impactar negativamente na qualidade de serviço. Como linha de investigação, pode-se estudar a possibilidade de reduzir a frequência de escrita nos pacotes de requisição com base em um \textit{cache} dos últimos destinos registrados. Por exemplo, quando um pacote de requisição for transmitido pela primeira vez a partir de uma origem a um determinado destino, o roteador adiciona seu identificador no pacote, armazena a identificação da origem e do destino e determina um período em que não adicionará mais seu identificador para este caso.

  \item A decisão de utilizar tamanho de cabeçalho variável no GMTP reduz a sobrecarga de controle. Porém, sugere-se investigação sobre o uso de tal abordagem e o aumento do processamento nodal. Nesse contexto, pode-se propor algoritmos mais eficientes para um processamento mais rápido apenas rearranjando os campos de cada tipo de pacote atualmente definido no GMTP ou mesmo melhorando as funções existentes a fim de requerem menos informações de controle por pacote.

  \item Para permitir o esquema de sub-fluxo do GMTP, necessita-se medir o RTT entre dois roteadores que estão repassando um determinado fluxo de dados multimídia. Dessa forma, deve-se aumentar a capacidade de processamento dos roteadores para que seja possível monitorar múltiplos cronômetros. Nesse contexto, sugere-se investigar se o desempenho do GMTP pode reduzir à medida que múltiplos fluxos de dados são transmitidos na rede.

  \item O GMTP foi projetado para se permitir uma implantação progressiva, mas enquanto existirem roteadores que não o suportem, pode-se ocorrer medições equivocadas da largura de banda disponível.

  \item Conduzir estudos que explorem outras topologias de rede, incluindo redes móveis e redes veiculares, bem como o impacto do tráfego de dados de outros protocolos sobre o GMTP, revelando-se mais benefícios bem como possíveis limitações.

  \item Investigar técnicas de adaptação de fluxo de dados multimídia ao vivo aplicadas ao GMTP. Sugere-se o estudo de técnicas para codificação do conteúdo multimídia de acordo com informações explícitas sobre o congestionamento da rede. Especificamente, pode-se integrar ao GMTP mecanismos avançados de adaptação de fluxo, como o apresentado em~\cite{Fernandes20111683}, que faz uso de informações explícitas sobre o congestionamento da rede para permitir que não só os servidores adaptem o conteúdo de forma preditiva, mas também os próprios nós repassadores GMTP.

  \item Implementar o protocolo GMTP e uma aplicação de referência em um sistema operacional e em um roteador. Nesse caso, sugere-se também avaliar o grau de complexidade de adaptar um sistema existente para utilizar o GMTP.

  \item Submeter à IETF um documento de RFC sobre o GMTP.

\end{enumerate}

\section{Publicações}
\label{sec:publicacoes}

\begin{enumerate}

  \item \textit{GMTP: A Cross-layer Optimized Protocol for Large Scale Distribution of Live Multimedia Content over the Internet.} Referência:\cite{gmtp-techrep1}\bibentry{gmtp-techrep1}\footnote{A ser submetido para o IEEE/ACM Transactions on Networking (JCR 2.014).}
%  ou IEEE Network (JCR 2.853)

%   \item \textit{Designing GMTP: The Global Media Transmission Protocol for Massive Multimedia Distribution over the Internet.} Referência:\cite{gmtp-techrep2}\bibentry{gmtp-techrep2}\footnote{A ser submetido para o IEEE Transactions on Multimedia (JCR 1.754).}
%  ou IEEE Software.}

  \item \textit{Generalized Connection and Incentives for Supporting CE Devices in P2P/CDN Live Streaming Systems.} Referência:\cite{gmtp-techrep3}\bibentry{gmtp-techrep3}\footnote{Em processo de revisão para o IEEE Transaction on Consumers Electronics (JCR 1.087).}

% Sharing Resources with Live Streaming Systems to Improve Users' QoE on Consumer Electronic Devices.

  \item \textit{Global Media Transmission Protocol (GMTP).} I Workshop Pré-IETF do XXXIV Congresso da Sociedade Brasileira de Computação. Referência:\cite{gmtp-techrep4}\bibentry{gmtp-techrep4}\footnote{Em processo de revisão.}

  \item \textit{About Encouraging Residential Users to Share Upload Bandwidth with CDN/P2P Live Streaming Systems.} 31st IEEE International Conference on Consumer Electronics 2013. Qualis A-2 (Computação). 2013. Referência: \cite{leandro-icce2013}.

  \item \textit{Multi(Uni)cast DCCP for Live Content Distribution with P2P Support.} 9th IEEE Wireless Communications and Networking Conference (WCNC 2012). Qualis A-1 (Computação). 2012. Referência: \cite{6214362}.

  \item \textit{Multimedia Content Distribution of Real Time Controlled and Non-reliable Datagrams Between Peers.} 29th IEEE Globecom 2011. 2nd IEEE Workshop on Multimedia Communications \& Services. Qualis A-1 (Computação). 2011. Referência: \cite{leandro-Globecom-2011}.

  \item \textit{Distribuição de Conteúdo Multimídia em Tempo Real com Transporte de Fluxos Controlados e Não Confiáveis entre Pares.} Simpósio Brasileiro de Redes de Computadores 2011. VII Workshop de Redes Dinâmicas e Sistemas P2P. 2011. Qualis A-N (Computação). Referência: \cite{leandro-WP2P-2011}.

% \item \textbf{An Experimental Evaluation of DCCP Transport Protocol:
% A Focus on the Fairness and Hand-off over 802.11g Networks.} 5th IEEE Consumer
% Communications and Networking Conference (CCNC). 2008. Referência
% \cite{ccnc-leandro2008}.

  \item \textit{On the Performance of TCP, UDP and DCCP over 802.11g Networks.} 23rd ACM Symposium on Applied Computing. Qualis A-1 (Computação). 2008. Referência: \cite{leandro2008}.

% \item \textit{Avaliação Experimental do Protocolo DCCP para Transmissão de
% Conteúdos Multimídia em Redes Sem Fio 802.11g e na Internet.} Dissertação de
% mestrado. Universidade Federal de Campina Grande. Programa de Pós Graduação em
% Ciência da Computação. 2008. Referência \cite{leandro-master-2008}.

\end{enumerate}


\section{Resumo das Contribuições}
\label{sec:contribuicoes}

\begin{enumerate}

  \item O projeto e a avaliação de um protocolo para distribuição de conteúdos multimídia ao vivo baseado em uma rede de favores constituída entre roteadores.

%   Apresenta-se a elaboração do GMTP, que considera a comunicação mais efetiva entre as duas camadas mais importantes da pilha TCP/IP, a de transporte e a de rede.
%   
%   Nesse contexto, contribui-se com uma proposta de como pode-se permitir a interoperabilidade dos atuais sistemas de distribuição multimídia, promovendo-se formas de adaptação dos sistemas existentes.
% , bem como o reúso de algumas funções comuns a todos os sistemas.

  \item Estudos e discussões sobre a escolha e modificação do \textit{Rate Control Protocol} (RCP)~\cite{Dukkipati:2008:RCP:1368746} para uso no GMTP, em detrimento às outras opções, como o XCP~\cite{Katabi2003}.
% O RCP é um proeminente algoritmo de controle de congestionamento assistido pela rede e foi usado no GMTP para auxiliar no processo de distribuição de mídias ao vivo. Nesse contexto, contribui-se com discussões sobre as adaptações realizadas no RCP para permitir sua aplicação ao GMTP e como se pode utilizá-lo no processo de formação de parcerias em uma rede de favores, função jamais vista em qualquer outra solução de distribuição de mídias ao vivo.

% Ou seja, além de utilizar o RCP para melhorar o consumo dos recursos compartilhados de rede (controle de congestionamento), propõe-se um algoritmo de seleção de nós parceiros com base na atual capacidade de transmissão dos enlaces entre os nós servidores de um fluxo de dados ao vivo e os nós clientes interessados em recebê-lo. Ademais, discute-se aspectos fundamentais sobre a escolha do RCP em detrimento a outras propostas bem conhecidas, como o XCP~\cite{Katabi2003} e o VCP~\cite{4460574}.

  \item Os resultados e discussões acerca do GMTP frente a duas proeminentes propostas: o Denacast/CoolStreaming~\cite{5764567} e o CCN-TV~\cite{6550523}.

% O Denacast é um sistema de distribuição de mídias ao vivo baseado no CoolStreaming com suporte a uma rede de distribuição de conteúdos (P2P/CDN). Com os resultados comparativos obtidos, contribui-se para tomada de decisões sobre futuras pesquisas no contexto de distribuição de mídias ao vivo. O CCN-TV é um sistema de TV para Internet com suporte às redes centradas na informação. Com isto, contribui-se para tomada de decisões sobre futuras pesquisas no contexto de distribuição de mídias ao vivo.

  \item A revisão da literatura sobre as principais técnicas para distribuição de mídias ao vivo, bem como as propostas para este fim, trazendo-se à tona os recentes avanços da área de estudo, como os conceitos das redes centradas na informação~\cite{6563278} e os algoritmos de controle de congestionamento assistido pela rede~\cite{983548}.

  \item A implementação de artefatos de software que permitem a reprodução do ambiente de estudo, tais como implementação do GMTP no simulador de rede OMNet++~\cite{XU2011,omnetpp2014} e a metodologia detalhada do experimento.
%  bem como encaminhamentos iniciais de implementação no núcleo do Linux.

  \item As limitações do GMTP e os encaminhamentos da pesquisa sobre futuros avanços do estado da arte.

\end{enumerate}

Ademais, destaca-se a importância e originalidade do presente trabalho por trazer à tona um problema recorrente e uma proposta de solução do uso de um protocolo de transporte e rede, exclusivamente projetado para a distribuição de mídias ao vivo na Internet. Até então, distribuir conteúdos multimídia na Internet se resumia em sistemas baseados em protocolos tradicionais (TCP, UDP, DCCP, SCTP) ou outros proprietários, em geral, disponíveis na camada de aplicação.


% Por exemplo, o método tradicional de conectividade multi-ponto utilizado em muitos sistemas foi completamente remodelado se comparado aos utilizados em outros sistemas. No GMTP, permite-se o acesso mais eficiente a um determinado conteúdo e, nesse ínterim, conhece-se as rotas através das quais o servidor transmite os fluxos de dados multimídia. Para isto, propõe-se o mecanismo de registro de participação, enfraquecendo-se a relação explícita de conectividade um-para-um, fortemente difundida em redes TCP/IP, ao permitir que os nós roteadores interceptem as requisições de um determinado conteúdo e os nós requisitantes aceitam receber respostas dos roteadores como se fossem o próprio servidor informado da requisição original. Como consequência, conclui-se também que o custo computacional para conhecer um determinado caminho é baixo se comparado aos benefícios que tal conhecimento pode trazer. Nesse contexto, o custo computacional é fazer com que todos os roteadores alterem a requisição para adicionar seu identificador, porém isto é feito apenas quando um cliente requisita uma mídia. Por outro lado, o 