\chapter{Trabalhos Relacionados}
\label{cap:trabalhosrelacionados}

% ============
%
% Usar na
% apresentação:
% http://www.cs.helsinki.fi/u/jakangas/Teaching/P2P/P2P-02-Systems.pdf

% OSMF (\textit{Open Source Media Framework})

% PODE PEGAR ESSE MATERIAL PARA MENCIONAR AS QUESTÕES DE SEGURANÇA E PORQUE O
% GMTP TEM
% % http://webhost.laas.fr/TSF/IFIPWG/Workshops&Meetings/53/workshop/8.Barcellos.pdf

% https://peercdn.com

% ============

Neste capítulo, apresenta-se uma avaliação crítica acerca de um conjunto de
trabalhos sobre sistemas e protocolos para distribuição de mídias ao vivo.
Nesse contexto, inclui-se também os trabalhos que, apesar de não apresentarem
uma proposta completa para distribuição de mídias ao vivo, apresentam-se como
parte de um todo, com similaridades relevantes se comparado ao \mudccp. A compilação dos trabalhos a seguir foi realizada com base em informações obtidas e adaptadas de publicações encontradas em diversas fontes disponíveis na literatura (revistas, conferências, livros, teses e dissertações).

Para uma leitura linear deste capítulo, na próxima seção, apresenta-se uma breve discussão sobre os principais marcos na área de distribuição de mídias ao vivo, posicionando o GMTP em um cenário macro do estado da arte. Em seguida, na Seção~\ref{sec:proto-app-ea}, apresentam-se detalhes dos principais sistemas e protocolos de distribuição de mídias ao vivo, enfatizando suas respectivas arquiteturas e modelos de serviço. Já na Seção~\ref{sec:trab-redes-centradas-informacao}, apresenta-se uma nova vertente de pesquisa sobre distribuição de dados na Internet, conhecida por Redes Centradas na Informação, enfatizando suas principais características e os trabalhos relacionados à distribuição de mídias ao vivo. E, por fim, na Seção~\ref{sec:trabrel-sumario}, apresenta-se um breve resumo sobre este capítulo. Caso o leitor deseje realizar uma leitura com foco nos trabalhos mais relevantes e fortemente relacionados ao GMTP, recomenda-se a leitura da próxima seção, bem como da Seção~\ref{subsec:coolstreaming}, onde se discute sobre o projeto CoolStreaming; da Seção~\ref{subsec:denacast}, onde se discute sobre o projeto Denacast e, por fim, de toda a Seção~\ref{sec:trab-redes-centradas-informacao}.

% Uma vez que a lista apresentada não é exustiva e considerando a potencial
% evolução destes trabalhos, à ausência de uma característica citada sobre um
% trabalho, o leitor deve entender que durante o levantamento bibliográfico
% realizado não foram encontrados investimentos por parte dos próprios autores do
% trabalho para prover tal característica.

\section{Visão Geral das Propostas para Distribuição de Mídias ao Vivo}
\label{sec:visaogerao-propostas-dmv}

Diversas propostas e tecnologias destinadas à distribuição de mídias ao vivo foram desenvolvidas ao longo dos anos, disponibilizando-se um extenso ferramental e sistemas para este fim. Como resultado, aperfeiçoou-se a forma de comunicação entre redes visando, sobretudo, melhorar a qualidade de serviço e, consequentemente, a experiência do usuário final ao assistir um evento ao vivo através da Internet.

\begin{figure}[ht]
\begin{center}
\includegraphics[scale=0.55]{imgs/gmtp-posicao.pdf}
\end{center}
\vspace{-1cm}
\caption{Representantes e marcos importantes no contexto de distribuição de mídias ao vivo. Evolução das arquiteturas e modelos de serviços adotados na Internet (incluindo o GMTP). Antes do GMTP, todas as soluções tem uma forte dependência dos sistemas finais para executar suas funções. No GMTP, os sistemas finais têm um papel coadjuvante na execução das funções, realizando-se parcerias entre os roteadores da rede.}
\label{fig:gmtp-posicao}
\end{figure}

Na Figura~\ref{fig:gmtp-posicao}, ilustram-se os principais representantes e marcos no contexto de distribuição de mídias ao vivo, bem como a evolução das arquiteturas e modelos de serviços adotados na Internet (incluindo o GMTP). Como pode-se observar, atualmente existem duas vertentes para transmissão de dados na Internet: as Redes IP e as Redes Centradas na Informação. Para as soluções disponíveis nas redes IP, destacam-se o sistema DONet/CoolStreaming~\cite{xinyan_zhang_coolstreaming/donet:_2005}, o Denacast~\cite{5764567} e o protocolo DASH~\cite{6077864}, detalhados na Seção~\ref{sec:proto-app-ea}. Já para as Redes ICN, destacam-se o CCN/NDN~\cite{6419703} e o sistema CCN-TV~\cite{6550523}. Apesar do foco ser nesses trabalhos, outros trabalhos relevantes serão discutidos ao longo deste capítulo.

Até 2004, predominaram soluções de transmissão de mídias ao vivo baseado no modelo de serviço cliente/servidor, com os sistemas sendo capazes de suportar algumas dezenas de usuários por sessão. Em seguida, com base nas pesquisas sobre compartilhamento de arquivos considerando o modelo de serviço P2P, estenderam-se tal modelo de serviço para distribuição de mídias ao vívo. Naquela época (2005), destacou-se o projeto CoolStreaming, sendo o primeiro capaz de distribuir um mesmo evento para aproximadamente 40 mil nós clientes. Em 2008, os autores do CoolStreaming propuseram melhorias arquiteturais, propondo-se a mudança do método \textit{pull} para um o método \textit{push-pull} de \textit{download} das partes de uma mídia.

Em paralelo, entre 2002 e 2005, publicaram-se as primeiras soluções de um protocolo de controle de congestionamento assistido pela rede chamado XCP~\cite{Katabi2003}. Nesse contexto, os roteadores passaram a informar aos sistemas finais qual deveria ser a sua taxa de transmissão em um certo instante. As pesquisas evoluíram nesse sentido e em 2008 propuseram a primeira versão dos protocolos RCP~\cite{Dukkipati:2008:RCP:1368746} e do VCP~\cite{4460574}, após a identificação de algumas limitações do XCP~\cite{Dukkipati:2005:PSF:2103175.2103204}. Em 2010, publicou-se o ConEx~\cite{Eardley:2011:DAF:1983741.1983751,ConExGRP}, tendo como principal objetivo permitir que os sistemas finais compartilhem (com os roteadores) informações sobre o congestionamento experimentado pelos seus pacotes transmitidos. Desde então, não sugiram novas propostas relevantes nesse contexto, exceto o ALTO (\textit{Application-Layer Traffic Optimization})~\cite{RFC5693,Alimi2014}, um serviço que provê informações sobre as redes (por exemplo, localização, estrutura e rotas preferenciais), com o objetivo de modificar os padrões de consumo de recursos de rede e melhorar o desempenho das aplicações. O uso do ALTO em sistemas de distribuição de mídias ao vivo ocorre quando um nó cliente envia uma lista de possíveis nós parceiros e recebe uma lista ordenada dos melhores parceiros baseados em um determinado critério (por exemplo, capacidade de upload). Trata-se de uma solução centralizada em um modelo cliente/servidor e os próprios clientes são responsáveis por realizar as medições para determinar os valores dos critérios de seleção. Isto significa que um cliente pode prover informações incorretas sobre o seu estado atual, intencionalmente ou erroneamente devido à dinâmica da rede, pois é de responsabilidade da aplicação implementar o cliente ALTO para descobrir e conectar a um servidor ALTO. Além disso, algumas pesquisas apontam que o uso do ALTO não melhora o índice de continuidade de uma transmissão ao vivo, apesar de diminuir o tempo de inicialização para obter as primeiras partes de uma mídia~\cite{6621763}. Isto ocorre porque os nós clientes decidem com qual frequência atualiza seu estado no servidor (capacidade de transmissão, número de saltos entre o cliente e o servidor etc.), que muda com frequência devido à dinâmica da rede. No GMTP, as medições são feitas pelos roteadores com base no protocolo RCP, decidindo-se quais serão os roteadores parceiros, de acordo com a capacidade de cada canal, auxiliado pelos nós servidores que transmitem um fluxo de dados multimídia.

Em 2011-2012, dentre as várias soluções para distribuição de mídias ao vivo (novas ou aprimoradas), várias se destacaram, como a Denacast, propondo-se um modelo híbrido P2P/CDN para distribuição de mídias ao vivo com base no CoolStreaming~\cite{5764567,4146695,Alhaisoni2009,4575245,Yin:2010:LEC:1823746.1823750,4498187}. Nos dias atuais, existem diversas pesquisas para distribuição de mídias ao vivo através do uso do protocolo HTTP, permitindo-se que os nós clientes obtenham as partes da mídia que mais se adequar com a sua capacidade de recepção (adaptação dinâmica de fluxos de dados no lado do cliente). Nesse último caso, destacam-se o uso de CDNs comerciais em escala global, bem como soluções híbridas P2P/CDN. Até o presente momento, o esforço têm sido completamente em soluções na camada de aplicação.

Considerando a vertente das Redes Centradas na Informação o \textit{Information Centric Networks} (ICN), em 2006, Van Jacobson introduziu o assunto em uma palestra proferida para um grupo de pesquisadores de várias partes do mundo, no GooglePlex, Montain View, Califórnia, EUA~\cite{VanJ2006}. Esta palestra marcou o (re)início das pesquisas nesse área. Argumentou-se que o modelo de requisição origem/destino empregado na Internet não mais se sustenta, considerando o aumento significativo do tráfego de dados atual. A verdade é que alguns pesquisadores argumentam que essa vertente de pesquisa já existia desde os anos 1970, mas sem evolução até 2006~\cite{5936152}. A partir de 2006, surgiram as seguintes propostas: DONA (\textit{Data Oriented Network Architecture}), PSI (\textit{Publish-Subscribe Internet Routing}), NetInf (\textit{Network of Information}) e o CCN (\textit{Content-Centric Networks}), atualmente conhecida pela sigla NDN (\textit{Named-Data Networks})~\cite{6384450}. Em 2013, propuseram-se o CCN-TV, o primeiro sistema para distribuição de mídias ao vivo em NDN e com suporte ao DASH. Na Seção~\ref{sec:trab-redes-centradas-informacao}, discute-se mais detalhes sobre as ICN, em especial a NDN, bem como sobre as propostas para distribuição de mídias ao vivo, como a CCN-TV.

Não obstante, neste trabalho, propõe-se o GMTP, apresentado em versão incipiente no final de 2011 e neste trabalho em sua versão aprimorada. No restante deste capítulo, confronta-se diversas propostas para distribuição de mídias ao vivo com o GMTP, ao passo que no Capítulo~\ref{cap:mudccp}, detalha-se seu funcionamento. Dentre todas as soluções discutidas, considera-se o CoolStreaming/Denacast e o CCN-TV as propostas fundamentalmente mais próximas ao GMTP. Por esse motivo, no Capítulo~\ref{cap:analisedesemp}, compara-se o desempenho do GMTP, do CoolStreaming/Denacast e do CCN-TV em mais detalhes.

\section{Aplicações e Protocolos para Distribuição de Mídias ao Vivo}
\label{sec:proto-app-ea}

Nos últimos anos, os pesquisadores vinculados à IETF propuseram a especificação
de protocolos para transmissão e/ou distribuição de mídias ao vivo,
declarando-os como padrões públicos. Em geral, executam-se os protocolos dessa
categoria na camada de aplicação, os quais permitem a criação, encerramento e
controle de sessões de transmissão de mídias ao vivo, como videoconferência e TV
através da Internet. Contudo, o esforço de padronização não tem sido
suficiente, abrindo oportunidades para protocolos proprietários e da comunidade acadêmica para este mesmo fim. As soluções propostas englobam produtos de software bem como trabalhos acadêmicos que nunca foram postos em funcionamento em larga escala, mas que seu legado contribuiu para a evolução do estado da arte. Nos últimos 15 anos (pelo menos), a maior parte das soluções propostas para disseminação de mídias ao vivo são apresentadas como sistemas ou \textit{middlewares} para o fim que se discute.

\subsection{\textit{HLS -- HTTP Live Streaming}, \textit{HDS -- HTTP Dynamic
Streaming}, \textit{DASH -- Dynamic Adaptive Streaming over HTTP} e
\textit{HSS -- HTTP Smooth Streaming}}
\label{subsec:http-streaming}

Os protocolos HLS (\textit{HTTP Live Streaming})~\cite{Pantos2013}, HDS
(\textit{HTTP Dynamic Streaming})~\cite{AdobeInc2014}, o MPEG-DASH \textit{Dynamic
Adaptive Streaming over HTTP}~\cite{6077864,5986186}, e o HSS (\textit{Smooth
Streaming})~\cite{6583390},
%  e o WebRTC
são quatro protocolos independentes propostos pela Apple, Adobe, MPEG
e Microsoft, respectivamente.
% Google\footnote{WebRTC: de fato, trata-se é um protocolo proposto
% pela Google,
% em seguida, em parceria com as empresas Firefox e Opera.}
% respectivamente.
Em geral, propõe-se que as transmissões de fluxos de mídias ao vivo sejam
realizadas por servidores web, sendo que tais protocolos incrementam as funções
do protocolo HTTP, oferecendo-lhe suporte a descrição de uma mídia, marcação de
tempo, segurança e principalmente adaptação do fluxo de dados em uma sessão ao
vivo de transmissão multimídia. Sendo assim, pode-se afirmar que os protocolos
HLS, HDS, MPEG-DASH, têm propósitos similares aos protocolos H.323, SIP, RTP e
RTSP, porém com base no protocolo HTTP.

Uma característica comum entre os protocolos HLS, HDS, HSS e MPEG-DASH é que a
transferência dos fluxos multimídia ocorre sem a manutenção de uma conexão, os
nós clientes podem escolher entre diferentes modos de codificação multimídia e
suporte à criptografia. Nessas soluções que exploram a convergência dos serviços
multimídia com base na web, como ilustra-se na
Figura~\ref{fig:hls_transport_stream}, especifica-se a fonte da mídia através de
uma URI (\textit{Uniform Resource Identifier})~\cite{RFC3986}, que aponta para
um arquivo contendo uma lista ordenada das URIs para as mídias a serem
reproduzidas. Para reproduzir um determinado conteúdo, um nó cliente primeiro
obtém o arquivo contendo a lista de URIs e então obtém e reproduz cada segmento
de mídia especificado na lista. Periodicamente, o nó cliente recarrega o arquivo
contendo a lista de URIs a fim de descobrir os próximos segmentos a serem
reproduzidos. Este período corresponde ao tempo em que um segmento é consumido
para ser reproduzido ao usuário final. Considerando a teoria de distribuição de
conteúdos multimídia ao vivo discutido no Capítulo~\ref{cap:fundamentacao},
pode-se afirmar que um segmento contém apontadores para as partes da mídia que
acabara de ser gerada, portanto é equivalente ao mapa de buffer em uma
arquitetura P2P para distribuição de conteúdos multimídia ao vivo.

% ISSO É INTERESSANTE, MAS SUPRIMIDO PARA NÃO ENCHER MUITO A BOLA AO HTTP.
% A transmissão de fluxos de dados na web tem se tornado uma abordagem popular
% devido a vários benefícios. Primeiro, a infra-estrutura da Internet tem
% evoluído para suportar o protocolo HTTP. Por exemplo, as CDNs provêem cache de
% bordas localizados, que reduzem o tempo de resposta para uma requisição. Além
% disso, requisições HTTP praticamente não são bloqueadas pelos firewalls de
% rede, tornando-se comum em qualquer dispositivo. Segundo, com a transmissão
% baseada em HTTP, os nós clientes gerenciam os fluxos de dados sem precisar
% manter uma estado de conexão no servidor. Portanto, suportar um grande número
% de fluxos de dados de clientes não implica em nenhum custo adicional para
% melhorar os recursos computacionais dos servidores e da rede além do que já se
% faz necessário para suportar requisições web, podendo ser gerenciados pelas
% CDNs usando técnicas de otimização baseadas em HTTP.

Por exemplo, na Figura~\ref{fig:MPEG-DASHScope}, ilustra-se um cenário de
transmissão de um fluxo de dados multimídia entre um servidor e um cliente
MPEG-DASH, proposto como padrão a ser publicado pela ISO (ISO/IEC 23009-1). O
conteúdo da mídia é capturado e armazenado no servidor web, que são transmitidos
para os clientes via HTTP. O servidor web MPEG-DASH armazena o conteúdo em duas
partes. A primeira parte é um arquivo que descreve o conteúdo disponível, como
os endereços dos servidores fontes, tempo de duração, formatos da mídia e
resoluções, largura de banda máxima e mínima, aspectos de direitos autorais
(DRM), dentre outras informações. A segunda parte são os segmentos, que são
arquivos que contém, de fato, os bits de dados da mídia.

\begin{figure}[ht]
\begin{center}
\includegraphics[natwidth=627,natheight=386,scale=.5]{imgs/hls_transport_stream.jpg}
\end{center}
\vspace{-1cm}
\caption{Arquitetura do HLS para transmissão de conteúdos multimídia
baseado no protocolo HTTP. Figura extraída e adaptada de~\cite{Pantos2013}.}
\label{fig:hls_transport_stream}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[natwidth=680,natheight=392,scale=1]{imgs/MPEG-DASHScope.png}
\end{center}
\vspace{-1cm}
\caption{Arquitetura do MPEG-DASH para transmissão de conteúdos multimídia
utilizando o protocolo HTTP. Os formatos e as funcionalidades dos blocos
vermelhos são definidos pela especificação do MPEG-DASH. Adaptado
de~\cite{6077864}.}
\label{fig:MPEG-DASHScope}
\end{figure}

Uma aplicação baseada no protocolo HLS transmite, obrigatoriamente, fluxos de
dados no formato MPEG2-TS (parte 1) e funciona apenas para o navegador
Safari\texttrademark\space e os dispositivos que suportam o sistema operacional
iOS. Já as aplicações baseadas no protocolo HDS transmite, obrigatoriamente, um
formato específico criado pela Adobe conhecido por fMP4 que, na prática
consiste em diversos fragmentos de um arquivo codificado no formato MPEG-4
(partes 12 e 14). Os protocolos HDS, HSS e o MPEG-DASH suportam funções de
adaptação de fluxos de dados multimídia por oferecerem suporte ao formato
MPEG-4.

A principal estratégia das soluções de transmissão de vídeo baseadas em HTTP é
adaptar os fluxo de dados de acordo com diferentes taxas de transmissão e
transcodificar o conteúdo para diferentes formatos suportados pelas
aplicações em execução nos nós clientes. Isto permite que inúmeros clientes, que
suportam diferentes formatos e conectados através de redes com diferentes
capacidades de recepção, possam reproduzir o conteúdo de forma adaquada. Para
que isso seja possível, os nós clientes devem monitorar sua capacidade de
recepção de dados e solicitar o conteúdo multimídia de acordo com a taxa de bit
corresponde e anunciada pelo servidor.

\subsubsection{Comparação entre as soluções HTTP e o GMTP para distribuição de mídias ao vivo}:

Os protocolos supracitadoss são mais um exemplo da pulverização das
aplicações multimídia discutidas no Capítulo~\ref{cap:introducao}. Com base na
discussão anteriormente sobre a distribuição de mídias ao vivo através de
servidores web com suporte aos protocolos supracitados, deve-se considerar os
seguintes pontos:

\begin{itemize}

  \item Os protocolos supracitados não oferecem efetivamente mecanismos para
distribuição em larga escala. Para que isto ocorra, deve-se implementar a
distribuição do conteúdo com o uso das Redes de Distribuição de Conteúdo (CDN).
Isto aumenta os custos de uma solução devido à necessidade de distribuir
estrategicamente servidores ao redor do mundo e melhorar os canais de
transmissão, pois, em essencia, trata-se de requisições HTTP. No caso do GMTP,
a camada de aplicação o utiliza de forma similar ao TCP, mas o transporte
dos dados entre os servidores da CDN ocorrer com o suporte de uma rede de
favores formada pelos roteadores de rede, onde o conteúdo pode ser entregue
pelo servidor diretamente ao roteador do nó cliente interessado em receber o
fluxo de dados ou indiretamente, entregue por um roteador parceiro ao roteador
do do cliente interessado pelo fluxo. O roteador parceiro por receber o fluxo
do servidor ou por outro roteador parceiro, e assim sucessivamente. Sendo
assim, o MPEG-DASH pode fazer uso do GMTP, em vez do TCP;

  \item Os servidores web executam o protocolo HTTP na camada
de aplicação e, na camada de transporte, dependem do protocolo TCP. Sendo
assim, realiza-se a transmissão das partes da mídias através de um protocolo
orientado à conexão, com garantia de entrega e ordenação, podendo gerar
atrasos na entrega dos segmentos devido às retransmissões quando há perda de
segmentos devido ao congestionamento da rede. Além disso, pode ocorre o
problema da tragédia dos bens comuns, discutido no
Capítulo~\ref{cap:introducao};

  \item As soluções baseadas em HTTP são baseadas no método \textit{pull}. Isto
significa que os nós clientes que desejam reproduzir um conteúdo ao vivo devem
solicitar periodicamente os próximos segmentos que devem ser reproduzidos. Em se
tratando de transmissões de mídias ao vivo em larga escala, pode-se aumentar
sobremaneira o número de requisições dos arquivos de lista, aumentando-se
o tráfego na rede com dados considerados de controle. Apesar dos inúmeros
esforços para melhorar os mecanismos de escalonamento baseados em \textit{pull},
o uso do método \textit{pull} sempre acarretará em um \textit{trade-off} entre a
sobrecarga de controle e o atraso. Ou seja, os protocolos sempre terão uma alto
sobrecarga na troca de pacotes de controle ou um alto atraso na recepção dos
dados~\cite{5061999,4395127,susu_xie_coolstreaming:_2007}. No caso do GMTP,
utiliza o método híbrido \textit{push/pull}, onde o método \textit{push} é
utilizado como padrão e o \textit{pull} em casos especiais, como quando um nó
está prestes a reproduzir um determinado \textit{chunk} e este ainda não está
disponível. Além disso, apesar do método \textit{pull} não necessitar conexão e
o HTTP é interesse para isso, no GMTP, reduz-se o número de conexões ao permitir
que os roteadores de rede interceptem os pedidos de múltiplas conexões para um
mesmo conteúdo transmitidas em direção ao nó servidor;

  \item O TCP implementa um mecanismo tradicional de controle de
congestionamento, adaptando sua taxa de transmissão de acordo com a perda dos
segmentos. Por outro lado, os clientes web precisam monitorar sua capacidade de
recepção e solicitar ao servidor web os segmentos correspondente. Isto
significa que o conteúdo é adaptado de acordo com o estado da rede percebida
pelo cliente TCP~\cite{Akhshabi:2011:EER:1943552.1943574}. Em canais
assimétricos de transmissão, não é simples disponibilizar soluções para medir a
capacidade de transmissão quando se utiliza o método \textit{pull}. Isto porque
o nó transmissor perceberá uma taxa de transmissão diferente da taxa de
transmissão do receptor, que não envia dados com conteúdo. Além disso, de acordo
com o estado da arte, existem soluções mais sofisticadas para fazer melhor uso
dos canais de transmissão, expondo às aplicações informações mais precisas sobre
o estado da rede com relação a sua capacidade de transmissão. Isto ocorre com o
uso dos algoritmos de controle de congestionamento assistidos pela rede. Como
consequência, tais soluções reduzem o congestionamento nos pontos de
interconexão, melhorando a qualidade dos fluxos de dados multimídia reproduzidos
aos usuários finais. No caso do GMTP, utiliza-se uma versão adaptada do
RCP~\cite{Dukkipati:2008:RCP:1368746};

  \item Soluções baseadas em HTTP, devem considerar aspectos relacionados à
segurança do HTTP, descritos na Seção 15 da referência~\cite{RFC2616}. Os
principais aspectos a serem considerados são a disponibilização de informações
pessoais e privadas, comprometimento dos segmentos devido aos ataques de
interceptação implementados com servidores de cache e os arquivos de lista
contém URIs, utilizadas pelos clientes para requisitarem os segmentos a
servidores arbitrários e que podem estar comprometimento. No GMTP, utiliza-se
um mecanismo de segurança imbutido no próprio protocolo que permite os
roteadores validarem o conteúdo através de assinatura digital e o conteúdo pode
ser criptografado utilizando métodos tradicionais, como criptografias
assimétricas, com suporte a diferentes método, como RSA e Curvas Elípticas.

\end{itemize}

%
% http://tools.ietf.org/html/draft-pantos-http-live-streaming-12
% http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Concept
% ual/StreamingMediaGuide/Introduction/Introduction.html

% MPEG DASH - T. Stockhammer, Dynamic adaptive streaming over HTTP:
% standards and design principles, ACM MMSys 2011
% http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=5986186&queryText
%3DHTTP+Dynamic+Streaming
% http://dashif.org/mpeg-dash/

% \subsection{\textit{Scalable and Reliable Live Streaming Service through Coordinating CDN and P2P}}
%
% 6121327
% http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=6121327&url=http%3A%2F%2Fieeexplore.ieee.org%2Fiel5%2F6120125%2F6121242%2F06121327.pdf%3Farnumber%3D6121327

% \subsection{\textit{An Alliance Based Peering Scheme for P2P Live Media Streaming}}
%
% 4378429
% http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=4378429&url=http%3A%2F%2Fieeexplore.ieee.org%2Fiel5%2F6046%2F4378421%2F04378429

\subsection{PDTP -- \textit{Peer Distributed Transfer Protocol}}

O protocolo \textit{Peer Distributed Transfer Protocol}
(PDTP)~\cite{arcieri2004} surgiu em 2002 com a promessa de prover um método para transferência de arquivos
e
mídia em tempo real similar ao BitTorrent. O uso do protocolo foi perdendo força
e
no final de 2007 foi descontinuado. Sua implementação de referência era
conhecida
pelo nome de DistribuStream~\footnote{DistribuStream:
\url{http://freecode.com/projects/distribustream}}.

O PDTP previa o uso de servidores para gerenciamento automático de diretórios de
conteúdo, fazendo-o similar a protocolos como o HTTP e o FTP. Além disso, na
proposta do PDTP previa suporte a meta descrição e validação de integridade de
conteúdo através do uso de assinatura digital. A \textit{Internet Assigned
Numbers
Authority} (IANA) alocou a porta 6086 para o uso do protocolo em aplicações
multimídia. Suporta um mecanismo de \textit{tracker} similar ao PPSP/Swift e
utiliza o protocolo UDP para transmissão de dados.

O PDTP especifica um conjunto de nós chamados de \textit{hubs}, que tem como
responsabilidade prover o mapa da rede, listagem de diretórios e serviço de
arquivos. O serviço de arquivo é similar ao esquema de \textit{seed} do
BitTorrent, com a diferença do uso de outro conjunto de nós chamados de
\textit{Piece Proxies} (PP). Os PPs fazem download e cache de pedaços de
arquivos
armazenados nos nós hubs e então servem estes pedaços na rede sob demanda,
reduzindo o consumo de banda dos \textit{hubs}. Segundo os autores, o BitTorrent
resolve esse problema com o uso de multiplos \textit{seeds}, porém se não
existir nenhum \textit{seed} disponível para um \textit{torrent} o conteúdo fica
inacessível. Na Figura~\ref{fig:arq-pdtp} ilustra-se a organização geral dos nós
PDTP.

\begin{figure}[ht]
\begin{center}
\includegraphics[natwidth=623,natheight=322,scale=0.7]{imgs/trabrel/arq-pdtp.png}
\end{center}
\vspace{-0.5cm}
\caption{Organização dos Nós PDTP. Figura extraída de~\ref{arcieri2004}.}
\label{fig:arq-pdtp}
\end{figure}

\subsubsection{Comparação entre o PDTP e o GMTP para distribuição de mídias ao vivo}:

A proposta do protocolo PDTP tem um ponto positivo porque organiza os nós
interessados por um mesmo conteúdo de forma hierárquica e o conjunto de comandos
disponíveis do protocolo é similar a protocolos tradicionais, como o HTTP e o
FTP.

Embora os autores mencionem a possibilidade de utilizar o PDTP em transmissões
de mídia em tempo real, nenhum referência disponível menciona detalhes sobre tal
capacidade. O uso do protocolo UDP caracteriza um protocolo com os problemas
problemas já discutidos ao longo deste trabalho e presente nos outros trabalhos
apresentados neste capítulo.

\subsection{CPM -- \textit{Cooperative Peer Assists and Multicast}}

No \textit{Cooperative Peer Assists and Multicast} (CPM)~\cite{5061910}
propõe-se
uma abordagem unificada para prover suporte eficiente de transmissão de vídeos
sob
de demanda para ser utilizada por provedores de serviços. O CPM é um protocolo
de
aplicação que suporta transmissão em modo multicast, cache de dados nos nós
clientes, compartilhamento de dados entre os cliente, onde o servidor utiliza
modo
de transmissão unicast.

Na Figura~\ref{fig:arq-cpm} ilustra-se a visão geral do funcionamento do CPM
através de um diagrama de sequência. Primeiramente o cliente conecta o servidor
para saber sobre a existência de algum grupo multicast, e então passa a
receber o conteúdo em modo multicast. Caso não exista um grupo multicast para o
conteúdo de interesse, o cliente solicita, através de um servidor de diretórios
a
lista de nós que detém o conteúdo de interesse e então inicia a transferência.
Caso não exista nenhum nó com o conteúdo requisitado, o cliente requisita o
conteúdo diretamente para o servidor.

\begin{figure}[ht]
\begin{center}
\includegraphics[natwidth=913,natheight=522,scale=0.6]{imgs/trabrel/arq-cpm.png}
\end{center}
\vspace{-0.5cm}
\caption{Diagrama de sequência do CPM (\textit{Cooperative Peer Assists and
Multicast}). Figura extraída de~\ref{5061910}.}
\label{fig:arq-cpm}
\end{figure}

Na arquitetura do protocolo CPM existem três componentes principais: (1) o
modelo de dados do vídeo; (2) um protocolo para descoberta e transferência de conteúdo
e (3) um escalonador inteligente no lado do servidor. O modelo de dados divide o vídeo
em pedaços (\textit{chunks}) de tamanhos fixos. Cada pedaço é identificado por um GUID
(\textit{Globally Unique Identifier}), onde um segmento consiste em uma sequência de
pedaços e uma sequência de segmentos constitui um vídeo.

O protocolo de transferência assume que o vídeo deve está completamente
armazenado
no servidor para permitir que os nós façam cache dos pedaços e redistribuí-los
\textit{a posteriori}. Quando um cliente envia um pedido de reprodução de vídeo,
o
servidor mapeia o conteúdo do vídeo requisitado, que é então formatado em
sequências de pedaços e transmitidos para o cliente. Este procedimento é
executado em paralelo com outros nós da rede. O modo de transmissão multicast é
ativado pelo servidor e só ocorre quando múltiplos clientes tem interesse pelo
mesmo conteúdo.

\subsubsection{Comparação entre o CPM e o GMTP para distribuição de mídias ao vivo}:

A capacidade para transmitir o conteúdo em modo híbrido é um aspecto positivo
para o CPM. A seguir enumeram-se os pontos fracos identicados.

\begin{enumerate}

  \item Para utilizar o modo de transmissão multicast, o cliente tem que ter
rota multicast diretamente para o servidor, pois apenas este pode iniciar o
processo de transmissão utilizando este modo. No \mudccps esse mecanismo é
segmentado e qualquer nó pode transmitir em modo multicast.

  \item O mecanismo de transmissão de conteúdo quebra os segmentos em pedaços, o
que torna o gerenciamento mais complexo devido ao espalhamento dos pedaços entre
os nós participantes da transmissão. Isto pode gerar atrasos na reprodução
do conteúdo no cliente devido a necessidade de localizar cada pedaço
individualmente, embora o uso dessa abordagem pode aumenta a velocidade de
download. No \mudccps a existe a idéia de quebrar os segmentos em pedaços
menores.
Tal abordagem é deixada a cargo da aplicação.

  \item O uso de servidor de diretórios para consultar a lista de nós que mantém
o conteúdo multimídia desejado não faz muito sentido para sistemas de
transmissão
de mídia ao vivo. No \mudccps não utiliza-se este tipo de solução.

  \item Como o CPM foi desenvolvido com foco em transmissão de vídeo sob
demanda,
os nós só podem começar a repassar o conteúdo se previamente o este já tenha
reproduzido o vídeo no passado. No caso de sistemas transmissão de vídeo em
tempo
real esta abordagem é completamente inútil. No \mudccps qualquer nó é capaz de
realizar o repasse de conteúdo, inclusive em modo multicast.

\end{enumerate}

\subsection{HySAC -- \textit{Hybrid Delivery System with Adaptive Content
Management for IPTV Networks}}
% http://202.194.20.8/proc/ICC2011/DATA/01-049-01.PDF

No \textit{Hybrid Delivery System with Adaptive Content Management for IPTV
Networks} (HySAC)~\cite{5962598}, propõe-se uma nova arquitetura e um sistema
adaptativo e híbrido que utiliza um esquema chamado de pre-população para
distribuição de vídeos sob demanda em redes IPTV. Os autores do HySAC criticam
o protocolo CPM ao afirmarem que tal abordagem não utiliza os recursos de rede
de
forma otimizada, uma vez que o conteúdo de mídia não é armazenado de modo
pré-planejado de acordo com a demanda dos nós clientes, o que eleva o consumo de
recursos de rede e provê uma baixa qualidade na transmissão do conteúdo
multimídia ao usuário final.

Diferente do CPM, o HySAC provê a arquitetura ilustrada na
Figura~\ref{fig:arq-hysac}. Para evitar que a grande quantidade de usuários
concorrentes sobrecarregue os servidores de mídia, os autores do HySAC propõem um
sistema adaptativo de transmissão de mídia que otimiza o processo de entrega de
dados baseado na popularidade do conteúdo e nos recursos de rede disponíveis. O
conteúdo é categorizado em diferentes classes e o modo de entrega do conteúdo é
baseado na popularidade do mesmo. A popularidade de um conteúdo é computada
baseando-se no interesse dos usuários e no número de requisições que chegam ao
servidor. Os servidores HySAC categorizam os conteúdos e os servidores de
indexação e descoberta utilizam Tabelas Dinâmicas de Hash (DHT) para encontrar
os
servidores que armazenam o conteúdo. Quando a localização de um conteúdo muda,
os
servidores de indexação são atualizados e quando um novo conteúdo é adicionado,
os servidores cuidam da replicação do mesmo de acordo com a sua popularidade.

\begin{figure}[ht]
\begin{center}
\includegraphics[natwidth=551,natheight=485,scale=0.7]{imgs/trabrel/arq-hysac.png}
\end{center}
\vspace{-0.5cm}
\caption{Arquitetura do HySAC (\textit{Hybrid Delivery System with Adaptive
Content Management for IPTV Networks}). Figura extraída de~\ref{5962598}.}
\label{fig:arq-hysac}
\end{figure}

O HySAC utiliza três modo de transmissão: unicast, multicast e P2P. Inicialmente
o HySAC entrega o conteúdo baseado em informações estáticas sobre a popularidade
do conteúdo. O HySAC gerencia um \textit{rank} de pupularidade do vídeo e
dependendo de um determinado limiar de popularidade o vídeo é selecionado para
ser transmitido em modo multicast. Quanto mais alto for a popularidade do vídeo,
maior é a chance dele ser transmitido em modo multicast. Se a popularidade do
vídeo for intermediária, o vídeo será transmitido em modo P2P e se for baixa o
vídeo será transmitido do servidor diretamente para o cliente em modo unicast.

\subsubsection{Comparação entre o HySAC e o GMTP para distribuição de mídias ao vivo}:

A capacidade de transmitir o conteúdo em modo unicast, multicast e P2P é um
aspecto positivo para o HySAC. A seguir enumeram-se os pontos fracos
identicados.

\begin{enumerate}

  \item A decisão do modo de transmissão é baseado na popularidade do vídeo.
Considerando-se transmissões de mídia em tempo real, a forma o como HySAC
implementa o mecanismo de classificar o conteúdo requer um tempo de
convergência,
o que pode consumir recurso de rede desnecessariamente. No \mudccps utiliza-se
multicast sempre que possível, possibilitando que outros clientes recebam o
conteúdo até mesmo sem precisar contactar o servidor, utilizando-se o modo de
conexão rápida.

  \item Da mesma forma que outras soluções, o HySAC utiliza o protocolo UDP para
transmissão de dados da aplicação multimídia. Não foi encontrado nenhuma menção
a
respeito do uso de algoritmos para controle de congestionamento, ao contrário do
\mudccp.

  \item Trata-se de um sistema de transmissão e não de um protocolo de rede
propriamente dito. Isto significa que a proposta do HySAC servirá apenas para
clientes que seguem sua especificação.

\end{enumerate}

% \subsection{PULSE -- \textit{Peer-to-Peer Unstructured Live Streaming
% Experiment}}
%
% 4146695

% http://en.wikipedia.org/wiki/PULSE_%28P2PTV%29

%
% http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=4146695&queryText
%3DPULSE+p2p

% \subsection{SmoothCache -- \textit{HTTP-Live Streaming Goes Peer-To-Peer}}
%
% https://www.sics.se/~roberto/files/Roverso-Smoothcache.pdf

% \subsection{Pastry/SplitStream -- \textit{High-bandwidth content distribution}}
%
% Ver no ALM-Chapter.pdf
%
% Falar também do Tepestry combinado com alguma solução para stream!!!

%
% O Pastry/SplitStream é um sistema para distribuição de conteúdo desenvolvido
% no
% centro de pesquisas da Microsoft. O SplitStream se baseia na capacidade dos
% sistemas finais de transmitir dados em modo multicast e tem capacidade de
% tratar
% falhas de nós e adaptabilidade quanto a diferentes capacidades de transmissão
% dos
% nós participantes. A idéia principal empregada no SlitStream é transmitir o
% conteúdo multimídia  de acordo com a disponibilidade de largura de banda do
% canal
% de diferentes grupos de nós e transmiti-lo usando diferentes árvores
% multicast.

% Preencher...

% http://research.microsoft.com/en-us/um/people/antr/SplitStream/default.htm

%%%% ==========================================================================

% \subsection{SAAR -- \textit{Rethinking the Architecture for P2P Live Video
% Streaming}}
% http://www.mpi-sws.org/~animesh/projects/saar.html
% selecionado-final/saar-nsdi07-talkslides.pdf
% selecionado-final/dataplanes-TR.pdf
% selecionado-final/dataplanes-sigmetrics09.pdf

% X. Zhang, J. Liu, B. Li, and Y.-S.P.Yum, Coolstreaming/donet : A datadriven
% overlay network for live media streaming, in Proceedings of
% IEEE INFOCOM, March 2005.

% N. Magharei and R. Rejaie, PRIME: Peer-to-peer Receiver-drIven
% MEsh-based Streaming, in Proceedings of IEEE INFOCOM 2007, May
% 2007.

% V. Pai, K. Kumar, K. Tamilmani, V. Sambamurthy, and A. Mohr,
% Chainsaw: Eliminating trees from overlay multicast, in IPTPS 2005,
% Ithaca, NY. USA, Feb 2005.

% \subsection{LayeredCast -- \textit{Hybrid Peer-to-Peer Live Layered Video
% Streaming Protocol}}
%
% Preencher...

% http://www.masoudmoshref.com/old/myworks/documentpages/layeredcast.htm

% \section{Outros Protocolos de Transporte Multi-Ponto}
% \label{sec:proto-trans-mp}

% \subsection{BitTorrent/LEDBAT -- \textit{Low Extra Delay Background Transport}}
%
% % http://perso.telecom-paristech.fr/~valenti/papers/ledbat-icccn10.pdf
% % http://www.computer.org/portal/web/csdl/doi?doc=doi%2F10.1109%2FAINA.2011.98
%
% shalunov2011, 5560080
%
% Preencher...

% \subsection{\textit{Friendly P2P: Application-Level Congestion Control for Peer-to-Peer Applications}}

%yaning_liu_friendly_2008


\subsection{PPETP -- \textit{Peer-to-Peer Epi-Transport Protocol}}
\label{subsec:ppetp}

% http://corallo.sourceforge.net/index.html
% tools.ietf.org/html/draft-bernardini-ppetp-03
% Esse é o do chunckless
% Se preocupar com problemas de NAT etc.
% Pode permitir multiplas conexões

O \textit{Peer-to-Peer Epi-Transport Protocol} (PPETP) é um protocolo
distribuído que utiliza uma abordagem P2P para transmissão de mídias em tempo
real, sendo proposto para operar em redes com nós
heterogêneos~\cite{bernardini2011}.

O PPETP é um protocolo que constrói uma rede de sobreposição com suporte a
transmissão em modo multicast. Em tal protocolo, propõe-se uma solução de fácil
integração às aplicações multimídia existentes por meio de uma biblioteca de
programação similar, porém não integrada, à \textit{Socket} BSD. O PPETP
tem como principal aplicação os sistemas de transmissão de vídeo executados por
usuários residenciais, geralmente conectados através de uma tecnologia xDSL,
fornecendo
uma visão de um protocolo de transporte multicast ao desenvolvedor da aplicação,
embora o
PPETP é executado na camada de aplicação.

O PPETP utiliza uma abordagem de transmissão do tipo \textit{push} onde os nós
iniciam e finalizam as conexões utilizando pacotes de controle e trocam dados
em modo unicast. Ao desejar receber um fluxo de dados, um nó B envia um pedido
de conexão ao servidor PPETP (Figura~\ref{fig:arq-ppetp}). Em seguida, o
servidor responde
com uma informação que determina qual nó o cliente B deve solicitar os dados da
transmissão, além de solicitar que o nó B obtenha um arquivo de configuração
dos parâmetros de conexão em um servidor de configuração chamado de
\textit{starting point}. O servidor de configuração pode ser um nó diferente do
servidor gerador do fluxo de dados multimídia. O nó B então requisita os dados
ao nó determinado pelo servidor. No PPETP utiliza-se o protocolo UDP para
transmissão de dados por padrão, embora permite-se o uso de outros protocolos,
como o TCP e possivelmente o DCCP.

\begin{figure}[ht]
\begin{center}
\includegraphics[natwidth=628,natheight=421,scale=0.7]{imgs/trabrel/arq-ppetp.png}
\end{center}
\vspace{-0.5cm}
\caption{Arquitetura e funcionamento do protocolo PPETP.}
\label{fig:arq-ppetp}
\end{figure}

Uma característica fundamental do PPETP é conhecida pelo nome de procedimento
de redução (\textit{reduction procedure}). Considerando-se o princípio de que
um fluxo de dados é uma sequência de pacotes, o procedimento de redução do PPETP
evita que todos os nós do sistema tenham sempre que repassar todos os pacotes desse fluxo
de dados, permitindo-se que mesmos os nós conectados na Internet através de
canais com largura de banda limitada consigam contribuir com o sistema.

No PPETP utiliza-se uma função de redução do tamanho do pacote que é
parametrizável e diversas funções podem ser utilizadas através de uma
arquitetura de componentes. Atualmente existem duas funções, a de
\textit{Vandermonde} e a básica (sem redução). A função de \textit{Vandermonde}
reduzido cada pacote por um fator R e então o pacote é repassado para outros
nós. Cada nó recebe um conjunto de pacotes reduzidos, reconstrói o conteúdo do
pacote, entrega-o para a aplicação e repete o procedimento de redução,
repassando-o para outros nós interessados pelo conteúdo.

Um aspecto importante do PPETP é sua capacidade de tolerar perdas de pacotes.
Como o mecanismo de redução de pacotes permite a reprodução do conteúdo sem que
todos os pacotes reduzidos alcancem o receptor, isto torna o protocolo
resiliente a perdas de dados. Os autores prometem que em uma rede com N nós e
um fator de redução R, a reconstrução de um pacote pode acontecer mesmo se $N
- R$ nós se desconectarem.

\subsubsection{Comparação entre o PPETP e o GMTP para distribuição de mídias ao vivo}:

O aspecto positivo do PPETP é sua capacidade de funcionar com nós heterogêneos
no
ponto de vista dos recursos de rede disponíveis por cada um deles. O esquema
de \textit{procedimento de redução} dos tamanhos dos pacotes parecer ser
bastante
promissor, porém ao que pôde-se constatar é complexo de ser implementado e só
funciona com a participação de muitos nós.

Os pontos fracos do PPETP são vários e enumerados a seguir.

\begin{enumerate}

  \item O PPETP é um protocolo na camada de aplicação e considerado pelos
autores de ser um protocolo de pseudo-transporte, pois abstrai da aplicação
diversas
funcionalidades dos sistemas de transmissão de mídia em tempo real que utiliza a
abordagem
P2P. Neste sentido, a disponibilização e a efetiva utilização do PPETP por parte
das
aplicações pode ser dificultada por ser um protocolo de aplicação e não
genuinamente de
transporte. Isto significa que o PPETP não tem uma separação explícita de
responsabilidade no ponto de vista de transporte de dados, misturando
responsabilidades
da camada de aplicação e da camada de transporte. No \mudccp, essa separação é
explícita
por se tratar de um protocolo disponibilizado na camada de transporte sem
qualquer
influência da aplicação, delegando para a mesma apenas responsabilidades de
sinalização e
descrição do conteúdo a ser transportado.

  \item O fluxo de dados de controle é centralizado no servidor. Isto significa
que para
que um nó A comece a receber um fluxo de dados de um outro nó, primeiro o nó A
precisa
solicitar ao servidor o acesso ao conteúdo para em seguida efetivamente começar
a
recebê-lo. No \mudccps isto não acontece, pois qualquer nó pode funcionar como
servidor, o
que ocorre de forma transparente para a aplicação.

  \item O PPETP atualmente utiliza o protocolo UDP que, como já discutido,
possui
diversas desvantagens para a aplicação e para a rede, principalmente em situação
de
congestionamento na rede. O \mudccps é um protocolo de transporte e portanto não
necessita
de nenhum outro protocolo da sua própria camada. Além disso, o \mudccps possui
um
arcabouço para adicionar novos algoritmos de controle de congestionamento, tanto
para as
transmissões em modo unicast quanto para as transmissões em modo multicast.

  \item O PPETP não suporte transmissão de dados em modo multicast. No PPETP os
dados são transmitidos entre os nós em modo unicast, apesar dos autores
mencionarem que
o protocolo funciona em modo multicast, pelo menos no ponto de vista da
aplicação. O
termo multicast empregado nesse contexto é apenas para dar a idéia que poucos
fluxos são transmitidos a partir do nó transmissão, mas que todos os nós
receptores os recebem através da rede sobreposição criada pelo PPETP. No
\mudccps utiliza-se um mecanismo híbrido de transmissão: sempre que possível
usa-se o modo multicast, caso contrário usa-se o modo unicast.

  \item No PPETP alguns mecanismos bastante utilizados em sistemas de
transmissão de
mídias em tempo real, como o de descoberta de nós, deve ser implementado na
camada de
aplicação. Apesar dessa abordagem do PPETP funcionar por ser flexível para a
camada de
aplicação, a mesma limita o uso desses mecanismos à própria aplicação, impedindo
que
outras aplicações façam uso dos mesmos. No \mudccps procurou-se adicionar tal
funcionalidade dentro do próprio protocolo, permitindo-se o reúso desses
mecanismos
em diferentes aplicações. Desta forma, é possível que um algoritmo para
descoberta de
nós seja implementado no \mudccp, em forma de componente, e qualquer outra
aplicação
reutilizar tal mecanismo. Com isto, o \mudccps permite a interioperabilidade
entre
diferentes aplicações a nível de camada de transporte.

  \item Para que o PPETP funcione efetivamente nas aplicações serão necessárias
diversas
alterações em protocolos da camada de aplicação, como no RTSP e no SDP
(\textit{Session
Description Protocol}). Todas as modificações necessárias estão listadas no
documento
disponível na referência~\cite{bernardini2011}.

\end{enumerate}

\subsection{PPSP/Swift -- \textit{P2P Streaming Protocol} / \textit{The Generic
Multiparty Transport Protocol}}
\label{subsec:ppsp-swift}

O \textit{Peer-to-Peer Streaming Protocol} (PPSP) é um protocolo para
sinalização e controle para sistemas de transmissão de fluxos de dados em tempo
real. Dentro do PPSP existe o Swift, um protocolo cujo objetivo é disseminar
o conteúdo para um conjunto de nós interessados por um mesmo conteúdo.

O PPSP define \textit{peers} e \textit{trackers} como dois tipos de nós para um
sistema de transmissão de mídia baseado em P2P. Os \textit{peers} são nós que
enviam e recebem conteúdos multimídia e os \textit{trackers} são nós conhecidos
com conexão estável que mantêm meta informações sobre os conteúdos transmitidos
e uma lista dinâmica de \textit{peers}. Os \textit{trackers} podem ser
organizados de forma centralizada ou distribuída. No PPSP propõe-se dois
protocolos base. O protocolo dos \textit{trackers}, que tratam as trocas de
meta informações entre os \textit{trackers} e os \textit{peers}, tais como a
lista dos peers e informações sobre os conteúdos. E o protocolo dos
\textit{peers}, que controla os anúncios e informações sobre a disponibilidade
de dados da mídia entre os \textit{peers}.

O funcionamento básico do PPSP ocorre da seguinte forma~\ref{fig:arq-ppsp}. Um
nó
transmissor \textit{Peer-P} notifica ao tracker a transmissão realizada por ele
(passo 1). O \textit{tracker} então transmite uma mensagem para os
\textit{Peer-M} e \textit{Peer-D} interessados em receber o conteúdo multimídia
para se juntarem ao grupo (passos 2 e 4). O \textit{Peer-P} transmite o conteúdo
para o \textit{Peer-M}, que repassa para o \textit{Peer-D}. Em seguida, outros
\textit{peers} se registram como clientes interessado o \textit{tracker}

\begin{figure}[ht]
\begin{center}
\includegraphics[natwidth=854,natheight=577,scale=0.6]{imgs/trabrel/arq-ppsp.png}
\end{center}
\vspace{-0.5cm}
\caption{Arquitetura e funcionamento do protocolo PPSP/Swift.}
\label{fig:arq-ppsp}
\end{figure}

O processo descrito anteriormente é governado pelo protocolo PPSP. Porém, como o
PPSP não é um protocolo de transporte, seus idealizadores criaram o \textit{The
Generic Multiparty Transport Protocol} (Swift). A responsabilidade do Swift no
processo descrito é cuidar do transporte de dados entre os \textit{peers}
\textit{Peer-M}, \textit{Peer-D} e quaisquer outros participantes da
transmissão.
O Swift especifica o conteúdo de um stream como pedaços chamados de
\textit{chunks}. O Swift transmite os dados entre os \textit{peers} utilizando o
protocolo de transporte UDP com suporte de controle de congestionamento chamado
de
LEDBAT~\cite{5560080,shalunov2011}, o mesmo adotado no BitTorrent.

\subsubsection{Comparação entre o PPSP/Swift e o GMTP para distribuição de mídias ao vivo}:

Os pontos positivos do PPSP/Swift são dois. O primeiro é a separação do
mecanismo
de sinalização e descrição da mídia da parte de transporte. O segundo ponto é
o mecanismo do Swift de distribuição de conteúdo, baseado em enxames.

Os pontos fracos do PPSP/Swift são enumerados a seguir.

\begin{enumerate}

  \item Ausência de suporte para extensão para recursos da aplicação, como por
exemplo, descoberta, controle de congestionamento e tolerância à falhas. O
\mudccps é extensível nesse aspecto.

  \item Não suporta compartilhamento de conexão com suporte a transmissão em
modo
multicast.

  \item Menciona o uso futuro do algoritmo para controle de congestionamento
TFRC, porém não possui suporte a controle de congestionamento em grupo. No
\mudccps isso é feito utilizando o algoritmo MCC, apresentado nas
Seções~\ref{sec:cc} e~\ref{sec:mcc}.

  \item A transmissão de conteúdo com o transporte de \textit{chunks} é
interessante em aplicações para compartilhamento de arquivos, onde o tempo de
resposta não é requisito fundamental para a qualidade de serviço no ponto de
vista do usuário que o utiliza. O uso dessa abordagem em aplicações de
transmissão de mídia em tempo real não é uma estratégia interessante devido a
complexidade de indexar e remontar os pacotes de dados de acordo com cada
\textit{chunk}. Esses procedimentos podem onerar o tempo em que um pacote de
dados é entregue para a camada de aplicação, gerando-se um atraso no fluxo
contínuo de dados para a camada de aplicação.

  \item Uso do protocolo UDP, apesar de fornecer mecanismo para controle de
congestionamento. Esta prática quebra a idéia da organização dos protocolos em
camadas funcionais, onde uma camada fornece serviços para a camada superior e,
obviamente, usufrui de serviços da camada inferior. Mecanismos para controle de
congestionamento devem ser implementados na camada de transporte e não na camada
de aplicação. Isso limita o uso dos recursos implementados no Swift apenas para
aplicações que utilizam sua implementação, a \textit{libswift}, disponível em
forma de biblioteca de software. O \mudccps é um protocolo de transporte e
portanto independente de qualquer outro, além de implementar e suportar à adição
de seus próprios algoritmos para controle de congestionamento.

\end{enumerate}

\subsection{DONet/CoolStreaming}
\label{subsec:coolstreaming}

O CoolStreaming é um sistema para distribuição de mídias ao vivo baseado em uma
arquitetura P2P~\cite{4509752,susu_xie_coolstreaming:_2007,xinyan_zhang_coolstreaming/donet:_2005}. A primeira versão do Coolstreaming foi lançada em 2004 e aprimorada ao longo dos anos, tornando-se o sistema mais conhecido e robusto para transmissão de mídias ao vivo em larga escala. Atualmente (2014), o sistema CoolStreaming é uma das principais referências no contexto de distribuição de mídias ao vivo, tanto no contexto acadêmico quanto comercial. O sistema CoolStreaming está disponível para uso no mercado, servindo
a milhares de nós ao redor do mundo e, por ter sido descrito e estudado
exaustivamente, também está disponível na rede PlanetLab e nos principais
simuladores de redes P2P, com o OMNet++/Oversim\footnote{OMNet++/Oversim: de
fato, o CoolStreaming está disponível através do projeto Denacast, desenvolvido
com base no OMNet++/Oversim. Na Seção~\ref{subsec:denacast}, detalha-se o
Denacast.} e o OMNet++/OSSim.

A sigla DONet significa \textit{Data-drive Overlay Network} e CoolStreaming
significa \textit{Cooperative Overlay Streaming}, sendo a implementação de
referência da DONet. Desde a primeira versão, seus autores propuseram que
partes da mídia fossem distribuídas sobre uma rede de sobreposição onde os nós
sempre repassavam as partes de uma mídia para outros nós interessados pelo mesmo
conteúdo, sem nenhuma regra pre-definida, como nó pai ou filho; nó interno ou
externo; capacidade de upload e download, etc. Com essa visão centrada no dado,
os autores decidiram que a disponibilidade do dado era o critério para guiar as
estratégias de escalonamento dos fluxos de dados transmitidos através da rede de
sobreposição, adaptando-se melhor às dinâmicas dos nós em uma rede P2P. Cada nó
periodicamente troca informações sobre a sua disponibilidade de \textit{chunk}
transmitindo seu mapa de buffer com um conjunto de nós parceiros, obtendo os
\textit{chunks} ausentes a partir dos nós que os anunciam como disponíveis.


\begin{figure}
  \centering
  \subfigure[CoolStreaming 1.0. Extraído de~\cite{xinyan_zhang_coolstreaming/donet:_2005}.] {
    \label{fig:coolstreaming1}
    \includegraphics[natwidth=683,natheight=571,scale=0.25]{imgs/trabrel/coolstreaming1.png}
  }
  \qquad
  \subfigure[CoolStreaming 2.0. Extraído de~\cite{4509752}.] {
    \label{fig:coolstreaming2}
    \includegraphics[natwidth=683,natheight=571,scale=0.37]{imgs/trabrel/coolstreaming2.png}
  }%
  \caption{Arquitetura genérica de blocos funcionais do CoolStreaming 1.0 e do 2.0.}
  \label{fig:coolstreaming}
\end{figure}

Conforme ilustra-se na Figura~\ref{fig:coolstreaming}, o sistema CoolStreaming
teve duas versões de produção. Na Figura\ref{fig:coolstreaming1},
ilustra-se o diagrama genérico do sistema para um nó na rede DONet,
quando se utilizava apenas o método \textit{pull} para obtenção de conteúdo,
estratégia bastante similar ao BitTorrent, com seleção aleatória de nós
parceiros. Já na Figura\ref{fig:coolstreaming1}, ilustra-se o diagrama genérico
da versão aprimorada do CoolStreaming, onde diversos aspectos foram aprimorados
e o mecanismo de obtenção das partes da mídia foi remodelado para uma abordagem
híbrida \textit{pull/push} de obtenção dos blocos de vídeo (\textit{chunks}).
Na versão mais atual do CoolStreaming, organiza-se um fluxo de dados multimídia
em sub-fluxos que carregam blocos de dados contendo partes da mídia para ser
reproduzida na aplicação em execução no nó receptor. Na primeira versão, os
blocos de dados eram obtidos sempre utilizando o método \textit{pull}, o que
acarretava o aumento no atraso para obter o conteúdo em 1 RTT. Na segunda
versão, a estratégia híbrida \textit{pull/push} mudou para a seguinte forma.
Quando um nó $C_1$, interessados em obter um determinado bloco de vídeo,
recebe de um nó parceiro $C_2$ o mapa de buffer contendo a disponibilidade dos
blocos do vídeo, $C_1$ envia uma requisiçao à $C_2$ solicitando os blocos de
vídeo desejados (\textit{pull}). Em seguida, o nó $C_2$ transmite os blocos de
vídeo para $C_1$ e, a partir desse momento, todo novo bloco de vídeo que $C_2$
receber, repassa ao nó $C_1$ (\textit{push}).

Os outros componentes do sistema CoolStreaming são:
\begin{itemize}

  \item \textit{Membership manager}, que permitem os nós do sistema manterem uma
visão parcial da rede de sobreposição, sendo adicionado na versão 2 um
componente chamado \textit{mCache}, que registra uma lista parcial dos atuais
nós ativos na rede;

  \item \textit{Partnership manager}, que estabelece e mantém as parcerias com
os outros nós e também é responsável por trocar o mapa de \textit{buffer}. O
algoritmos padrão para seleção de nós é baseado em uma escolha aleatória entre
os nós disponíveis na lista \textit{mCache};

  \item \textit{Stream Manager}, que efetivamente transmite os fluxos de dados
representados nos blocos de vídeo. Este componente é responsável por escalonar
o momento exato de enviar cada \textit{chunk} correspondente a um vídeo sendo
compartilhado com outros nós do sistema;

  \item \textit{Buffer Map}, que representa o estado atual do buffer para um
determinado vídeo. Como discutido no Capítulo~\ref{cap:fundamentacao}, um nó
pode sinalizar os blocos de vídeo que estão disponíveis ou os blocos de vídeo
que estão ausentes e portanto necessários.

\end{itemize}

Além da mudança para uma abordagem híbrida \textit{pull/push}, os autores do
CoolStreaming 2.0 propuseram o conceito de sub-fluxo. O nó transmissor divide o
vídeo em blocos de tamanhos iguais, e a cada bloco é assinalado um número de
sequência para permitir a reprodução do conteúdo em ordem. Dessa forma, cada nó
pode obter diferentes blocos de vídeo a partir de diferentes nós parceiros. Com
isto, espera-se reduzir o impacto causado na rede devido à saída ou falha de
comunicação em um nó transmissor.


% http://totoro.cs.nthu.edu.tw/~gdemon/download/pdf/Present-%20Coolstreaming_%20Design,%20Theory,%20and%20Practice.pdf
% VER: http://www.docstoc.com/docs/160021567/Inside-the-New-Coolstreaming-Principles_-Measurements-and

\subsubsection{Comparação entre o CoolStreaming e o GMTP para distribuição de mídias ao vivo}:

A robustez do CoolStreaming em tratar a dinâmica da rede, bem como a
possibilidade de realizar as ações apresentadas anteriormente sem requerer
qualquer suporte da rede física, são aspectos positivos do CoolStreaming. Suas
características possibilitaram a aplicação do CoolStreaming em cenários reais.

Por outro lado, os pontos negativos do sistema CoolStreaming são apresentados a
seguir.

\begin{enumerate}

  \item O conceito de sub-fluxo adiciona complexidade à solução sem
necessariamente resultado em ótimos resultados. Em~\cite{4509752}, os autores
do CoolStreaming discutem que aumentar a quantidade de número de sub-fluxos não
melhora proporcionalmente algumas métricas, como o índice de continuidade e
utilização da capacidade de upload dos nós transmissores (em média). Os autores
executaram simulações com 40 mil nós e 24 servidores auxiliares (que
funcionaram apenas como nós transmissores) e observaram que a partir de 8
sub-fluxos, as duas métricas citadas anteriormente não melhora e, em alguns
casos, até pioram (quando se utiliza nós com capacidade heterogêneas de
transmissão). No GMTP, utiliza-se sempre o método \textit{push} após um nó
estabelecer uma conexão e os roteadores no caminho entre o nó servidor e o nó
cliente podem interceptar os pedidos de conexão transmitidos por outros nós
clientes. Essa estratégia reduzir a quantidade de requisições ao servidor e o
tempo para iniciar a reprodução de um vídeo ao usuário final (apenas o primeiro
usuário perceberá um atraso maior do que os demais). Com isso, se no caminho
entre o nó cliente e o nó servidor não ocorrer nenhuma interceptação, a
requisição alcançará o nó servidor, e a troca de dados ocorre. Porém, os
próximos nós clientes que transmitirem seu pedido de conexão através de pelo
menos parte do mesmo caminho já utilizado anteriormente, um nó servidor
instruirá um roteador nesse caminho a replicar o fluxo para o novo nó cliente,
em vez de responder com a aceitação do pedido de conexão.

  \item No sistema CoolStreaming, a rede de sobreposição é centrada no dado. Os
nós realizam parcerias considerando quais parceiros possuem as partes da mídia
de interesse e a troca de parcerias ocorre ao longo da transmissão. Isso gera
instabilidades na transmissão, impactando diretamente em métricas como o índice
de continuidade. Além disso, as parcerias são efetivadas independente da posição
lógica do nó na rede, levando-se em consideração apenas o nó que detém um
determinado contéudo de interesse e sua capacidade de upload, o que pode gerar
sobrecarga na troca de informações de controle. No GMTP, a rede de sobreposição
é centrada na conexão e a constituição de tal rede ocorre de forma transparente
à aplicação. A formação da rede acontece no processo de pedido de conexão, onde
os nós intermediários (roteadores), localizados entre o nó interessado pela
mídia (cliente) o nó transmissor (servidor) são autorizados a interceptar o
pedido de conexão e responder ao nó cliente como se fosse o servidor original.
Somente depois dessa fase, os nós roteadores GMTP iniciam um processo de
expansão de parcerias, onde podem realizar parcerias com outros nós que não
estejam, necessariamente, conectados em um mesmo servidor da CDN.

  \item Os nós da rede de sobreposição do sistema CoolStreaming são os sistemas
finais, que executam aplicações de rede. No GMTP, constitui-se uam rede de
sobreposição entre os roteadores da rede e não entre os sistemas finais. Dessa
forma, a rede se torna estável com relação a dinâmica de entradas e saídas das
redes, sendo possível continuar utilizando os recursos de um roteador (em
geral, o da borda de uma rede), mesmo quando seus nós clientes desistem de
continuar obtendo a mídia de interesse, por exemplo, se o usuário fechar o
aplicativo. Sendo assim, os nós roteadores podem continuar transmitindo o fluxo
de vídeo para outros nós, pelo menos momentaneamente, enquanto seus parceiros
realizam outras parcerias.

  \item Um nó recém integrado à rede DONet, pode levar muito tempo (em alguns
casos 20 segundos) para obter os primeiros blocos de vídeo e assim iniciar a
reprodução do conteúdo ao usuário final. Isto porque, ao se juntar à rede, um
nó solicita o mapa de \textit{buffer} a um conjunto de nós parceiros informados
por um servidor de \textit{boostrap}. Porém, o desafio é definir a partir de
qual ponto do \textit{buffer} um nó deve começar a solicitar os blocos de
vídeo. Por exemplo, se o novo nó requisitar um bloco de vídeo muito
antigo, este podem não mais estar disponíveis, um vez que após sua reprodução,
tais blocos são removidos. Por outro lado, se o nó requisitar um bloco de vídeo
muito recente, pode ser que nenhum de seus nós parceiros tenha disponível. No
GMTP, situações como essas não ocorrem porque se utiliza, por padrão o método
\textit{push} e o conteúdo poderá já está disponível no próprio roteador de
borda do nó solicitante. Outras decisão nesse sentido foram tomadas no GMTP, as
quais serão elucidadas no Capítulo~\ref{cap:mudccp}.

  \item A seleção de nós sistema CoolStreaming ocorre com base na escolha
aleatória de um sub-conjunto de nós disponíveis em uma lista de parceiros. Após
realizar parcerias com um sub-conjunto de nós, um nó começa a receber os blocos
de vídeo, ao mesmo tempo que monitora o status de recepção dos sub-fluxos,
transmitidos por diferentes nós parceiros. Quando um nó percebe que a taxa de
recepção não está satisfatória, inicia-se um processo para selecionar novos nós
parceiros. A grande questão é definir quando, de fato, a taxa de recepção não
está sendo suficiente. No CoolStreaming isso é feito monitorando o
\textit{buffer} de recepção dado um sub-fluxo $j$ transmitido por um nó $C_{1}$
ao nó $C_{2}$ observando as inequações~\ref{eq:coolstreaming-substream-monitor1}
e~\ref{eq:coolstreaming-substream-monitor2}, onde:

\begin{itemize}

  \item {$T_{s}$, $T_{p}$} são duas métricas para especificar a capacidade de
upload de um nó $C_1$. $T_{s}$ e $T_{p}$ são números de sequência de blocos para
um sub-fluxos qualquer $j$ no nó $C_2$;

  \item $T_{s}$, é o limite do máximo número de sequência permitido entre os
últimos blocos de vídeo recebidos qualquer dois sub-fluxos no nó $C_2$;

  \item $T_{p}$, é o limite do máximo número de sequência dos últimos blocos de
vídeo recebidos entre os nós parceiros de $C_2$ e os nós pais de $C_2$. A
diferença entre os nós perceiros de um nó $C$ e os nós pais de um nó $C$ é
a seguinte: as parcerias são estabelecidas entre dois nós que trocaram mapas
de \textit{buffer} com informações de disponibilidade de blocos de vídeo, ao
passo que a relação pai e filho é estabelecida quando um nó (filho) está, de
fato, recebendo o conteúdo de vídeo de um outro nó (pai);

  \item $H_{S_{i,C_2}}$, é o número de sequência do último bloco de vídeo de um
sub-fluxo $S_{i}$ no nó $C_2$;

  \item $K$, é o número de sub-fluxos gerados pelo nó transmissor que origina o
conteúdo de vídeo.

\end{itemize}

  \begin{equation}
    max\{|H_{S_{i,C_{2}}} - H_{S_{j,C_{1}}}| : i \le K\} < T_{s}
  \label{eq:coolstreaming-substream-monitor1}
  \end{equation}

  \begin{equation}
    max\{H_{S_{i,q}} : i \le K,q \in partners\} - H_{S_{j,C_{1}}} < T_{s}
  \label{eq:coolstreaming-substream-monitor2}
  \end{equation}

  A inequação~\ref{eq:coolstreaming-substream-monitor1} é utilizada para
monitorar o \textit{status} do \textit{buffer} do nó $C_{2}$. Se a
inequação~\ref{eq:coolstreaming-substream-monitor1} for falsa, significa que
pelo menos um sub-fluxo está atrasado com relação ao limite estabelecido
$T_{s}$. Isto indica que o nó $C_{2}$ deve selecionar outro nó para receber o
fluxo de dados, pois o seu nó pai atual não tem capacidade de upload suficiente.
A inequação~\ref{eq:coolstreaming-substream-monitor2} é utilizada para monitorar
o status do buffer dos nós pais do nó $C_{2}$. Seja o conjunto $parents$,
definido pelos nós pais do nó $C_{2}$ e o conjunto $partners$, definido
pelos nós parceiros de $C_{2}$. O nó $C_2$ compara o status do \textit{buffer}
dos nós em $parents$ com relação aos status do \textit{buffer} dos nós em
$partners$. Se a inequação~\ref{eq:coolstreaming-substream-monitor2} for falsa
para algum caso, implica que o nó pai $C_1$ está atrasado com relação ao número
de blocos de vídeos comparado com pelo menos um dos nós em $partners$. Isto
fará com que o nó $C_{2}$ finalize a comunicação com o nó $C_1$ atrasado e
selecione um novo nó $C_1$ do cojunto $partners$.

  Essa estratégia de seleção de nós aplicado no CoolStreaming é muito complexa
porque exige o monitoramente constante dos buffers dos sub-fluxos, o que
implica em exaustivas trocas de mapa de \textit{buffer}, dependendo da
quantidade de nós no conjunto $parents$ e $partners$ para um dado nó $C_2$. A
consequência disso é um aumento significativo na qualidade de dados de controle
trocados entre os nós parceiros e nós pais, além da troca de dados
correspondentes ao vídeo. No GMTP, as parcerias são formadas de uma forma
bastante diferente, que basicamente consiste em envolver um algoritmo de
controle de congestionamento assistido pela rede que compartilha a sua
capacidade de transmissão em um determinado instante \textit{t}. Dessa forma,
tanto um nó receptor quanto o nó transmissor conhecem a capacidade máxima de
transmissão no canal que separa ambos. Sendo assim, o nó transmissor ajusta sua
taxa de transmissão em direção ao nó receptor de acordo com a taxa de
transmissão disponível em qualquer pacote de dados. No caso do GMTP, os nós são
os roteadores de rede, que simplesmente repassam para os clientes os fluxos de
dados que contém partes da mídia, correspondentes aos blocos de vídeo do
CoolStreaming.

\end{enumerate}

\subsection{CoolStreaming/Denacast}
\label{subsec:denacast}

O Denacast é um sistema para distribuição de mídias ao vivo baseado em um
arquitetura híbrida P2P/CDN~\cite{5764567}. A porção P2P do sistema é adaptada
do sistema CoolStreaming de modo que suporte a porção CDN. Segundo seus autores,
o escalonador de distribuição de mídias do Denacast é idêntico ao do CoolStreaming,
que é considerado o \aspas{coração} do sistema.
% Sendo assim, a seguir, discute-se apenas as diferenças entre ambos, com foco em
% aspectos relacionados às interações entre a rede P2P e a rede CDN.

\begin{figure}
  \centering
  \subfigure[Cenário de uma rede P2P/CDN de malhas desconectadas.] {
    \label{fig:denacast1}
    \includegraphics[natwidth=683,natheight=571,scale=0.36]{imgs/trabrel/denacast-unconnected-mesh.png}
  }
  \qquad
  \subfigure[Cenário de uma rede P2P/CDN de malhas conectadas.] {
    \label{fig:denacast2}
    \includegraphics[natwidth=683,natheight=571,scale=0.275]{imgs/trabrel/denacast-connected-mesh.png}
  }%
  \caption{Arquiteturas CDN/P2P utilizadas no Denacast. Figuras extraídas de~\cite{5764567}.}
  \label{fig:denacast}
\end{figure}


Como ilustra-se na Figura~\ref{fig:denacast}, no Denacast, adota-se duas
arquiteturas CDN/P2P, que tem em comum nós servidores como nós folhas de uma
rede CDN \textit{multicast}, os quais funcionam como nós fontes da mídia
transmitida para a rede P2P.

\begin{itemize}

  \item P2P/CDN de malhas desconectadas (Figura~\ref{fig:denacast1}):
constitui-se diferentes redes de malhas independentes coordenadas por um
servidor da rede CDN. Nessa arquitetura, cada servidor da CDN funciona como um
nó \textit{tracker} da sua respectiva rede malha;

  \item P2P/CDN de malhas conectadas (Figura~\ref{fig:denacast2}): constitui-se
uma única rede de malhas formada por todos os nós servidores da CDN e todos os
nós da rede P2P. Além dos vários servidores da CDN, utiliza-se também um nó que
desempenha o papel de \textit{tracker}. A responsabilidade do \textit{tracker}
é construir as redes de malhas e conectá-las à rede CDN.

\end{itemize}

Para a construção da rede de malha, o nó \textit{tracker} mantém uma lista dos
nós da rede P2P que estao ativos. Um nó fonte da mídia se anuncia ao nó
\textit{tracker}. Cada nó da rede P2P requisita uma lista de possíveis nós
parceiros ao nó \textit{tracker} e informando o número de parcerias que deseja
efetivar. A nó fonte codifica as partes da mídia à medida que se captura o
evento ao vivo e as coloca em um \textit{buffer} de transmissão. No mesmo
instante, gera-se o mapa do \textit{buffer} que é anunciado para os nós
parceiros do nó fonte. Os nós parceiros do nó fonte solicita as partes da mídia
de acordo com o mapa de \textit{buffer} e em seguida a transmissão entre
eles ocorre de forma similar ao CoolStreaming. Quando um novo nó receptor
deseja se conectar à rede, este se conecta ao nó \textit{tracker}, que
seleciona a rede de malha com menos nós clientes e retorna a lista de
candidatos a nós parceiros.

O diferencial do Denacast comparado ao CoolStreaming é seu mecanismo de
conectar duas ou mais redes de malhas. A regra geral considerada pelo nó
\textit{tracker} é a seguinte: duas redes de malha se unirão através de dois
nós receptores conectados em cada uma das redes de malha a ser unidas. Isto
ocorre quanto a quantidade de nós ativos nas duas redes ultrapassa o valor do
número de nós servidores da CDN disponíveis no sistema vezes o número limite de
nós em cada rede de malha antes do início da transmissão. Quando uma rede de
malha A é unida a uma rede de malha B, o nó \textit{tracker} passa a sugerir
nós da rede A para a rede B e vice-versa.

\subsubsection{Comparação entre o Denacast e o GMTP para distribuição de mídias ao vivo}:

No ponto de vista da rede P2P, as considerações sobre o sistema Denacast são
similares ao caso do CoolStreaming. Com relação a arquitetura geral, o Denacast
tem uma melhor organização da rede de sobreposição devido ao uso de servidores
de uma rede CDN. Isto permite um melhor agrupamento dos nós em uma determinada
região lógica da rede (delimitada pela localização do nó servidor da CDN). Nesse
sentido, o Denacast escala melhor o número de nós e melhora as métricas de
qualidade de serviço relacionadas à transmissão de uma mídia ao vivo se
comparado ao CoolStreaming.

O Denacast é o sistema que mais se aproxima ao GMTP, devido a sua estratégia de
unir diferentes redes de malha quando a quantidade de nós em uma determinada
rede extrapola um determinado limite. Porém, como já foi discutido na
Seção~\ref{subsec:coolstreaming}, em discussão sobre o CoolStreaming e que se
estende ao Denacast, o GMTP oferece funções diferenciadas e detalhadas no
Capítulo~\ref{cap:mudccp}, ao passo que ambos os protocolos foram confrontados
em simulações de rede e os resultados são apresentados no
Capítulo~\ref{cap:analisedesemp}.

\subsection{Outras propostas}

A área de distribuição de mídias ao vivo tem sido explorada há pelo menos 15
anos. Existe uma vasta quantidade de propostas que permeiam diferentes
abordagens, das mais simples, como as baseadas em arquiteturas cliente
servidor, às mais complexas, como as baseadas em P2P e/ou P2P/CDN. Diante desse
cenário, realizou-se uma exaustiva pesquisa sobre os trabalhos relacionados à
proposta apresentada nessa tese de doutorado, destacando-se os principais, tal
como foram apresentadas ao longo dessa seção. Apesar desse filtro, pode-se
afirmar que as soluções propostas nessa área de pesquisa são apresentadas
considerando os aspectos discutidos no Capítulo~\ref{cap:fundamentacao}. Em
geral, decide-se sobre se a estrutura da rede de sobreposição será em árvore
e/ou em malha; sobre se os nós realizam periodicamente requisições das partes
da mídia (\textit{pull-based}) e/ou se os nós transmissores enviarão as partes
da mídia para o nó receptor após este último sinalizar interesse por tal
conteúdo (\textit{push-based}); e, sobre a arquitetura do serviço, se será P2P
e/ou P2P/CDN (modelos tradicionais como cliente/servidor não tem sido mais
consideradas).

Durante o levantamento bibliográfico realizado no contexto deste trabalho,
catalogou-se uma série de outras propostas que não foram aqui detalhadas, mas
que, ao menos, devem ser mencionadas, para se ter uma noção da pulverização de
soluções para este fim. São elas (em ordem alfabética):
AnySee~\cite{huang_anysee2:_2007},
BEAM/Alliances~\cite{4378429},
BitTorrentLIVE~\cite{4797218},
DLNA-P2P~\cite{5456206},
GridMedia~\cite{zhao_gridmedia+:_2009,li_towards_2008,4395127},
IV5S~\cite{5373760},
Joost~\cite{Alhaisoni2009,4575245},
LayeredCast~\cite{5734106},
LiveSky~\cite{Yin:2010:LEC:1823746.1823750},
Octoshape~\cite{4498187},
OverCast~\cite{Jannotti:2000:ORM:1251229.1251243},
Pastry/SplitStream~\cite{castro_splitstream:_2003},
PeerCast~\cite{5935134},
PPLive~\cite{hei_insights_2006},
PRIME~\cite{4803721},
PROMISE~\cite{Hefeeda:2003:PPM:957013.957022},
PULSE~\cite{4146695},
SAMP~\cite{6689688},
SmoothCache~\cite{Roverso2012},
Sopcast~\cite{fallica_quality_2008},
TURINstream~\cite{5580077} e
ZIGZAG~\cite{tran_zigzag:_2003}. Além dessas, diversas outras propostas foram
investigadas, mas não foram consideradas nessa lista porque se tratam de
produtos de software proprietários, não sendo possível referenciá-las
formalmente.

% ******* Adicionar mais esses aplicativos a seguir nas referência acima. Pegar
% só os que tem artigos publicados ********

% \section{Protocolos de Aplicação}
%
% http://en.wikipedia.org/wiki/Tribler
% http://en.wikipedia.org/wiki/TVUnetworks
% http://www.livestation.com/
% http://en.wikipedia.org/wiki/Comparison_of_streaming_media_systems
% http://media.cs.tsinghua.edu.cn/~zhangm/
% http://www.scvi.net/stream/soft.htm
% http://www.scvi.net/stream/soft2.htm
%feng_gefei_design_2009
%yongxiang_liu_tcp-cm:_2002
%noda_survey_2002
%ju-won_park_tcp-rome:_2008
%lin_ma_congestion_2007
%lucas_fair_2009


% \section{Protocolos de Transporte de Distribuição de Mídias ao Vivo}
% \label{sec:proto-trans-ea}
%
% Apesar da existência de protocolos padronizados para a transmissão de dados na Internet,
% diversos grupos de pesquisa têm investido no desenvolvimento de novos protocolos ou na
% extensão dos existentes para o transporte de dados multimídia pela Internet. A seguir,
% apresentam-se os trabalhos representativos ao estado da arte neste sentido.


\section{Redes Centradas na Informação}
\label{sec:trab-redes-centradas-informacao}

Desde da criação da Internet, diversos módulos complementares foram disponibilizados para atender às necessidades dos usuários, como o NAT, DNS com  suporte a balanceamento de carga, etc. Entretanto, essas soluções criaram seus próprios problemas~\cite{moore2002}, que foram resolvidos por outras proposta~\cite{RFC3489} ou utilizadas de forma errada~\cite{Vixie:2009:DNS:1610252.1610269}. Em geral, essas mudanças têm levado a situações complexas de gerenciamento de rede, ao passo que tem sido disponibilizados avanços incipientes e lentos com foco no núcleo da rede. No entanto, como ilustra-se na Figura~\ref{fig:icn-abstracao}, uma nova vertente de pesquisa propõe a próxima arquitetura de serviço para a Internet considerando o princípio de que os nós da rede devem trocar dados com base no nome do conteúdo de interesse e não com base em caminhos (rede de telefonia) tampouco em sua localização (rede IP). Essa abordagem é conhecida por Redes Centradas na Informação (\textit{Information Centric Networks} -- ICN).

\begin{figure}
  \centering
  \subfigure[Telefonia: nomeia o caminho.] {
    \label{fig:icn-telefonia}
    \includegraphics[natwidth=664,natheight=312,scale=0.55]{imgs/trabrel/icn-telefonia.png}
  }
  \qquad
  \subfigure[IP: nomeia os sistemas finais.] {
    \label{fig:icn-ip}
    \includegraphics[natwidth=998,natheight=374,scale=0.4]{imgs/trabrel/icn-ip.png}
  }
  \qquad
  \subfigure[ICN: nomeia o conteúdo.] {
    \label{fig:icn-ndn}
    \includegraphics[natwidth=1008,natheight=380,scale=0.4]{imgs/trabrel/icn-ndn.png}
  }
  \caption{Evolução das abstrações das redes de comunicação. Figuras de Van Jacobson.}
  \label{fig:icn-abstracao}
\end{figure}

Nas ICNs, objetiva-se facilitar a distribuição de conteúdo definindo rotas,
funções de transporte e decisões de repasse com base no nome do conteúdo. Isto significa que um roteador pode fazer \textit{cache} de um conteúdo bastante acessado e retorná-lo quando houver  interesse por mais de um nó da rede. Atualmente (2014), todas as propostas para uma nova arquitetura para a Internet estão em estágio inicial de desenvolvimento, de modo que seus modelos de serviço e interfaces de transporte estão longes de uma versão final. Por isso, os benefícios de utilizar tais arquiteturas para a distribuição de vídeo ao vivo são questionáveis, sem qualquer pesquisa que apresente resultados contundentes sobre seu uso em larga escala na Internet, principalmente no contexto de transmissão de mídias ao vivo~\cite{6691438}. Por exemplo, é impossível para um nó receptor adaptar o fluxo de dados de acordo com as características de uma rota de rede, pois as partes de um vídeo podem ser servidas por diferentes nós de \textit{cache}. De fato, suportar a distribuição eficiente de mídias ao vivo usando ICN ainda necessita de várias melhorias no projeto arquitetural, por exemplo, desenvolver protocolos de transporte estendendo as interfaces atuais e considerando o paradigma atual de transmissão fim-a-fim.

Dentre as propostas de uma nova arquitetura para a Internet com base no princípio das ICNs, destaca-se a \textit{Named-Data Networks (NDN)}~\cite{6419703,Jacobson:2012:NNC:2063176.2063204,6386696} ou Redes de Dados Nomeados,
%  e a \textit{Publish-Subscribe Internetworking
% (PSI)}~\cite{6231279} ou Redes de Publicação e Subscrição.
ao passo que outras propostas ainda estão em estágio embrionário~\cite{6384450,6231279,6563278,6231276,5936152}. Como a NDN apresenta diferenças substanciais em seu modelo de serviço para prover o conteúdo de interesse e funções disponíveis no núcleo da rede, a seguir, detalhe-se seu funcionamento e suas atuais aplicações no contexto de distribuição de mídias ao vivo.

\subsection{Redes de Dados Nomeados (NDN)}

A arquitetura NDN, originalmente conhecida por \textit{Content-Centric Network (CCN)}, nomeia os pacotes de conteúdos e provê um modelo de serviço orientado a pedido e resposta, onde os nós obtêm os pacotes de dados a partir da rede, não necessariamente a partir dos nós finais. Como ilustra-se na Figura~\ref{fig:ccn-fib-pit}, os nós requisitam os pacotes de dados enviando uma requisição com o nome do conteúdo de interesse, que é único na rede. A definição dos nomes dos conteúdos seguem uma estrutura similar às URIs: os nomes são definidos em hierarquias, com componentes de tamanhos variados, por exemplo, \textit{/a/b/c.mp4}. Um nó cliente transmite tal requisição para obter um determinado conteúdo ao transmitir um pacote especial chamado de Pacotes de Interesse (\textit{Interest Packets}). Em resposta ao pacote de interesse do cliente, algum nó da rede, em geral um roteador, transmite ao nó requisitante os pacotes de dados com o conteúdo requisitado (se o conteúdo estiver em \textit{cache}). Toda interação ocorre sem o uso de endereçamento de origem/destino e, para cada envio de pacote de interesse, o nó requisitante recebe um pacote de dados, caracterizando uma relação estrita um-para-um entre os pacotes de interesse e os pacotes de dados.

\begin{figure}
\begin{center}
\includegraphics[scale=0.25]{imgs/trabrel/ccn-fib-pit.png}
\end{center}
\vspace{-1cm}
\caption[Um exemplo de interação da \textit{Named-Data Network
(NDN)}.]{Um exemplo de interação da \textit{Named-Data Network
(NDN)}. $U_1$ envia um pacote de interesse por /a/b/c.mp4, que está localizado
em $S$. Com as setas, ilustra-se a direção de propagação do pacote de
interesse. O pacote de dados segue o caminho inverso. Observa-se também as
tabelas FIB e PIT para o roteador $R_3$. Figura extraída de~\cite{6691438}.}
\label{fig:ccn-fib-pit}
\end{figure}

Os roteadores propagam os pacotes de interesse e retornam os pacotes de dados
utilizando o caminho inverso através do qual o pacote de interesse foi roteado.
Isto acontece com o auxílio de três estruturas da dados, definidas por:

\begin{enumerate}

  \item \textit{Cache Store (CS):} é um \textit{cache} contendo os pacotes de
dados que já foram repassados pelo respectivo roteador. Ao receber um pacote de
interesse, o roteador verifica em seu \textit{cache} a existência do pacote de
dados correspondente. Se o pacote de dados estiver em \textit{cache},
transmite-se imediatamente uma resposta de volta, através da interface que
acabara de receber o pacote de interesse.

  \item \textit{Forwarding Information Base (FIB):} é uma tabela de repasse
baseada no nome do contéudo. Ao receber um pacote de interesse, o roteador
realiza uma verificação de correspondência mais longa (\textit{Longest Prefix
Match}) na FIB e então encaminha o pacote de interesse em direção ao nó fonte.

  \item \textit{Pending Interest Table (PIT):} o roteador adiciona um
pacote de interesse na tabela PIT antes de roteá-lo. Após roteá-lo, o roteador
monitora suas interfaces de entrada verificando a recepção de pacote de
dados correspondente ao pacote de interesse roteado anteriormente. Ao receber
um pacote de dados, o roteador remove a entrada correspondente ao pacote de
interesse e repassa o pacote de dados na direção inversa. Se o roteador receber
múltiplas requisições em diferentes interfaces, duplica-se o pacote de dados e
o transmite através das interfaces correspondentes.

\end{enumerate}

% O NDN também suporte \textit{anycast}, quando o mesmo dado está disponível em
% múltiplos \textit{caches}, e \textit{multihoming}, quando é possível acessar o
% nó fonte a partir de múltiplos caminhos. No NDN, implementa-se essas duas
% funções apontando as entradas na FIB para múltiplas interfaces de saída. Apesar
% de relatar o suporte às funcionalidades mencionadas anteriormente, a execução
% de tais funções ainda não estão bem definidas no contexto da
% NDN~\cite{Chai:2012:CLM:2342042.2342046}.

A estratégia de transmissão baseada em pacotes de interesse essencialmente constitui um modelo de comunicação do tipo pedido/resposta. O transporte de dados é orientado ao nó receptor e os nós fontes não mantém qualquer estado de conexão, simplesmente respondem pacotes de dados à medida que recebem pacotes de interesse. As principais funções de transporte são implementadas pelos nós receptores. Por exemplo, para controle de perda/erro de pacotes, o nó receptor retransmite um pacote de interesse correspondente aos pacotes de dados perdidos. As funções de controle de fluxo e controle de congestionamento são também executadas pelo nó receptor, controlando a taxa em que os pacotes de interesse são transmitidos utilizando um modelo baseado em janela deslizante, similar ao TCP~\cite{5462976}.

\subsubsection{Aplicações de transmissão de mídias ao vivo em NDN}

O suporte de sistemas de distribuição de mídias ao vivo em NDN tem atraído o interesse da comunidade científica desde suas primeiras versões~\cite{6550523,6607500,Zhu:2011:AAC:2018584.2018601,Tsilopoulos:2011:SDT:2018584.2018588,Jacobson:2009:VVC:1658978.1658980,6666771,6386696}. Em NDN, em vez de um nó servidor transmitir os datagramas diretamente para os sistemas finais receptores (UDP/IP), o servidor anuncia os datagramas na FIB e os nós receptores interessados em obtê-los requisita cada pacote de dados separadamente.

No contexto de transmissão de uma mídia ao vivo, um nó receptor inicialmente envia um pacote de interesse para o evento correspondente (nome do evento) e recebe um pacote de dados contendo metadados sobre o evento. O metadado mais importante é o esquema de nomes que o sistema utilizará para os próximos pacotes de dados correspondente à mídia transmitida, que também inclui o nome do último pacote de dados, permitindo o nó receptor construir os nomes para os próximos pacotes de dados e determinar em qual momento parar de enviar os pacotes de interesse. Após obter tais metadados, o nó interessado em obter o fluxo de dados começa a enviar pacotes de interesse e receber os pacotes de dados correspondentes.

Os sistemas de distribuição de mídias ao vivo em NDN precisam transmitir os dados da mídia à medida que estes são gerados. Dessa forma, um nó receptor não pode transmitir um pacote de interesse para cada pacote de dado a cada instante, pois receberia os pacotes de dados com atraso em pelo menos um RTT, causando interrupções de reprodução da mídia ao usuário final. Por isso, a estratégia de transmitir mídias ao vivo consiste em permitir que o nó receptor envie pacotes de interesse para pacotes de dados que ainda não existem. Por exemplo, considere um fluxo de dados de uma mídia ao vivo com o nome /a/b/c/live. Para esse fluxo, transmite-se pacotes de dados há uma taxa de 100 pacotes por segundo (pps) e já se transmitiu 2000 pacotes de dados. Um nó receptor que desejar receber o referido fluxo de dados, estima o RTT (por exemplo, \ut{100}{ms}) e decide transmitir pacotes de interesse há cada \ut{2}{s}. Isto resulta em $2 \times (\ut{100}{pps} \times \ut{100}{ms}) = 20$ pacotes. Consequentemente, o nó receptor transmitirá $20$ pacotes de interesse começando de /a/b/c/live/2001 até /a/b/c/live/2020 e assim sucessivamente. Quando os pacotes de interesse alcançarem o nó transmissor, aguarda-se até a geração dos pacotes de dados correspondentes e, após tal procedimento, o nó transmissor os envia imediatamente em direção ao nó receptor~\cite{6691438}.

Atualmente, os trabalhos voltados para transmissão de mídias com base em NDN ainda são bastante primitivos. Nenhum trabalho existente na literatura aborda o assunto de distribuição de mídias ao vivo em larga escala, pelo contrário, os cenários considerados são bastante simples, compreendendo no máximo duas dezenas de nós clientes. O primeiro trabalho de transmissão de mídias ao vivo foi apresentado por Van Jacobson em uma aplicação chamada VoCCN~\cite{Jacobson:2009:VVC:1658978.1658980}. De fato, não se discutiu nenhum aspecto relacionado a distribuição de conteúdos multimídia em larga escala, sendo o VoCCN apresentado apenas como uma prova de conceito para demostrar a viabilidade do uso da então conhecida pela cicla CCN em transmissão de mídias ao vivo.

Em~\cite{6607500}, os autores apresentam uma análise de uma solução experimental para transmissão de dados multimídia com adaptação de fluxo utilizando o protocolo HTTP, com suporte a uma versão modificado do DASH, discutido na Seção~\ref{subsec:http-streaming}. Como metodologia do estudo, os autores avaliaram o desempenho e a sobrecarga de controle introduzida pela NDN em comparação do HTTP 1.0 e o 1.1 em rede TCP/IP. Com base nos resultados obtidos, concluiu-se que a NDN gera uma maior sobrecarga de dados de controle se comparado ao uso do protocolo HTTP 1.0 ou 1.1, apenas equiparando-se em alguns cenários ao protocolo HTTP 1.0, mas não ao HTTP 1.1. Em geral, observou-se que o impacto causado pelo aumento do atraso na rede no HTTP 1.1 é menor se comparado ao HTTP 1.0 e a NDN. Por exemplo, em um dos cenários experimentados, em uma rede com atraso de \ut{150}{ms}, o HTTP 1.1 atingiu uma diferença de taxa de transmissão de \ut{735}{kbps} (\ut{39}{\%} maior) se comparado ao uso de DASH em NDN.

No trabalho~\cite{6655116}, os autores propõem uma solução chamada de DASC (\textit{Dynamic Adaptive Streaming over Content centric networking}), assemelhando-se ao anterior anterior pelo fato de utilizar o DASH em redes NDN, onde os nós transmitem pacotes de interesse para um determinado nível de qualidade do vídeo (\textit{bit-rate}) de acordo com diferentes condições da rede. Como principal conclusão, os autores observaram o mesmo fenômeno observado no trabalho anterior, de que o modelo de pedido/resposta adotado pela CCN gera uma grande sobrecarga de controle na rede.

O trabalho~\cite{6666771} também se assemelha ao anterior no que diz respeito ao estudo de NDN combinada com o uso de DASH, com a diferença que se propõe o uso de uma rede P2P constituída entre nós móveis conectados em duas redes, uma celular (por exemplo, 3G) e a outra de proximidade (por exemplo, Wi-Fi Direct). Nesse contexto, os nós cooperaram entre si e sincronizam quais partes da mídia cada um irá obter via a rede celular, ao passo que os nós compartilham suas respectivas partes obtidas através da rede Wi-Fi e em modo multicast, considerando a função de roteamento baseado em nome empregada pela NDN.

Já em~\cite{6386696}, os autores adotaram uma abordagem similar aos três primeiros trabalhos anteriores, porém, em vez de utilizar DASH, utilizou-se HLS, discutido também na Seção~\ref{subsec:http-streaming}.

Diferentemente dos quatro trabalhos anteriores, em~\cite{6550523}, os autores propuseram o CCN-TV,  que de fato é o único sistema efetivo de mídias ao vivo com base em uma rede CCN que se tem conhecimento atualmente. Apesar de ainda incipiente, o CCN-TV foi o primeiro a sugerir o conceito de canal de transmissão, onde em cada canal se transmite um fluxo de dados de mídia ao vivo. Porém, por usar CCN, as parte da mídia continuam sendo requisitadas individualmente através do uso do pacote de interesse, como nos trabalhos anteriores. O CCN-TV identifica as partes de uma mídia por números progressivos e sua arquitetura é definida em três módulos principais: a fase inicial (boostrap), estratégia para controle de congestionamento e o gerenciamento de retransmissão de pacotes de interesse. O módulo de fase inicial consiste em iniciar as sessões de mídia (canais) e envolve operações para encontrar uma rota para o provedor de canal mais próximo ao nó interessado em acessá-lo, além de localizar o primeiro identificador válido para uma mídia (por exemplo, o quadro I ao utilizar um codec MPEG) e assim poder iniciar a reprodução do conteúdo. Já o módulo de controle de congestionamento é baseado em uma abordagem de janela deslizante. Cada nó mantém uma uma janela deslizante de tamanho W para armazenar W partes pendentes da mídia. Um algoritmo monitora a janela removendo todas as partes da mídia que já não são mais úteis, ou seja, que já foram reproduzidas; retransmite os pacotes de interesse correspondentes a todas as partes da mídia que ainda não chegaram após um dado tempo de expiração; e transmite um novo pacote de interesse para novas partes da mídia à medida que novos espaços se tornam disponíveis na janela. Por fim, o módulo de gerenciamento de pacotes de interesse permite a retransmissão de um pacote de interesse diretamente ao nó transmissor do pacote de dados, evitando que roteadores entre o nó interessado em obter o pacote de dados bloqueie o repasse do pacote de interesse por já está registrado em sua PIT.

Após a definição da arquitetura, os autores avaliaram o CCN-TV com vistas ao desempenho do sistema levando em consideração a quantidade de largura de banda necessária para executar o serviço de transmissão de um fluxo de dados ao vivo; o tempo de expiração utilizado no mecanismo de controle de congestionamento; o atraso de inicio de reprodução e quão efetivo é a política de \textit{cache} adotada no CCN para disseminação das partes de uma mídia. Como resultado, concluiu-se que os recursos de \textit{cache} empregado pela CCN pouco contribui para uma melhor disseminação das partes de uma mídias ao vivo, pois estas são transientes. Entretanto, os autores observaram que a política de gerenciamento da PIT modificada, alinhada ao modelo de controle de congestionamento baseado em janela deslizante, pode reduzir a sobrecarga de controle gerada por excessivas transmissões de pacotes de interesse.

% Zhu:2011:AAC:2018584.2018601
% ACT: Audio Conference Tool over Named Data Networking
%
% http://www.researchgate.net/publication/253239944_Dynamic_Adaptive_Streaming_over_CCN_A_Caching_and_Overhead_Analysis

Como se pode observar, pode-se afirmar que os atuais trabalhos no contexto de NDN e distribuição de mídias ao vivo em larga escala ainda não existentes, sendo a maioria focados em aplicar o protocolo DASH ou o HLS sobre a infra-estrutura da NDN, que em sua essência utiliza um modelo de serviço de pedido/resposta, ou seja, \textit{pulling}.

\subsubsection{Comparação entre as redes ICN (em especial a NDN) e o GMTP para distribuição de mídias ao vivo:}

Com relação a arquitetura de rede ICN, em especial a NDN, e o GMTP, enumeram-se as seguintes comparações:

\begin{enumerate}

  \item Como discutiu-se no Capítulo~\ref{cap:introducao}, as aplicações de transmissão de mídias ao vivo possuem algumas peculiaridades que precisam ser tratadas nas camadas abaixo da aplicação, sendo praticamente impossível generalizar uma infra-estrutura que sirva para fluxos de dados elásticos e inelásticos com relação ao tempo. Em geral, as redes ICN estão tendendo a considerar sua arquitetura mais genérica possível para permitir diferentes padrões de tráfego, mas isso não é trivial. Por outro lado, no GMTP, decidiu-se partir dos requisitos específicos dos sistemas de distribuição de mídias ao vivo e questionar sobre quais funções que se utilizam nesses sistemas que podem ser generalizadas pela rede. Sendo assim, o GMTP adiciona à rede IP, originalmente proposta para transportar fluxos de dados em sua maioria elásticos, a capacidade de prover funções comuns a todas as aplicações que transmitem fluxos de dados inelásticos.

  \item Como consequência do item anterior, a rede NDN transmite mais pacotes de controle do que o GMTP por ter uma proposta de modelo de serviço mais genérico, baseado em \textit{pulling}. No GMTP, propõe-se um modelo de serviço híbrido \textit{push-pull}. Por ter um modelo de serviço mais específico para sistemas de distribuição de mídias ao vivo, no GMTP o mecanismo de \textit{cache} das partes de uma mídia é mais simples de se implementar, pois utiliza-se uma estrutura de \textit{buffer} circular e as partes da mídia são substituídas à medida que se recebe novas partes da mídia, sem a necessidade do roteador solicitar a todo instante pelos próximos pacotes de dados -- o conceito de pacote de interesse da NDN não existe para o GMTP. Em CCN, um dos grandes desafios é definir quanto tempo um dado devo permanecer em \textit{cache}. Um outro desafio é determinar se o dado em \textit{cache}, principalmente em aplicações elásticas, ainda é válido. Todas essa funções, aumentam a sobrecarga de controle nas redes ICN, em geral.

  \item Para executar as aplicações de rede existentes atualmente na Internet sobre uma rede ICN, serão necessárias alterações mais específicas nos sistemas de transmissão de mídias ao vivo. Em ICN, faz-se necessário que todas as aplicações mudem a lógica de requisição das partes da mídia, sendo necessário também alterar o esquema de identificação do conteúdo de interesse, que passa a ser por nome. Além disso, há uma inversão na forma que uma aplicação obtém os dados quando se utiliza NDN. Em NDN, o nó cliente controla praticamente todos as funções de transporte de dados, como controle de perda/erro, controle de congestionamento e fluxo etc. Entretanto, atualmente, um nó cliente para obter um conteúdo multimídia, estabelece uma conexão informando implicitamente que deseja receber aquele fluxo, pois o endereço IP e porta já define indiretamente qual é o conteúdo. Já no caso do GMTP, praticamente não será necessário alterar a aplicação, apenas mudar o valor do parâmetro do protocolo de transporte atual (em geral, UDP), pelo valor do protocolo GMTP. No GMTP, extrapola-se os limites da constituição de uma rede P2P. Em vez das aplicações realizarem tal atividade, este procedimento é realizado internamente pelo GMTP. Com isso, no GMTP, não se delega à aplicação qualquer atividade específica sobre obtenção do conteúdo de interesse, ao passo que o esquema de requisição continua o mesmo, ou seja, solicitação por endereço IP e porta, com a diferença que o GMTP internamente gera um nome (\textit{hash}) combinando esses dois parâmetros e o utiliza para implementar funções de compartilhamento de um mesmo fluxo de dados ao vivo.

  \item Nas redes ICN, o conceito de comunicação fim-a-fim foi abolido e sequer utiliza-se o mecanismo de endereçamento IP. Isto pode gerar um conflito sobre até quando um pacote de interesse circulará até encontrar um roteador que possua o pacote de dados correspondente. Além disso, as ICN literalmente descarta mais 40 anos de pesquisas voltadas para redes IP. Alterar toda a camada de rede por roteadores habilitados com as novas propostas, ainda embrionárias, levará algumas décadas. No caso do GMTP, mantem-se o mesmo modelo de serviço IP e acrescenta-se melhorias focadas em distribuição de conteúdos multimídia ao vivo. Dessa forma, uma requisição feita por um nó cliente para obter um fluxo de dados ao vivo continua sendo requisitada ao servidor de origem. Se nenhum roteador interceptar o pedido, todo o processo ocorre como em uma conexão fim-a-fim tradicional. No entanto, se um roteador presente na rota entre o nó cliente e o servidor já estiver repassando o pacote de dados por aquele caminho ou para outra interface, este poderá interceptar o pedido e responder como se fosse o nó servidor.

  \item No ICN, o mecanismo que determina a interceptação de um pacote de interesse é limitado a verificação local se o fluxo de dados já está sendo recebido ou não, sem qualquer auxílio de qualquer outro nó. Como discutiu-se, no NDN por exemplo, o nó servidor tem um papel coadjuvante, apenas respondo pacotes de dados quando recebe um pacote de interesse, sem manter estado de conexão. No GMTP, o nó servidor tem um papel importante no processo de distribuição ao auxiliar a rede a decidir qual é a melhor rota para obter um fluxo de dados com base na interceptação de duas ou mais rotas conhecidas. Isso ocorre porque no procedimento de conexão do GMTP, registra-se no pacote de pedido de conexão, os identificadores de cada roteador. Esse identificador é único em toda rede e gerado pela combinação dos endereços MAC de todas as interfaces de rede. Com isso, ao receber um pacote de pedido de conexão, o nó servidor conhece por quais roteadores o pacote passou e então sugere a intersecção de outros caminhos já conhecidos, se possível.

  \item Nas redes ICN, não se tem discutido claramente sobre o uso de soluções mais avançadas de controle de congestionamento, sendo as propostas focadas em algoritmos tradicionais baseado em janelas deslizantes ou similares. Em diversas pesquisas recentes, demonstrou-se que utilizar os roteadores de rede para auxiliarem os sistemas finais no processo de controle de congestionamento, obtêm-se um melhor desempenho da rede, reduzindo-se o atraso e finalizando-se mais rapidamente os fluxos de curta duração, bem como permitindo o compartilhamento mais equânime dos recursos de rede. No GMTP, optou-se por utilizar tal abordagem, ainda estendendo-a ao permitir que o nó servidor sugira aos roteadores quais parcerias devem ser efetivadas, baseando-se na capacidade atual de transmissão dos canais conhecidos (no item anterior). Já nas ICNs, com pôde-se constatar, as pesquisas do estado da arte estão concentradas em fazer com o que o nó servidor disponibilize múltiplos fluxos de dados codificados em diferentes \textit{bit-rates}, ao passo que os nós clientes devem monitorar sua capacidade de recepção e requisitar o fluxo apropriado. Como já discutiu-se, o monitoramento lógico da capacidade de transmissão dos sistemas finais baseado apenas nas perdas de dados e atraso não é uma solução efetiva devido à dinâmica de entrada e saída dos nós da rede.

  \item Em NDN, requisitar cada pacote de dados pode introduzir uma significativa sobrecarga à rede, devido ao uso de largura de banda para transmitir a quantidade de pacotes de interesse igual à quantidade de pacotes de dados, aumentando a ocupação dos \textit{buffers} dos roteadores. Como consequência, a rede NDN pode apresentar problemas de desempenho e escalabilidade, podendo apresentar significativos níveis de congestionamento. Para sistemas de distribuição de mídias ao vivo, isto pode ser ainda mais grave, pois estão sujeitos às condições de rede do canal de \textit{upload} (do nó receptor ao nó transmissor, já que o nó cliente controla os serviços de transporte). Sendo assim, em caso de congestionamento no canal de \textit{upload}, os pacotes de interesse podem sofrer atrasos ou descartes. Consequentemente, a rede não será capaz de transmitir os pacotes de dados correspondentes, em tempo hábil ou podem nunca transmitir, caso se perca o pacote de interesse. Sendo assim, mesmo em cenários onde o canal de \textit{download} esteja livre, os nós receptores podem experimentar uma baixa qualidade de serviço devido às perdas de pacotes de interesse, não necessariamente de pacotes de dados. Esses cenários são típicos em serviços de conexões residenciais à Internet, onde os \textit{enlaces} são geralmente assimétricos em termos de largura de banda, por exemplo, ADSL. Atualmente, existe um estudo sobre introduzir uma função chamada de agregação de pacotes de interesse [21]. Nesse caso, um único pacote de interesse agregaria a requisição de múltiplos pacotes de dados. Entretanto, essa proposta ainda não é oficial e acarreta em outro problema. Por exemplo, a perda de um pacote de interesse agregado resultará na perda de múltiplos pacotes de dados, impactando diretamente na qualidade de serviço de uma aplicação de transmissão de mídia ao vivo. No ponto de vista prático, o usuário experimentará uma rajada de perda de pacotes de dados e a reprodução contínua será comprometida. Além disso, os pacotes de dados em NDN tem MTU de \ut{8800}{bytes} ou de \ut{4096}{bytes}, ao passo que em redes IP utiliza MTU, em geral, de \ut{1500}{bytes}. Isso significa que uma perda de pacote em uma NDN se perde mais dados do que em uma rede IP.

\end{enumerate}

% - Política de atualização de \textit{cache} e interações com o sub-sistema de
% roteamento são tópicos de pesquisa ainda em
% aberto~\cite{Chai:2012:CLM:2342042.2342046}.

% PIT Overload Analysis in Content Centric Networks
% % http://delivery.acm.org/10.1145/2500000/2491225/p67-virgilio.pdf?ip=200.17.114.1
% % 08&id=2491225&acc=PUBLIC&key=C2716FEBFA981EF11A0D4D06D7800D651F777200C2243D46&CF
% % ID=409082029&CFTOKEN=57009383&__acm__=1392112777_0f8cf4928775a601a677364f509d6ab
% % e

% Optimizing Bi-directional Low-Latency
%
% Communication in Named Data Networking
% http://delivery.acm.org/10.1145/2570000/2567564/p13-almishari.pdf?ip=200.17.114.
% 108&id=2567564&acc=ACTIVE%20SERVICE&key=C2716FEBFA981EF11A0D4D06D7800D651F777200
% C2243D46&CFID=409082029&CFTOKEN=57009383&__acm__=1392112708_06ab4a22e241a90ab42e
% dba856c07e27

% Supporting Diverse Traffic Types in Information Centric Networks

% http://delivery.acm.org/10.1145/2020000/2018588/p13-tsilopoulos.pdf?ip=200.17.11
% 4.108&id=2018588&acc=PUBLIC&key=C2716FEBFA981EF11A0D4D06D7800D651F777200C2243D46
% &CFID=409082029&CFTOKEN=57009383&__acm__=1392112697_1c4d4929c4503989dac5849a87ee
% fd86

% A Push-Enabling Scheme for Live Streaming System in Content-Centric Networking

% http://delivery.acm.org/10.1145/2540000/2537162/p49-kim.pdf?ip=200.17.114.108&id
% =2537162&acc=ACTIVE%20SERVICE&key=C2716FEBFA981EF11A0D4D06D7800D651F777200C2243D
% 46&CFID=409082029&CFTOKEN=57009383&__acm__=1392112683_860ced47fa67fabbb5057c9c01
% ff3e5c

% \subsection{Redes de Publicar e Subscrever}
%
%
% \subsubsection{Considerações sobre o trabalho}


% \section{Sumário Comparativo}
% \label{sec:trabrel-sumario-comp}
%
% Nas seções anteriores, presentou-se as considerações sobre cada trabalho com
% comparações entre o respectivo trabalho e o protocolo \mudccp. Na
% Tabela~\ref{tab:comp-protocols} apresenta-se um sumário das comparações
% apresentadas anteriormente. Os critérios de comparação são apresentados a seguir.
%
% \begin{itemize}
%  \item Localizado na Camada de Transporte (CT)
%  \item Suporte ao compartilhamento de conexão (CS)
%  \item Suporte à transmissão em multicast e unicast (TMU)
%  \item Suporte à descoberta de nós de forma distribuída (DND)
%  \item Suporte a controle de congestionamento (CC)
%  \item Suporte à adaptação de fluxo multimídia (AFM)
%  \item Tolerância à desconexão (TD)
%  \item Extensibilidade para novos algoritmos (ENA)
%  \item Compatibilidade com API (\textit{Application Programming Interface}) de
% \textit{socket} BSD/POSIX (CAS)
% \end{itemize}
%
% \renewcommand\multirowsetup{\centering}
% \begin{center}
% \footnotesize
% \begin{longtable}[tp]{|c|c|c|c|c|c|c|c|c|c|}
% \caption[Tabela comparativa dos protocolos para transmissão de mídia em tempo
% real.]{Tabela comparativa dos protocolos para transmissão de mídia em tempo
% real. \textbf{Legenda:} X = Suporta; $\frac{X}{2}$ = Suporta parcialmente,
% apenas para algoritmos de controle de congestionamento; S = Requer intervenção
% da aplicação; Ind. = Indefinido.}
% \label{tab:comp-protocols} \\
%
% \hline\hline
%
% \multirow{1}{*}{\textcolor{black}{\bfseries Protocolos}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries CT}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries CS}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries TMU}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries DND}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries CC}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries AFM}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries TD}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries ENA}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries CAS}}
% \\
%
% \hline \hline
% \endfirsthead
%
% \multicolumn{10}{c}%
% {{\bfseries \tablename\ \thetable{} -- continuação da página anterior}} \\
% \hline\hline
%
% \multirow{1}{*}{\textcolor{black}{\bfseries Protocolos}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries CT}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries CS}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries TMU}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries CC}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries DND}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries AFM}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries TD}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries ENA}} &
% \multirow{1}{*}{\textcolor{black}{\bfseries CAS}}
% \\
%
% \hline \hline
% \endhead
%
% \hline\hline \multicolumn{10}{c}{Continuação na próxima página} \\ \hline \hline
% \endfoot
%
% \hline \hline
% \endlastfoot
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries UDP}} & X &  & S &  &  &  &  &  & X
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries TCP}} & X &  & S &  &  &  &  &
% $\frac{X}{2}$ & X
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries DCCP}} & X &  &  &  &  &  &  &
% $\frac{X}{2}$ & X
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries SCTP}} & X &  &  & X &  &  &  &
% $\frac{X}{2}$ & X
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries PPETP}} &  &  &  & X & Ind. & X & X
% &  & S
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries PPSP/Swift}} &  &  &  & X & X &  & X
% &  & S
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries PDTP}} &  &  &   &  &  &  & X &  & S
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries CPM}} &  &  & X & X &  & X & X &  &
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries HySAC}} &  &  & X & X &  & X & X &  &
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries Danacast}} & X & X & X & X & X & X
% & X
% & X & X
% \\ \cline{1-10}
%
% % INICIO DE LINHA
% \multirow{1}{*}{\textcolor{black}{\bfseries \mudccp}} & X & X & X & X & X & X & X
% & X & X
% \\ \cline{1-10}
%
% \end{longtable}
% \end{center}

\section{Sumário do Capítulo}
\label{sec:trabrel-sumario}

Neste capítulo, apresentou-se uma avaliação crítica acerca de um conjunto de protocolos e sistemas para distribuição de mídias ao vivo, considerando-se apenas os aspectos arquiteturais e de modelo de serviço de cada solução. Discutiu-se sobre as propostas julgadas como concorrentes ao \mudccp, contrapondo-se as limitações de cada solução frente ao GMTP, esclarecendo-as individualmente.

Após o detalhamento do funcionamento do protocolo GMTP no próximo capítulo, no Capítulo~\ref{cap:resultado}, retoma-se outra discussão comparativa, porém sobre o desempenho do GMTP frente aos seus principais concorrentes: o Denacast e o CCN-TV.