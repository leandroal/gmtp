\chapter{Detalhes dos Experimentos}
\label{app:detalhes-experimentos}

Neste apêndice, apresentam-se alguns detalhes relacionados aos experimentos realizados.

% Na Seção~\ref{sec:tabela-atrasos-propagacao-rede}, apresentam-se os larguras de banda e atrasos de propagação definidos na topologia de rede ilustrada na Figura~\ref{fig:rede-geant}. Na Seção~\ref{sec:tabela-compilacao-resultados}, apresentam-se os resultados compilados para cada métrica (variável dependente) estudada nos experimentos.

\section{Largura de Banda e Atraso de Propagação Utilizados na Rede Simulada}
\label{sec:tabela-atrasos-propagacao-rede}

Na Tabela~\ref{tab:largura-atraso}, apresenta-se a largura de banda e o atraso de propagação da rede utilizada no experimento apresentado no Capítulo~\ref{cap:analisedesemp}.

\renewcommand\multirowsetup{\centering}
\begin{center}
\footnotesize
\begin{longtable}[tp]{c|c|c|c|c}
\caption[Largura de banda e atraso de propagação utilizados na rede simulada.]{Largura de banda e atraso de propagação utilizados na rede simulada.} \label{tab:largura-atraso} \\

\hline\hline
%\rowcolor[gray]{0.8}
\multirow{2}{0.5cm}{\textcolor{black}{\bfseries \#}}
&
\multirow{2}{1.8cm}{\textcolor{black}{\bfseries Roteador 1}}
&
\multirow{2}{1.8cm}{\textcolor{black}{\bfseries Roteador 2}}
&
\multirow{2}{3cm}{\textcolor{black}{\bfseries Largura de Banda}}
&
\multirow{2}{3.4cm}{\textcolor{black}{\bfseries Atraso de Propagação}} \\
%\rowcolor[gray]{0.8}
& & & & \\
\hline \hline
\endfirsthead

\multicolumn{5}{c}%
% \multicolumn{7}{c}%
{{\bfseries \tablename\ \thetable{} -- continuação da página anterior}} \\
\hline\hline
%\rowcolor[gray]{0.8}
\multirow{2}{0.5cm}{\textcolor{black}{\bfseries \#}}
&
\multirow{2}{1.8cm}{\textcolor{black}{\bfseries Roteador 1}}
&
\multirow{2}{1.8cm}{\textcolor{black}{\bfseries Roteador 2}}
&
\multirow{2}{3cm}{\textcolor{black}{\bfseries Largura de Banda}}
&
\multirow{2}{3.4cm}{\textcolor{black}{\bfseries Atraso de Propagação}} \\
%\rowcolor[gray]{0.8}
& & & & \\
\hline \hline
\endhead

\hline \hline \multicolumn{5}{c}{Continuação na próxima página} \\ \hline \hline
\endfoot

\hline \hline
\endlastfoot

1 & DE & SE & \ut{32}{Mbps} & \ut{6.34}{ms} \\ \hline
2 & DE & CZ & \ut{32}{Mbps} & \ut{2.10}{ms} \\ \hline
3 & DE & FR & \ut{32}{Mbps} & \ut{11.39}{ms} \\ \hline
4 & DE & IT & \ut{32}{Mbps} & \ut{11.93}{ms} \\ \hline
5 & DE & NL & \ut{27}{Mbps} & \ut{5.23}{ms} \\ \hline
6 & DE & AT & \ut{27}{Mbps} & \ut{4.71}{ms} \\ \hline
7 & DE & GR & \ut{16}{Mbps} & \ut{21.69}{ms} \\ \hline
8 & DE & IE & \ut{10}{Mbps} & \ut{13.69}{ms} \\ \hline
9 & SE & UK & \ut{32}{Mbps} & \ut{14.59}{ms} \\ \hline
10 & SE & EE & \ut{10}{Mbps} & \ut{8.78}{ms} \\ \hline
11 & SE & LV & \ut{3}{Mbps} & \ut{9.71}{ms} \\ \hline
12 & SE & LT & \ut{5}{Mbps} & \ut{10.78}{ms} \\ \hline
13 & SE & PL & \ut{27}{Mbps} & \ut{6.49}{ms} \\ \hline
14 & UK & FR & \ut{32}{Mbps} & \ut{5.51}{ms} \\ \hline
15 & UK & NL & \ut{27}{Mbps} & \ut{1.29}{ms} \\ \hline
16 & UK & IE & \ut{10}{Mbps} & \ut{3.97}{ms} \\ \hline
17 & UK & IL & \ut{5}{Mbps} & \ut{36.09}{ms} \\ \hline
18 & UK & GR & \ut{10}{Mbps} & \ut{31.25}{ms} \\ \hline
19 & FR & CH & \ut{32}{Mbps} & \ut{3.84}{ms} \\ \hline
20 & FR & BE & \ut{27}{Mbps} & \ut{4.56}{ms} \\ \hline
21 & FR & LU & \ut{10}{Mbps} & \ut{3.34}{ms} \\ \hline
22 & CH & AT & \ut{32}{Mbps} & \ut{4.01}{ms} \\ \hline
23 & CH & IT & \ut{32}{Mbps} & \ut{2.14}{ms} \\ \hline
24 & IT & ES & \ut{27}{Mbps} & \ut{7.54}{ms} \\ \hline
25 & NL & BE & \ut{27}{Mbps} & \ut{1.18}{ms} \\ \hline
26 & BE & LU & \ut{10}{Mbps} & \ut{1.16}{ms} \\ \hline
27 & PL & CZ & \ut{27}{Mbps} & \ut{3.64}{ms} \\ \hline
28 & CZ & SK & \ut{27}{Mbps} & \ut{2.21}{ms} \\ \hline
29 & SK & HU & \ut{27}{Mbps} & \ut{2.13}{ms} \\ \hline
30 & AT & HU & \ut{27}{Mbps} & \ut{3.68}{ms} \\ \hline
31 & AT & HR & \ut{3}{Mbps} & \ut{3.88}{ms} \\ \hline
32 & AT & SI & \ut{16}{Mbps} & \ut{1.18}{ms} \\ \hline
33 & HU & SI & \ut{10}{Mbps} & \ut{2.18}{ms} \\ \hline
34 & HU & RO & \ut{3}{Mbps} & \ut{2.18}{ms} \\ \hline
35 & ES & PT & \ut{16}{Mbps} & \ut{2.57}{ms} \\ \hline
36 & CY & GR & \ut{3}{Mbps} & \ut{2.57}{ms} \\ \hline
37 & BG & GR & \ut{3}{Mbps} & \ut{2.57}{ms} \\ \hline

\end{longtable}
\end{center}

\section{Distribuição da quantidade de nós clientes nos primeiros \ut{200}{s} de simulação}
\label{sec:distribution_first_200s}

Para definir o instante de cada requisição do cliente definiu-se o seguinte: gerou-se uma quantidade de números inteiros entre $0-200$ igual à quantidade de nós clientes determinado para um certo tratamento. Por exemplo, no Tratamento $1$, sortearam-se $500$ números inteiros aleatórios entre $0-200$ e somou-se o número de ocorrências de cada número sorteado. Durante a execução dos ensaios, adicionou-se à rede a quantidade de nós correspondente ao número de ocorrências em cada instante da simulação. Por exemplo, se o número $199$ foi sorteado $10$ vezes, no instante $199$ da simulação foram adicionados $10$ nós clientes que imediatamente requisitaram a mídia ao servidor. 

\section{Distribuição da quantidade de nós clientes após os \ut{400}{s} de simulação}
\label{sec:distribution_churn}

Para definir o churn da rede definiu-se a seguinte estratégia: a cada intervalo de \ut{5}{s}, um número \textit{x} $\in$ $[0,1]$ foi gerado. Dependendo do valor de \textit{x}, \ut{10}{\%} dos nós clientes foram mantidos ou removidos com uma probabilidade de $0.8$. Ou seja, os nós foram mantidos conectados à rede com uma probabilidade de \ut{80}{\%} e removidos com uma probabilidade de \ut{20}{\%}.

\section{Quantidade de Ensaios}
\label{sec:ineq-proporcional}

No experimento realizado para comparar o GMTP com o Denacast/CoolStreaming e o CCN-TV, apresentado no Capítulo~\ref{cap:analisedesemp}, fez-se necessário determinar a quantidade de repetição de um tratamento para que fosse possível comparar, com \ut{95}{\%} de certeza, os valores obtidos para as variáveis dependentes nos confrontos estabelecidos. Para isto, cada valor de $n$ que representou uma variável dependente (por exemplo, $n_{ST}$) foi calculado através da Inequação~\ref{eq:n-confianca}, onde $\mu_1$ correspondeu à média obtida para uma variável dependente através da execução do GMTP e, $\mu_2$, a média obtida para a mesma variável dependente através da execução do outro sistema confrontado.

\begin{equation}
\mu_1 \pm 1.96 \sqrt{\frac{0,995\mu_1}{n}} \le \mu_2 \pm 1.96 \sqrt{\frac{0,995\mu_2}{n}}
\label{eq:n-confianca}
\end{equation} 


\section{Compilação dos Resultados}
\label{sec:tabela-compilacao-resultados}

Na Tabela~\ref{tab:resultado-gmtp-denacast}, apresentam-se os resultados do confronto GMTP vs. Denacast/CoolStreaming e na Tabela~\ref{tab:resultado-gmtp-ccntv} os resultados do confronto GMTP vs. CCN-TV.

% % RESULTADO GMTP VS. DENACAST
% \afterpage{%
%   \clearpage%
% %   \thispagestyle{empty}% empty page style (?)
% \begin{landscape}
\renewcommand\multirowsetup{\centering}
\begin{center}
\footnotesize
\begin{longtable}[tp]{c|c|c|c|c}
% \begin{longtable}[tp]{c|c|c|c|c|c|c}
\caption[Sumário dos valores obtidos para as variáveis dependentes em cada tratamento do confronto GMTP vs. Denacast/CoolStreaming.]{Sumário dos valores obtidos para as variáveis dependentes em cada tratamento do confronto GMTP vs. Denacast/CoolStreaming.} \label{tab:resultado-gmtp-denacast} \\

\hline\hline
%\rowcolor[gray]{0.8}
\multirow{2}{1.4cm}{\textcolor{black}{\bfseries Trat. \#}}
&
\multirow{2}{2.4cm}{\textcolor{black}{\bfseries Atraso de inicialização (s)}}
&
\multirow{2}{2.7cm}{\textcolor{black}{\bfseries Índice de continuidade (\%)}}
&
\multirow{2}{1.9cm}{\textcolor{black}{\bfseries Distorção do vídeo (\%)}}
&
% \multirow{2}{2.5cm}{\textcolor{black}{\bfseries Conexões ao servidor}}
% &
% \multirow{2}{2.5cm}{\textcolor{black}{\bfseries Conexões entre clientes}}
% &
\multirow{2}{2.5cm}{\textcolor{black}{\bfseries Pacotes de controle}} \\
%\rowcolor[gray]{0.8}
& & & & \\
% & & & & & & \\
\hline \hline
\endfirsthead

\multicolumn{5}{c}%
% \multicolumn{7}{c}%
{{\bfseries \tablename\ \thetable{} -- continuação da página anterior}} \\
\hline\hline
%\rowcolor[gray]{0.8}
\multirow{2}{1.4cm}{\textcolor{black}{\bfseries Trat. \#}}
&
\multirow{2}{2.4cm}{\textcolor{black}{\bfseries Atraso de inicialização (s)}}
&
\multirow{2}{2.7cm}{\textcolor{black}{\bfseries Índice de continuidade (\%)}}
&
\multirow{2}{1.9cm}{\textcolor{black}{\bfseries Distorção do vídeo (\%)}}
&
% \multirow{2}{2.5cm}{\textcolor{black}{\bfseries Conexões ao servidor}}
% &
% \multirow{2}{2.5cm}{\textcolor{black}{\bfseries Conexões entre clientes}}
% &
\multirow{2}{2.5cm}{\textcolor{black}{\bfseries Pacotes de controle}} \\
%\rowcolor[gray]{0.8}
& & & & \\
% & & & & & & \\
\hline \hline
\endhead

\cline{2-5} \multicolumn{5}{c}{Continuação na próxima página} \\ \hline \hline
% \cline{2-7} \multicolumn{7}{c}{Continuação na próxima página} \\ \hline \hline
\endfoot

\hline \hline
\endlastfoot

\input{analise-desempenho-mudccp-denacast}

\end{longtable}
\end{center}
% \end{landscape}
%   \clearpage% Flush page
% }

% RESULTADO GMTP VS. CCNTV
% \afterpage{%
%   \clearpage%
% %   \thispagestyle{empty}% empty page style (?)
% \begin{landscape}
\renewcommand\multirowsetup{\centering}
\begin{center}
\footnotesize
\begin{longtable}[tp]{c|c|c|c|c}
% \begin{longtable}[tp]{c|c|c|c|c|c|c}
\caption[Sumário dos valores obtidos para as variáveis dependentes em cada tratamento do confronto GMTP vs. CCN-TV.]{Sumário dos valores obtidos para as variáveis dependentes em cada tratamento do confronto GMTP vs. CCN-TV.} \label{tab:resultado-gmtp-ccntv} \\

\hline\hline
%\rowcolor[gray]{0.8}
\multirow{2}{1.4cm}{\textcolor{black}{\bfseries Trat. \#}}
&
\multirow{2}{2.4cm}{\textcolor{black}{\bfseries Atraso de inicialização (s)}}
&
\multirow{2}{2.7cm}{\textcolor{black}{\bfseries Índice de continuidade (\%)}}
&
\multirow{2}{1.9cm}{\textcolor{black}{\bfseries Distorção do vídeo (\%)}}
&
% \multirow{2}{2.5cm}{\textcolor{black}{\bfseries Conexões ao servidor}}
% &
% \multirow{2}{2.5cm}{\textcolor{black}{\bfseries Conexões entre clientes}}
% &
\multirow{2}{2.5cm}{\textcolor{black}{\bfseries Pacotes de controle}} \\
%\rowcolor[gray]{0.8}
& & & & \\
% & & & & & & \\
\hline \hline
\endfirsthead

\multicolumn{5}{c}%
% \multicolumn{7}{c}%
{{\bfseries \tablename\ \thetable{} -- continuação da página anterior}} \\
\hline\hline
%\rowcolor[gray]{0.8}
\multirow{2}{1.4cm}{\textcolor{black}{\bfseries Trat. \#}}
&
\multirow{2}{2.4cm}{\textcolor{black}{\bfseries Atraso de inicialização (s)}}
&
\multirow{2}{2.7cm}{\textcolor{black}{\bfseries Índice de continuidade (\%)}}
&
\multirow{2}{1.9cm}{\textcolor{black}{\bfseries Distorção do vídeo (\%)}}
&
% \multirow{2}{2.5cm}{\textcolor{black}{\bfseries Conexões ao servidor}}
% &
% \multirow{2}{2.5cm}{\textcolor{black}{\bfseries Conexões entre clientes}}
% &
\multirow{2}{2.5cm}{\textcolor{black}{\bfseries Pacotes de controle}} \\
%\rowcolor[gray]{0.8}
& & & & \\
% & & & & & & \\
\hline \hline
\endhead

\cline{2-5} \multicolumn{5}{c}{Continuação na próxima página} \\ \hline \hline
% \cline{2-7} \multicolumn{5}{7}{Continuação na próxima página} \\ \hline \hline
\endfoot

\hline \hline
\endlastfoot

\input{analise-desempenho-mudccp-ccntv}

\end{longtable}
\end{center}
% \end{landscape}
%   \clearpage% Flush page
% }


% \subsection{Considerações sobre Implementação}
% 
% Com o intuito de investigar o desempenho do GMTP, implementou-se no simulador de redes OMNet++~\cite{XU2011} suas principais funcionalidades. A versão  e sua versão atual do protocolo já permite a execução de transmissão de dados. Com o
% desenvolvimento preliminar do protocolo \mudccps no simulador NS-2, permitiu-se
% a execução de diversas simulações a fim de avaliar o comportamento do protocolo
% considerando diversas configurações.
% 
% Em linhas gerais, a implementação no referido simulador de rede permite a
% comunicação entre os nós através dos modos de transmissão multicast e unicast.
% Foram implementados os tipos de pacotes do \mudccps e os processos de
% estabelecimento de conexão, incluindo o processo de uso de nós relays, troca
% de dados em modos multicast e unicast e os algoritmos para controle de
% congestionamento, incluindo o uso de nós reporters.
% 
% Contudo, não foi implementado o arcabouço de extensão para permitir o
% desenvolvimento de novos algoritmos para o processo de conexão, descoberta e
% seleção de nós, adaptação de fluxo de dados e tolerância a falhas. Tal
% implementação será feita no núcleo do sistema operacional Linux, juntamente com
% todos os mecanismos básicos para o funcionamento do \mudccp.
% 
% A proposta é de implementar um arcabouço de extensão para as funções previstas
% no \mudccp, permitindo-se o desenvolvimento e adição de novos algoritmos para
% as funcionalidades supracitadas, de modo que torne o \mudccps flexível para
% permitir que qualquer aplicação os utilizem.
% 
% Na prática, um cenário desejado para essa proposta de implementação do \mudccps
% é que o desenvolvedor possa configurar quais algoritmos deseja utilizar em sua
% aplicação, permitindo-se que estes sejam alterados em modo de execução da
% da mesma. Neste caso, suponha um algoritmo de descoberta de nós chamado
% \textit{DN-1}, um algoritmo para controle de congestionamento chamado
% \textit{CC-2}, um algoritmo de tolerância a desconexão \textit{TD-3}; um
% algoritmo de adaptação de fluxo \textit{AF-4} e um algoritmo para reciprocidade
% % \textit{R-2}. As implementações de tais algoritmos serão feitas na camada de
% transporte, acoplando-as em forma de módulos do sistema operacional ao protocolo
% \mudccp. Em seguida, as aplicações podem selecionar quais algoritmos melhor se
% adequa as suas necessidades, com o \mudccps sendo responsável por:
% 
% \begin{enumerate}
% 
%   \item carregar o conjunto de algoritmos \textit{A = \{DN-1, CC-2, TD-3, AF-4,
% R-2\}};
% 
%   \item definir os parâmetros iniciais para cada um dos algoritmos em A,
% definidos pela aplicação;
% 
%   \item executar funções preliminares para ajustes iniciais, tais como informar
% aos nós participantes de uma transmissão quais dos algoritmos estão sendo
% utilizados (o conjunto \textit{A}) e quais outros estão disponíveis;
% 
%   \item executar os algoritmos em momentos apropriados de acordo com os eventos
% de rede, notificando a aplicação caso necessário e desejável pela aplicação;
% 
%   \item descarregar os algoritmos quando não forem mais necessários e informar
% aos nós parceiros.
% 
% \end{enumerate}
% 
% Desta forma, um nó servidor poderá solicitar que seus nós clientes carreguem um
% determinado módulo, dependendo da sua disponibilidade nos nós clientes. Neste
% caso, o \mudccps controlará todo o processo de carregamento dos mesmos.
% 
% Com isso, o \mudccps se tornará um protocolo extensível que gerencia quais
% algoritmos devem ser executados em cada ponto de extensão. Esses algoritmos
% podem ser adicionados ao protocolo através de módulos do sistema operacional,
% carregáveis utilizando-se comandos como o \textit{modprobe} (no Linux, por
% exemplo) e manipulados (passagem de parâmetros) pela aplicação através de uma
% API de programação, por exemplo, utilizando-se as primitivas
% \textit{setsockopt()} e \textit{getsockopt()} da especificação \textit{BSD
% Socket API}~\cite{1197551}.
% 
% Para que as aplicações possam utilizar o \mudccp, o protocolo deve ser
% compatível com todas as funções prevista na especificação \textit{BSD Socket
% API}, são elas: \textit{socket()}, \textit{bind()}, \textit{listen()},
% \textit{connect()}, \textit{accept()}, \textit{send()}, \textit{recv()},
% \textit{write()}, \textit{read()}, \textit{sendto()}, \textit{recvfrom()},
% \textit{close()}, \textit{select()}, \textit{setsockopt()},
% \textit{getsockopt()} e \textit{pull()}.
% 
% Outros trabalhos podem ser desenvolvidos para tornar o \mudccps compatível com o
% padrão de \textit{sockets} do sistema operacional Windows, conhecido pelo nome
% de \textit{winsock}. Todavia, por ser um sistema operacional de código fechado,
% a implementação do \mudccps só será possível após sua padronização em forma de
% RFC.
