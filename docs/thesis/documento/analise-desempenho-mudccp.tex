\chapter{Análise de Desempenho e do Projeto \mudccp}
\label{cap:analisedesemp}

% Neste capítulo, apresentam-se as análises do projeto e do desempenho do GMTP para distribuição de mídias ao vivo. Na Seção~\ref{sec:analisedeproj} (análise do projeto), generaliza-se a discussão acerca dos serviços disponibilizados no GMTP em comparação àqueles implementados nos principais sistemas. Na Seção~\ref{sec:analisedesemp} (análise de desempenho), estabelecem-se confrontos entre uma implementação de referência do GMTP, o Denacast/CoolStreaming e o CCN/TV, em um ambiente de simulação que proporcionou a obtenção de valores para as métricas avaliadas em um cenário que simula parte da Internet. Por fim, na Seção~\ref{sec:resdisc-sumario}, apresenta-se o sumário deste capítulo.
% 
% Com essa estratégia, possibilita-se aprofundar o entendimento sobre o GMTP em duas vertentes (projeto e desempenho), estudando-o por meio de diferentes configurações de rede e identificando-se suas vantagens e limitações em comparação ao estado da arte e da prática.

Como apresentou-se no Capítulo~\ref{cap:introducao}, o objetivo deste trabalho compreende três grandes fases: 1) revisar as técnicas e propostas para distribuição de mídias ao vivo; 2) propor o protocolo GMTP; e 3) avaliar o uso do GMTP para distribuição de mídias ao vivo. Nos Capítulos~\ref{cap:fundamentacao} e~\ref{trabalhosrelacionados}, contemplou-se a Fase 1; no  Capítulo~\ref{cap:mudccp}, a Fase 2 e, neste capítulo, concentram-se as discussões na Fase 3.

Sendo assim, avaliou-se o protocolo GMTP frente às propostas Denacast/CoolStreaming~\cite{Jahromi2012,5764567} e o CCN-TV~\cite{6550523}. Considerou-se dois principais critérios de seleção dessas propostas, em comparação ao GMTP: similaridade arquitetural e os recursos disponíveis para distribuição de mídias ao vivo. Tratam-se de duas propostas que adotam a maioria das estratégias disponíveis no estado da prática/arte para distribuição de mídias ao vivo, referenciadas na literatura e acessíveis para estudos comparativos.

% Nesse contexto, considera-se que as avaliações são equânimes, pois o Denacast/CoolStreaming estende o funcionamento do CoolStreaming para dar suporte a uma estrutura P2P/CDN, o CCN-TV faz uso de uma infraestrutura que considera mais efetivamente o suporte da rede para otimizar o acesso aos dados e o GMTP essencialmente explora uma estratégia híbrida se considerado seus concorrentes.

O restante deste capítulo esta organizado da seguinte forma: na Seção~\ref{sec:metodologia}, apresenta-se a metodologia de avaliação. Na Seção~\ref{sec:resdisc}, discutem-se os resultados da avaliação do desempenho do GMTP. Na Seção~\ref{sec:projeto-gmtp}, analisa-se o projeto GMTP no tocante aos seus benefícios e funcionalidades. E, por fim, na Seção~\ref{sec:resdisc-sumario}, sumariza-se este capítulo.

% PENSAR EM ALGUM GRÁFICO PARA COLOCAR LÁ NA PROBLEMÁTICA?

\section{Metodologia}
\label{sec:metodologia}

Para realizar a comparação entre protocolos supracitados, definiu-se a modalidade experimental em um ambiente de simulação de rede que proporcionou a construção de um cenário de rede para este fim. Através da definição de fatores (variáveis independentes), mediu-se e analisou-se as principais métricas (variáveis dependentes) que determinam a experiência do usuário ao assistir a um evento através de um sistema de distribuição de mídias ao vivo. Dessa forma, realizou-se um estudo aprofundado do comportamento do GMTP em relação aos seus principais concorrentes, estudando-o em diferentes configurações de rede a fim de determinar suas vantagens, limites e os impactos que seus recursos podem gerar tanto sobre os nós quanto sobre a rede.

A seguir, apresentam-se detalhes do projeto experimental executado, organizado em objetivo e hipótese, topologia de rede, variáveis e fatores, população e amostras, tratamentos, instrumentação e formato da mídia.

\subsection{Objetivo e hipótese}
\label{subsec:objetivo-hipotese}

O objetivo do experimento foi avaliar o desempenho do GMTP com vistas à hipótese enunciada de que a constituição de uma rede de favores entre roteadores que interceptam, realizam \textit{cache} temporário e compartilham pacotes de dados tanto em modo \textit{multicast} (em redes locais) quanto em modo unicast (entre redes distintas), auxiliados por um algoritmo para controle de congestionamento assistido pela rede, resulta em uma melhor distribuição dos fluxos de mídias ao vivo.

Para provar esta hipótese, organizou-se a avaliação experimental em duas etapas. Na primeira etapa, confrontou-se o GMTP com o Denacast/CoolStreaming e, na segunda, confrontou-se o GMTP com o CCN-TV. Em ambas as etapas, analisaram-se os valores obtidos referentes às métricas que determinam a qualidade de serviço dos sistemas de distribuição de mídias ao vivo, comparando-se o desempenho dos sistemas estudados.

% Em cada etapa, definiu-se uma hipótese nula ($H_0$) e uma hipótese alternativa ($H_A$), da seguinte forma:
% 
% \begin{enumerate}
% 
%   \item \textit{GMTP vs. Denacast/CoolStreaming}:
%   \begin{itemize}
% 
%     \item $H_0$: a eficácia do GMTP e a do Denacast/CoolStreaming é igual, considerando-se as métricas que determinam a qualidade de serviço para distribuição de mídias ao vivo.
% 
%     \item $H_A$: a eficácia do GMTP e do Denacast/CoolStreaming é diferente, considerando-se as métricas que determinam a qualidade de serviço para distribuição de mídias ao vivo.
% 
%   \end{itemize}
% 
%   \item \textit{GMTP vs. CCN/TV}: 
%   \begin{itemize}
% 
%     \item $H_0$: a eficácia do GMTP e do CCN-TV é igual, considerando-se as métricas que determinam a qualidade de serviço para distribuição de mídias ao vivo.
% 
%     \item $H_A$: a eficácia do GMTP e do CCN-TV é diferente considerando-se as métricas que determinam a qualidade de serviço para distribuição de mídias ao vivo.
% 
%   \end{itemize}
% 
% \end{enumerate}



\subsection{Topologia de rede}
\label{subsec:topologia}

Com esse norte, definiu-se a topologia da rede, como ilustra-se na Figura~\ref{fig:rede-geant}. Simulou-se uma versão resumida da rede GÉANT\footnote{Rede GÉANT é a rede de pesquisa e educação pan-europeia, que interliga as Redes Nacionais de Pesquisa e Educação da Europa (NRENs) atualmente com 41 roteadores: http://www.geant.net/.}, composta por 27 roteadores. No Apêndice~\ref{app:detalhes-experimentos}, Seção~\ref{sec:tabela-atrasos-propagacao-rede}, apresentam-se as configurações de cada roteador e seus enlaces no tocante à largura de banda e atraso de propagação, com base na legenda da Figura~\ref{fig:rede-geant}.

\begin{figure}[b!ht]
\begin{center}
\includegraphics[natwidth=1729,natheight=1190,scale=.51]{imgs/rede-geant1.png}
\end{center}
\vspace{-0.8cm}
\caption{Versão resumida do \textit{backbone} da rede GÉANT.}
\label{fig:rede-geant}
\end{figure}

Com relação à conectividade dos nós clientes à rede, simulou-se redes locais através das quais os nós cliente estabeleceram conexões com os servidores. O objetivo foi simular redes institucionais (empresas, escolas, pequenos provedores, etc) e, para isto, gerou-se $27$ sub-grafos aleatórios de um grafo completo, com $12$ vértices (nós roteadores) e estabeleceu-se uma aresta entre dois vértices (enlace entre roteadores) da seguinte forma: iterou-se os $12$ roteadores dois-a-dois, sorteando-se um número \textit{x} $\in$ $[0,1]$. Com base no valor de \textit{x}, decidiu-se com probabilidade de \ut{60}{\%} estabelecer um enlace entre os dois roteadores correspondentes à cada iteração. Além disso, assegurou-se o estabelecimento de pelo menos um enlace para cada roteador e determinou-se uma largura de banda de \ut{100}{Mbps} e atraso de propagação de \ut{1}{ms} entre todos os enlaces da rede local. Em seguida, para cada roteador do \textit{backbone}, estabeleceu-se um enlace de \ut{100}{Mbps} com um dos roteadores de uma das redes locais (escolhida aleatoriamente dentre as $27$ geradas).

Por fim, os nós clientes foram distribuídos nas redes locais de forma sequencial, um para cada roteador até distribuir todos os clientes nas redes locais. Por exemplo, supondo-se um tratamento com $500$ nós clientes, o nó cliente $1$ foi conectado ao nó roteador $1$, o nó cliente $2$ foi conectado ao nó roteador $2$ e assim sucessivamente até atingir o $27^o$ roteador (conectando-se o nó cliente $27$), recomeçando-se a contagem do número de roteadores até atingir o número máximo de nós clientes determinado no respectivo tratamento. Desta forma, todos os sistemas foram submetidos às mesmas condições de distribuição dos nós cliente.

Como resultado dessa estratégia, simulou-se uma rede constituída por $324$ roteadores, utilizada na execução de todos os tratamentos do experimento. Com isto, garantiu-se que todos os sistemas avaliados fossem submetidos à mesma topologia de rede e distribuiçãod os nós clientes.

\subsection{Definição das variáveis e parâmetros dos sistemas estudados}

As variáveis foram definidas em 3 categorias: independentes, fatores e dependentes.

\subsubsection{Variáveis independentes:}

Na Tabela~\ref{tb:variaveis-independentes}, apresentam-se as variáveis independentes utilizadas no experimento, com base na topologia da rede apresentada anteriormente.

\begin{table}[b!ht]
  \centering
  \caption{Tabela das variáveis independentes utilizados no experimento.}
  \renewcommand{\arraystretch}{1}% Spread rows out...
  \begin{tabular}{>{}m{2.8in} >{}m{3.1in}}
    \toprule
    \textbf{Parâmetros} & \textbf{Valores} \\
    \midrule
    Dinâmica da rede (\textit{churn})$^1$ & RandomChurn \\
    Número de nós roteadores (\textit{backbone}) & 27 \\
    Número de nós roteadores nas redes locais & 12 \\
    Número total de roteadores & 324 \\
    Largura de banda das redes locais & \ut{100}{Mbps} \\
    Atraso de propagação das redes locais & \ut{1}{s} \\
    Tempo de simulação de cada ensaio & \ut{900}{s} \\
    Tamanho do buffer circular (roteadores) & \ut{40}{s} \\
    Tamanho máximo do datagrama & \ut{1500}{Bytes} (OverSim) e \ut{4096}{Bytes} (CCNSim)\\
    Taxa de upload dos nós & \ut{512}{Kbps}, \ut{1}{Mbps}, \ut{2}{Mbps} (Heterogênea) \\
    Tipo da mídia$^2$ & MPEG4 Part I \\
    \bottomrule
  \end{tabular}
  \\\scriptsize\raggedright
  $^1$ Para mais detalhes, consultar Seção~\ref{subsec:tratamento}. \\
  $^2$ Para mais detalhes, consultar Seção~\ref{subsec:tipomidia}.\\
  \normalsize
  \label{tb:variaveis-independentes}
\end{table}

\subsubsection{Fatores:}

Na Tabela~\ref{tb:fatores}, apresentam-se os fatores considerados no experimento. Os tratamentos foram determinados pelo produto cartesiano desses fatores.

\begin{table}[b!ht]
  \centering
  \caption{Tabela dos fatores consideradas no experimento.}
  \renewcommand{\arraystretch}{1}% Spread rows out...
  \begin{tabular}{>{}m{2.2in} >{}m{3.6in}}
    \toprule
    \textbf{Fatores} & \textbf{Valores} \\
    \midrule
    Número de nós servidores & 1, 3, 5 \\
    Número de nós clientes$^1$ & 500; 1.500; 15.000; 30.000; 60.000; 80.000 \\
%     Suporte da rede ao protocolo$^2$ & Borda e Total \\
    \bottomrule
  \end{tabular}
  \scriptsize\raggedright
  \begin{spacing}{0.5}
    $^1$ Todos os clientes solicitaram a mídia nos primeiros \ut{200}{s} de cada ensaio. Mais detalhes na Seção~\ref{subsec:tratamento}.
%     $^2$ Apenas no confronto GMTP vs. CCN-TV. \textit{Borda:} suporte apenas nos roteadores conectados na borda da rede. \textit{Total:} suporte em todos os roteadores da rede.
  \end{spacing}  
  \label{tb:fatores}
\end{table}

% Total de 360
% 

\subsubsection{Variáveis dependentes:}

As principais métricas para medir um sistema de distribuição de mídias ao vivo podem ser organizadas em três categorias~\cite{5343509}, apresentadas a seguir. 

\begin{enumerate}

  \item \textit{Qualidade de serviço à aplicação:} avaliam-se o atraso para iniciar a reprodução da mídia após um cliente requisitá-la ao servidor (ST); o índice de continuidade (IC); e a distorção do conteúdo em comparação ao original (DI). Como ilustra-se na Figura~\ref{fig:medicao-qualidade-midia}, a variável ST é o tempo transcorrido entre um nó cliente requisitar a mídia e receber o primeiro pacote de dados reproduzível. O valor da variável IC corresponde à razão entre o número de pacotes de dados da mídia entregues ao nó cliente antes do momento de reproduzi-los e o número total de pacotes de dados transmitidos. Por fim, o valor da variável DI corresponde à razão entre o número de quadros com erros e o número total de quadros disponíveis para serem entregues em um certo período. Para efeito de cálculo das variáveis IC e DI, considerou-se apenas o período em que cada nó cliente permaneceu conectado à rede. Por exemplo (Figura~\ref{fig:medicao-qualidade-midia}), se um nó cliente $1$ se conectou no instante \ut{14}{s}, começou a receber os pacotes de dados reproduzíveis no instante \ut{19}{s} (ST=4) e foi desconectado no instante \ut{49}{s}, considerou-se apenas os pacotes de dados entre os instantes \ut{19}{s} e \ut{48}{s} para calcular os valores de CI e DI do nó cliente $1$. Note que podem ocorrer quadros de vídeo com erro por dois motivos:

  \begin{enumerate}

    \item \textit{Atraso de chegada:} o nó recebeu o quadro corretamente, porém não foi possível reproduzi-lo por ter expirado (quadro recebido após o instante de sua correta reprodução);

    \item \textit{Devido às perdas de dependência:} o nó recebeu o quadro corretamente, porém não foi possível decodificá-lo devido à dependência de outro quadro indisponível.

  \end{enumerate}
 

  \begin{figure}[b!ht]
  \begin{center}
  \includegraphics[scale=.75]{imgs/medicao-qualidade-midia.pdf}
  \end{center}
  \vspace{-0.8cm}
  \caption{Exemplo de cálculo das variáveis dependentes ST, IC. Nesse caso, o valores ST = \ut{4}{s} e IC = \ut{70}{\%}.}
  \label{fig:medicao-qualidade-midia}
  \end{figure}

  \item \textit{Escalabilidade do sistema:} avalia-se a quantidade de nós simultâneos que foram capazes de receber o fluxo de dados da mídia transmitida com um nível de distorção máximo (ES). Nesse caso, mediu-se também o nível de contribuição das redes CDN e P2P, que corresponde à quantidade de fluxos transmitidos pelos servidores (QS) da CDN e pelos nós da rede P2P entre si (QP).

  \item \textit{Sobrecarga de controle:} avalia-se a quantidade de pacotes de controle (PC) transmitidos por um protocolo durante o tempo de simulação (contagem dos pacotes que não transportam dados da mídia), considerando-se $0,5$ cada pacote de \textit{piggyback}. 

\end{enumerate}

Com base nessas métricas, determinou-se as variáveis dependentes, apresentadas na Tabela~\ref{tb:variaveis-dependentes}.

\begin{table}[b!ht]
  \centering
  \caption{Tabela das variáveis dependentes (respostas) consideradas no experimento.}
  \renewcommand{\arraystretch}{1}% Spread rows out...
  \begin{tabular}{>{}m{4.1in} >{}m{1.0in}}
    \toprule
    \textbf{Variáveis dependentes} & \textbf{Símbolo} \\
    \midrule
    Atraso de inicialização do fluxo & ST \\
    Índice de continuidade (\%) & IC \\
    Distorção do vídeo (\%) & DI \\
%     Número de clientes com recepção acima de X\%$^1$ da mídia & ES \\
    Número de conexões ao servidor & QS \\
    Número de conexões entre clientes & QP \\
    Número de pacotes de controle & PC \\
    \bottomrule
  \end{tabular}
%   \scriptsize\raggedright
%   \begin{spacing}{0.5}
%     $^1$ As faixas dos valores de X são 0--20\%, 21--40\%, 41--60\%, 61--80\%, 91--100\%.\\
%   \end{spacing}
  \label{tb:variaveis-dependentes}
\end{table}


% Métricas:
%    - Atraso de inicialização do fluxo
%    - Índice de Continuidade / Quantidade de interrupções / tempo de recuperação (?)
%    - Distorção do conteúdo recebido em comparação ao transmitido
%    - Sobrecarga de controle
%    - Número de conexões no servidor / entre nós
%    - Número de nós clientes que receberam 90%, 80% e 70% da mídia do total de nós na rede
%    - Qualidade das parcerias, determinada pela taxa de transmissão entre o nó que compartilha e o nó que recebe: verifica se tinha um canal melhor (maior capacidade de transmissão se comparado ao canal utilizado) entre o nó provedor e o nó receptor.

% \subsection{Definição dos parâmetros do GMTP}
% 
% Olhar o capítulo 4 da tese da nandita para ver os valores dos parâmetros que ela usou
% ver a página 99 para discussões sobre os valores de alfa e beta
% 
% \begin{table}[b!ht]
%   \centering
%   \caption{Tabela dos parâmetros específicos do GMTP.}
%   \renewcommand{\arraystretch}{1}% Spread rows out...
%   \begin{tabular}{>{}m{2in} >{}m{2in}}
%     \toprule
%     \textbf{Parâmetros} & \textbf{Valores} \\
%     \midrule
%      &  \\
%      &  \\
%      &  \\
%     \bottomrule
%   \end{tabular}
%   \label{tb:gmpt-params}
% \end{table}

% % \subsubsection{Parâmetros dos sistemas estudados:}
% % 
% % Denacast/CoolStreaming
% % 
% % GMTP
% % 
% % CCN-TV


\subsection{População e amostras}

Constituiu-se a população por dados coletados durante a execução dos ensaios de acordo com às variáveis dependentes apresentadas na Tabela~\ref{tb:variaveis-dependentes}, com amostras coletadas a cada segundos. Como a duração de cada ensaio foi de \ut{900}{s}, coletou-se \ut{900}{} amostras e o valor final de cada variável dependente em cada ensaio foi determinado pela média aritmética das respectivas amostras.

% % \subsection{\textit{Design} de experimentos}
% 
% Como em uma rede de computadores erros frequentemente ocorrem nas transmissões, se fez necessário \textit{um design} de experimento com replicação. Assim o projeto de experimento escolhido obedece ao \textit{design} $2^k*r$, onde $k=3$ (três níveis) e $r=30$ (trinta replicações por tratamento).

\subsection{Tratamentos}
\label{subsec:tratamento}

Na Tabela~\ref{tb:tratamentos}, apresentam-se os tratamentos considerados no experimento, definidos com base na combinação dos fatores apresentados na Tabela~\ref{tb:fatores}. Definiu-se como  as unidades experimentais o GMTP, o Denacast/CoolStreaming e o CCN-TV, comparados em confrontos dois-a-dois, fixando-se o GMTP, em execuções não simultâneas. Executaram-se $XXXX$ ensaios distribuídos em $36$ tratamentos, $18$ para o confronto GMTP vs. Denacast/CoolStreaming ($XXXX$ ensaios) e $18$ para o confronto GMTP vs. CCN-TV ($XXXX$ ensaios).

\begin{table}[b!ht]
  \centering
  \caption{Tabela dos tratamentos executados no experimento.}
  \renewcommand{\arraystretch}{1}% Spread rows out...
  \begin{tabular}{ccc}
    \toprule
    \textbf{Tratamento \#} & \textbf{Número de nós servidores (conectado(s) a)} & \textbf{Número de nós clientes} \\
    \midrule
    1  & \multirow{6}{*} {1 (DE)} & 500 \\
    2  &  & 1.500 \\
    3  &  & 15.000 \\
    4  &  & 30.000 \\
    5  &  & 60.000 \\
    6  &  & 80.000 \\ \hline
    7  & \multirow{6}{*} {3 (DE, EE, PT)} & 500 \\
    8  &  & 1.500 \\
    9  &  & 15.000 \\
    10 &  & 30.000 \\
    11 &  & 60.000 \\
    12 &  & 80.000 \\  \hline
    13 & \multirow{6}{*} {5 (DE, EE, PT, NL, HU)} & 500 \\
    14 &  & 1.500 \\
    15 &  & 15.000 \\
    16 &  & 30.000 \\
    17 &  & 60.000 \\
    18 &  & 80.000 \\
    \bottomrule
  \end{tabular}
  \label{tb:tratamentos}
\end{table}

Com relação a execução de cada tratamento, estabeleceu-se a execução de $50$ ensaios iniciais, obtendo-se assim $50$ amostras para cada variável dependente. Em seguida, calculou-se a média das amostras iniciais e, para realizar comparações com \ut{95}{\%} de certeza, calculou-se a quantidade total de ensaios ($n_t$) necessários para este nível de confiança. Assim, para calcular $n_t$ dadas duas médias iniciais $\mu_1,\mu_2$ de uma certa variável dependente, cada uma obtida pela execução dos respectivos sistemas confrontados, determinou-se $n_t = max(n_{ST}, n_{IC}, n_{DI}, n_{QS}, n_{QP}, n_{PC}) + 1$, onde os valores $n_{ST}, n_{IC}, n_{DI}, n_{QS}, n_{QP}, n_{PC}$ foram obtidos através da inequação de proporcionalidade para comparar duas alternativas~\cite{jain1991}. No Apendência~\ref{app:detalhes-experimentos}, Seção~\ref{sec:ineq-proporcional}, apresentam-se mais detalhes sobre o cálculo de $n_t$.

Antes da execução de todos os ensaios de cada tratamento, executaram-se outras ações importantes:

\begin{enumerate}

  \item Configurou-se todos os nós clientes para enviar a requisição da mídia a um servidor escolhido especifico, escolhido aleatoriamente (distribuição uniforme). Sendo assim, garantiu-se que todos os sistemas avaliados fossem submetidos às mesmas quantidades de requisições ao(s) nó(s) servidor(es).

  \item Definiu-se a taxa de \textit{upload} de cada nó cliente com base em uma escolha aleatória entre as seguintes opções: \ut{512}{Kbps}, \ut{1}{Mbps}, \ut{2}{Mbps} (distribuição uniforme). Dessa forma, assegurou-se que os nós clientes foram submetidos as mesmas capacidades de transmissão, independente do sistema avaliado. 
%   Para essa estrutura de dados deu-se o nome de \textit{mapa de distribuição de taxas de upload}.

  \item Todos os nós clientes requisitaram a mídia nos primeiros \ut{200}{s}. Para definir o instante de cada requisição do cliente definiu-se o seguinte: gerou-se uma quantidade de números inteiros entre $0-200$ igual à quantidade de nós clientes determinado para um certo tratamento. Por exemplo, no Tratamento $1$ foram sorteados $500$ números inteiros aleatórios entre $0-200$ e somou-se o número de ocorrências de cada número sorteado. Durante a execução dos ensaios, adicionou-se à rede a quantidade de nós correspondente ao número de ocorrências em cada instante da simulação. Por exemplo, se o número $199$ foi sorteado $10$ vezes, no instante $199$ da simulação foram adicionados $10$ nós clientes que imediatamente requisitaram a mídia ao servidor.  Dessa forma, garantiu-se que os sistemas foram submetidos às mesmas condições iniciais de conexão entre os nós clientes e os nós servidores.
% Para essa distribuição deu-se o nome de mapa de conexão.

  \item A função de \textit{churn} foi acionada no instante \ut{400}{s}. A estratégia foi a seguinte: a cada intervalo de \ut{5}{s}, um número \textit{x} $\in$ $[0,1]$ foi gerado. Dependendo do valor de \textit{x}, \ut{10}{\%} dos nós clientes foram mantidos ou removidos com uma probabilidade de $0.7$. Ou seja, os nós foram mantidos conectados à rede com uma probabilidade de \ut{70}{\%} e removidos com uma probabilidade de \ut{30}{\%}. Com isto, garantiu-se que todas os sistemas avaliados fossem submetidos às mesmas condições de dinâmica da rede.

\end{enumerate}


\subsection{Instrumentação}

Com relação à instrumentação, utilizou-se OMNet++~\cite{XU2011,omnetpp2014}, um arcabouço para construção de simuladores de rede. Nesse contexto, utilizaram-se dois simuladores: o OverSim~\cite{oversim2014} e o CCN-Sim~\cite{ccnsim2014}. No OverSim, utilizaram-se as implementações do sistema Denacast/CoolStreaming~\cite{denacast2014} e a do GMTP~\cite{gmtp2014} (implementado no contexto deste trabalho), ao passo que no CCN-Sim, utilizou-se a implementação do CCN-TV~\cite{ccntv2014}.

\subsection{Formato da mídia}
\label{subsec:tipomidia}

Na Tabela~\ref{tb:midia-props}, apresentam-se as propriedades da mídia utilizada no experimento~\cite{967596}.

% http://www-tkn.ee.tu-berlin.de/research/trace/ltvt.html

\begin{table}[b!ht]
  \centering
  \caption{Tabela das propriedades da mídia transmitida.}
  \renewcommand{\arraystretch}{1}% Spread rows out...
  \begin{tabular}{>{}m{2in} >{}m{2in}}
    \toprule
    \textbf{Propriedades} & \textbf{Valores} \\
    \midrule
    Mídia sintetizada & \textit{Star Wars IV} \\
    \textit{Codec} do vídeo & MPEG4 Part I \\
    Número de quadros & \ut{25}{fps} \\
    Número de quadros em GoP & 12 \\
    Média VBR & \ut{512}{Kbps} \\
    \bottomrule
  \end{tabular}
  \label{tb:midia-props}
\end{table}



\begin{figure}[b!ht]
\begin{center}
\includegraphics[natwidth=1737,natheight=724,scale=.21]{imgs/starwars-bitrate.png}
\end{center}
\vspace{-0.8cm}
\caption{Taxa de bits variáveis dos primeiros \ut{200}{s} da mídia utilizada no experimento (\textit{Star Wars IV}).}
\label{fig:rede-geant}
\end{figure}

Com base na metodologia apresentada nesta seção, coletaram-se as amostras para as variáveis dependentes e realizou-se uma análise dos dados a fim de provar a hipótese enunciada na Seção~\ref{subsec:objetivo-hipotese}.

\section{Resultados e Discussões}
\label{sec:resdisc}

Nesta seção, apresentam-se os resultados e discussões dos confrontos GMTP vs. Denacast/CoolStreaming e GMTP vs. CCN-TV. Salienta-se que a metodologia discutida anteriormente assegura uma análise estatística dos resultados obtidos e discussões comparativas sobre o desempenho do GMTP em relação aos dois sistemas oponentes considerados, sem garantias estatísticas de comparação e portanto conclusivas entre o Denacast/CoolStreaming e o CCN-TV.

RECALCULAR E CITAR AS TABELAS

% Executaram-se $1487$ ensaios para o confronto GMTP vs. Denacast/CoolStreaming e $1487$, totalizando 

% Inicialmente foi feita uma análise estatística da normalidade dos dados com o objetivo de fundamentar a escolha do teste de hipótese adequado a ser usado na análise estatística do  comportamento do protocolo DCCP. Nas subseções seguintes serão exibidos os resultados e discussão referentes às duas análises previamente citadas. 

Acho que é melhor colocar cada seção de acordo com a classificação das métricas

\subsection{Qualidade de serviço à aplicação}

Qualidade da mídia x Número de nós clientes

Atraso de inicialização x Número de nós clientes

\subsection{Escalabilidade dos sistemas}

Conexões ao servidor x Conexões entre clientes

\subsection{Sobrecarga de controle}

Pacotes de Controle x Número de nós clientes

\subsection{Compilação dos resultados}

Pensar num gráfico que relacione a média geométrica de todos as variáveis dependentes com os fatores. Em um contexto geral, comparando em um único número para cada protocolo, fazer um gráfico de barras, usar média geométrica, ou seja:

Dizer que o GMTP tem um melhor desempenho porque a seleção de nós considera a capacidade do canal

Melhorar o capítulo do GMTP em duas coisas: cabeçalho genérico e a parte de seleção dos melhores caminhos com base na capacidade atual do canal (o problema que pode ocorrer é de flash-crowd)

CCN-TV 6550523

% - http://named-data.net/wp-content/uploads/2013_Yuan_Infocom_Mini.pdf
  Olhar os gráficos desse artigo

cite 6607500
cite 6386696


% * p17: na sua tese, o que seria um resultado que a negaria? Ela não pode ser óbvia.
%      - Um protocolo que comprovasse fazer melhor do que o GMTP considerando apenas a comunicação end-to-end, com suporte a controle de congestionamento (o que mais??)
%      - Seleção de nós é importante


\section{Análise do Projeto GMTP}
\label{sec:projeto-gmtp}

USAR ISSO PARA RESPONDER A QUESTÃO SECUNDÁRIA DEFINIDA NA PROBLEMÁTICA

Neste capítulo, especificamente nesta seção, objetiva-se justificar a proposta do GMTP não apenas como um protocolo com o apelo de reduzir a complexidade dos recursos disponibilizados na camada de aplicação, mas também discutir que um conjunto mínimo de serviços, quando organizados de forma mais apropriada (nas camadas inferiores), tornam-se equivalentes aos recursos dos atuais sistemas e ainda possibilitam melhorias substanciais tanto no projeto da aplicação quanto no uso dos recursos de rede.

% \begin{figure}
% \begin{center}
% \includegraphics[natwidth=664,natheight=340,scale=.61]{imgs/gmtp-servicos-sistemas.png}
% \end{center}
% \vspace{-1cm}
% \caption{\textit{Backbone} da Rede Nacional de Pesquisa (RNP). 27 pontos de presença, um em cada estado brasileiro, com 22 pontos de troca de tráfego. Extraída de http://www.rnp.br/.}
% \label{fig:gmtp-servicos-sistemas}
% \end{figure}

Com esse norte e organizando a discussão de acordo com a Figura~\ref{fig:gmtp-servicos-sistemas}, enumeram-se $7$ principais benefícios promovidos pelo GMTP tanto aos sistemas de distribuição de mídias ao vivo e quanto às redes, relacionando-os com os recursos atualmente empregados na camada de aplicação.

\begin{itemize}

  \item \textit{Conexão multi-ponto e tratamentos de diferentes topologias:} Nos sistemas existentes, tratam-se aspectos de conexão multi-ponto 

  \item \textit{Seleção de nós:} 

  \item \textit{tolerância a desconexões e outros problemas causados pelo \textit{churn}}: 

  \item \textit{disponibilização de informação de contexto sobre rede para dar suporte à execução dos serviços das aplicações, como localização da rede, medições e custos entre redes para melhorar a qualidade de serviços dos sistemas finais:}

  \item \textit{estratégias para incentivos à cooperação entre nós:}

  \item \textit{algoritmos para inibir a participação de nós \textit{free-riders}:}

  \item \textit{adaptação de fluxo baseado na capacidade de recepção dos nós:} 

  \item \textit{segurança:}

\end{itemize}

across differents administratives domain
traffic isolation
sem precisar considerar IGP, BGP etc? ler a respeito
diffserv? qual é o outro mesmo? mencionar na problemática?


futuro: estudar gmtp + anycast?

\begin{enumerate}

  \item \textit{Otimização arquitetural:} das aplicações existentes... cliente/servidor, p2p/cdn... usar a palavra automático para criação de canais multicast, inclusive entre diferentes domínios administrativos, uso transparente de estratégias de redes de favores e cdn

  \item \textit{Interoperabilidade entre sistemas:} conexão, unifica... unifica as aplicações clientes no ponto de vista do processo de conexão e obtenção dos dados, uma vez que todo esse processo ocorre na camada de transporte sem qualquer influência da aplicação. Isto significa que se existir um nó executando um cliente do sistema PPLive e um outro cliente do sistema SopCast, portanto desenvolvido por equipes diferentes, ambos ainda sim serão compatíveis e capazes de cooperar entre si na obtenção do fluxo de mídia de interesse comum; "Arquiteturalmente, o GMTP resolve o problema de permitir a interoperabilidade dos sistemas e otimiza o uso de recursos de rede ..."

  \item \textit{Facilidade na integração:} das aplicações existentes... falar da api socket

  \item \textit{Melhor utilização dos recursos de rede:} controle de congestionamento assistido pela rede, tragédia dos bens comuns...

  \item \textit{Flexibilidade de uso:} gmtp-inter gmtp-intra extensibilidade, o cara pode fazer um novo gmtp-intra e usar tudo do gmtp-inter

  \item \textit{Eliminação de recursos paliativos e fenômenos consequentes:} das aplicações por quê? pegar a lista abaixo e meter o pau!

  \item \textit{Generalização de boas práticas e abstração da complexidade:} citar o que era de aplicação e foi pra dentro do GMTP

\end{enumerate}

- isso é tão verdade que na próxima seção serão comparadas uma aplicação gmtp, com um sistema proeminente atualmente e um sistema que segue uma proposta de uma arquitetura futura da internet.

Sendo assim, o que resta para a aplicação? replicar conteudo nos servidores da cdn e estratégias para acessa-los (load balancing etc)

acho que seria muito bom colocar a QeA aqui, não desistir fácil dessa ideia, pois trará mais robustez a essa seção. Colocar aqui dentro ou lá no final desse cap? ou nas concls?

- O GMTP não é um protocolo multicast fim-a-fim, mas usa multicast na rede local: evitar problemas de integração


\section{Sumário do Capítulo}
\label{sec:resdisc-sumario}

A interoperabilidade é uma medição arquitetural, explicar isso. Como medir a quantidade de aplicações de distribuição de mídias ao vivo diferentes e a quantidade de eventos iguais sendo transmitidos












% \subsection{Considerações sobre Implementação}
% 
% Com o intuito de investigar o desempenho do GMTP, implementou-se no simulador de redes OMNet++~\cite{XU2011} suas principais funcionalidades. A versão  e sua versão atual do protocolo já permite a execução de transmissão de dados. Com o
% desenvolvimento preliminar do protocolo \mudccps no simulador NS-2, permitiu-se
% a execução de diversas simulações a fim de avaliar o comportamento do protocolo
% considerando diversas configurações.
% 
% Em linhas gerais, a implementação no referido simulador de rede permite a
% comunicação entre os nós através dos modos de transmissão multicast e unicast.
% Foram implementados os tipos de pacotes do \mudccps e os processos de
% estabelecimento de conexão, incluindo o processo de uso de nós relays, troca
% de dados em modos multicast e unicast e os algoritmos para controle de
% congestionamento, incluindo o uso de nós reporters.
% 
% Contudo, não foi implementado o arcabouço de extensão para permitir o
% desenvolvimento de novos algoritmos para o processo de conexão, descoberta e
% seleção de nós, adaptação de fluxo de dados e tolerância a falhas. Tal
% implementação será feita no núcleo do sistema operacional Linux, juntamente com
% todos os mecanismos básicos para o funcionamento do \mudccp.
% 
% A proposta é de implementar um arcabouço de extensão para as funções previstas
% no \mudccp, permitindo-se o desenvolvimento e adição de novos algoritmos para
% as funcionalidades supracitadas, de modo que torne o \mudccps flexível para
% permitir que qualquer aplicação os utilizem.
% 
% Na prática, um cenário desejado para essa proposta de implementação do \mudccps
% é que o desenvolvedor possa configurar quais algoritmos deseja utilizar em sua
% aplicação, permitindo-se que estes sejam alterados em modo de execução da
% da mesma. Neste caso, suponha um algoritmo de descoberta de nós chamado
% \textit{DN-1}, um algoritmo para controle de congestionamento chamado
% \textit{CC-2}, um algoritmo de tolerância a desconexão \textit{TD-3}; um
% algoritmo de adaptação de fluxo \textit{AF-4} e um algoritmo para reciprocidade
% % \textit{R-2}. As implementações de tais algoritmos serão feitas na camada de
% transporte, acoplando-as em forma de módulos do sistema operacional ao protocolo
% \mudccp. Em seguida, as aplicações podem selecionar quais algoritmos melhor se
% adequa as suas necessidades, com o \mudccps sendo responsável por:
% 
% \begin{enumerate}
% 
%   \item carregar o conjunto de algoritmos \textit{A = \{DN-1, CC-2, TD-3, AF-4,
% R-2\}};
% 
%   \item definir os parâmetros iniciais para cada um dos algoritmos em A,
% definidos pela aplicação;
% 
%   \item executar funções preliminares para ajustes iniciais, tais como informar
% aos nós participantes de uma transmissão quais dos algoritmos estão sendo
% utilizados (o conjunto \textit{A}) e quais outros estão disponíveis;
% 
%   \item executar os algoritmos em momentos apropriados de acordo com os eventos
% de rede, notificando a aplicação caso necessário e desejável pela aplicação;
% 
%   \item descarregar os algoritmos quando não forem mais necessários e informar
% aos nós parceiros.
% 
% \end{enumerate}
% 
% Desta forma, um nó servidor poderá solicitar que seus nós clientes carreguem um
% determinado módulo, dependendo da sua disponibilidade nos nós clientes. Neste
% caso, o \mudccps controlará todo o processo de carregamento dos mesmos.
% 
% Com isso, o \mudccps se tornará um protocolo extensível que gerencia quais
% algoritmos devem ser executados em cada ponto de extensão. Esses algoritmos
% podem ser adicionados ao protocolo através de módulos do sistema operacional,
% carregáveis utilizando-se comandos como o \textit{modprobe} (no Linux, por
% exemplo) e manipulados (passagem de parâmetros) pela aplicação através de uma
% API de programação, por exemplo, utilizando-se as primitivas
% \textit{setsockopt()} e \textit{getsockopt()} da especificação \textit{BSD
% Socket API}~\cite{1197551}.
% 
% Para que as aplicações possam utilizar o \mudccp, o protocolo deve ser
% compatível com todas as funções prevista na especificação \textit{BSD Socket
% API}, são elas: \textit{socket()}, \textit{bind()}, \textit{listen()},
% \textit{connect()}, \textit{accept()}, \textit{send()}, \textit{recv()},
% \textit{write()}, \textit{read()}, \textit{sendto()}, \textit{recvfrom()},
% \textit{close()}, \textit{select()}, \textit{setsockopt()},
% \textit{getsockopt()} e \textit{pull()}.
% 
% Outros trabalhos podem ser desenvolvidos para tornar o \mudccps compatível com o
% padrão de \textit{sockets} do sistema operacional Windows, conhecido pelo nome
% de \textit{winsock}. Todavia, por ser um sistema operacional de código fechado,
% a implementação do \mudccps só será possível após sua padronização em forma de
% RFC.