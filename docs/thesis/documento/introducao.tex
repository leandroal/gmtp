\chapter{Introdu\c{c}\~{a}o}
\label{cap:introducao}

% - BUSCAR REFERENCIAS CONTUNDENTES DE QUE AS APLICAÇÕES FAZEM TUDO EMCIMA
% -
% http://www.businessinsider.com/cisco-predicts-mobile-2013-5#heres-where-to-find-
% more-facts-about-the-growth-of-the-internet-30

% http://www.cisco.com/en/US/netsol/ns827/networking_solutions_sub_solution.html

% \begin{center}
%     \begin{minipage}{300pt}
%     \small
%     \centering
%       ``Controle de congestionamento está relacionado a como usar a rede da
% forma mais efetiva quanto possível. Atualmente as redes estão super equipadas
% e
% a pergunta mudou de \emph{como eliminar o congestionamento da rede?} para
% \emph{como utilizar de forma eficiente toda a capacidade disponível da
% rede?}''
% (Michael Welzl)
%     \end{minipage}
% \end{center}
% \vspace{1cm}

A Internet é um sucesso tecnológico e sua infraestrutura global conecta bilhões de hospedeiros, transmitindo-se uma volumosa quantidade de dados digitais diariamente. Estima-se que em 2016 ocorrerão aproximadamente 18,9 bilhões de conexões de rede -- quase 2,5 conexões para cada pessoa no planeta -- em comparação aos 10,3 bilhões registrados em 2011~\cite{cisco2013-report}.

O aumento das conexões de banda larga à Internet resulta em uma maior exigência de qualidade de serviço dos sistemas de distribuição de mídias ao vivo, elevando-se os custos com largura de banda dos distribuidores de conteúdo. Por exemplo, o YouTube\texttrademark\space registra um custo operacional com largura de banda da ordem de \ut{US\$1}{milhão} por mês, para atender cerca de 20 milhões de usuários por dia e conseguir transmitir o equivalente a 60 mil anos de vídeos se fossem reproduzidos sequencialmente~\cite{5506093}. Estima-se que este ano (2014), o tráfego de vídeo será maior do que foi o tráfego de redes entre pares (P2P) para compartilhamento de arquivos em 2009, correspondendo a \ut{39}{\%} do tráfego de
dados total na Internet~\cite{5604156}.
% Estima-se também que o tráfego de VoIP, vídeo e jogos na Internet atingirá a marca de 40 exabytes por mês, quase \ut{50}{\%} do tráfego de dados total na Internet previsto para este ano~\cite{5604156}.
Além disso, estima-se que em 2016 cerca de 1,2 milhão de minutos serão transmitidos pela Internet a cada segundo -- o equivalente a 833 dias ou mais de dois anos~\cite{cisco2013-report}.

% estima-se que o tráfego IP em redes públicas e privadas gerados por consumidores
% e usuários corporativos deve crescer a uma taxa anual composta (CAGR) de
% \ut{29}{\%} até 2016, devido principalmente à forte demanda por vídeo e ao
% crescimento do uso de smartphones, tablets e TVs com Internet. A partir de 2016,
% o tráfego IP global anual será de 1,3 zetabyte (1 trilhão de gigabytes ou 38
% milhões de DVDs por hora). O aumento projetado do tráfego IP global somente
% entre 2015 e 2016 será de mais de 330 exabytes, valor quase igual à quantidade
% total do tráfego IP global gerado em 2011, que foi de 369 exabytes. Esse aumento
% significativo no tráfego e na penetração de serviços é motivado por diversos
% fatores, como o número cada vez maior de dispositivos móveis e as conexões P2P.
% Segundo o estudo, em 2016, haverá aproximadamente 18,9 bilhões de conexões de
% rede -- quase 2,5 conexões para cada pessoa no planeta -- em comparação com os
% 10,3 bilhões registrados em 2011.

Com a evolução da WWW (\textit{World Wide Web}) para a Web 2.0~\cite{4287373,4198260}, os usuários passaram a ter um papel de destaque no processo de prover alguns serviços. Um exemplo notório é o serviço de distribuição de conteúdos multimídia, sejam serviços onde as empresas disponibilizam conteúdos armazenados, como o YouTube e Netflix\texttrademark, ou principalmente os casos de transmissões empresariais e residenciais ao vivo, como o CoolStreaming\texttrademark, PPLive\texttrademark\space e o UStream.tv\texttrademark. Nesses últimos casos, os sistemas permitem a transmissão de conteúdos ao vivo gerados a partir do computador de um usuário para milhares de outros usuários conectados à
Internet~\cite{Silva:2011:LSU:2048614.2048874}. O UStream.tv recebe mais de 50 milhões de acessos e transmite 1,5 milhão de horas de vídeo ao vivo por mês, com mais de 2 milhões de usuários cadastrados e um dos canais\footnote{\murl{http://www.ustream.tv/decoraheagles}. O nome do canal é \textit{Decorah Eagles}, um acentamento de águias, localizado em Decorah, Iowa.} com mais de 284 milhões de acessos entre 2010 e fevereiro de 2014, com um pico de 100 milhões de acessos em uma semana. Outro caso é o da NASA.TV\footnote{\murl{http://www.ustream.tv/nasa}} (\textit{National Aeronautics and Space Administration Television}), que em 2011 migrou todos seus canais ao vivo na Internet para o UStream.tv, com mais de 25 milhões de acessos até março de 2014.

Ao observar o panorama atual dos serviços de distribuição de mídias ao vivo~\cite{sandvine-netflix-report,netflix-king,Silva:2011:LSU:2048614.2048874,tiinsideonline2008,Scott2008,Franchi2009,Kirkpatrick2008,Gannes2009}, o que preocupa é o crescimento acentuado do consumo de recursos computacionais e de rede, resultante das estratégias e protocolos adotados para este fim, cada um com suas próprias soluções~\cite{4644134,4265615,1597229,5954942,4357727,5712185}. Por isto, há uma grande motivação para estudar e propor novas soluções para utilizar eficientemente as redes de computadores, a fim de distribuir mídias ao vivo através da Internet em escala e com qualidade~\cite{5559372,5430138}.

% No final do primeiro semestre de $2011$, um artigo publicado no \textit{Financial Post}
% chamou atenção ao \aspas{\textit{anunciar momentos de grandes congestionamentos
% na Internet nos próximos anos}}~\cite{netflix-king,sandvine-netflix-report}.
% Destacou-se a Netflix como sendo a maior consumidora de banda de rede da América
% do Norte, respondendo por \ut{24,71}{\%} de todos os dados transferidos durante
% o horário de pico de uso da Internet por norte-americanos, ultrapassando até
% mesmo a rede BitTorrent\texttrademark\space de compartilhamento de arquivos,
% como ilustra-se na Figura~\ref{fig:network-traffic1-1}. \aspas{\textit{A questão
% é que se não fosse a Netflix, teria sido a Amazon\texttrademark, se não fosse a
% Amazon teria sido o Google\texttrademark, mas o verdadeiro e iminente problema
% de congestionamento da rede começará quando todos passarem a fazer isto.}},
% afirmou Colin Gillis, analista sênior de tecnologia da BGC Partners\footnote{BGC
% Partners: http://www.bgcpartners.com/}.
% 
% \begin{figure}[htbp]
%   \begin{center}
%     \subfigure[Percentual de consumo de dados transmitidos e recebidos por
% aplicação.\vspace{0.5cm}] {
%       \label{fig:network-traffic1-1}
% 	  \includegraphics[scale=0.38,natwidth=620,natheight=432]{imgs/network-traffic1-2.png}
%     }
%     \qquad
%     \subfigure[Tráfego de Internet em redes de acesso de banda larga.] {
%       \label{fig:network-traffic1-2}
% 	  \includegraphics[scale=0.26,natwidth=620,natheight=744]{imgs/network-traffic1-1.png}
%     }
%   \end{center}
%   \caption[Perfil de tráfego de rede da américa do norte durante o horário de
% pico.]{Perfil de tráfego de rede da américa do norte durante o horário de pico
% (considerando-se redes fixas)~\cite{netflix-king}.}
%   \label{fig:network-traffic1}
% \end{figure}
% Essa discussão se generaliza em um relatório publicado pela empresa de
% consultoria Sandvine, onde se menciona que \aspas{\textit{com o rápido
% sucesso da Netflix, YouTube, UStream e outros, os provedores de Internet em todo
% o mundo devem se preparar para um futuro em que serviços de multimídia ao vivo
% será disponibilizado em grandes proporções, podendo ser responsável pela maior
% fatia do tráfego de dados na Internet}}~\cite{sandvine-netflix-report}. Com base nesse relatório, serviços ao vivo de entretenimento foram responsáveis por quase metade (\ut{49,2}{\%}) de todo o tráfego de Internet na América do Norte no primeiro trimestre de $2011$, como ilustra-se na Figura~\ref{fig:network-traffic1-2}.
% Este número alcançou \ut{60}{\%} no final de $2011$ e \aspas{\textit{o fato é que o volume de tráfego na Internet cresce exponencialmente e o congestionamento da rede tende a piorar. As pessoas sabem o que está acontecendo, mas está acontecendo mais rápido do que elas esperavam.}}, comentou Tom Donnelly, vice-presidente da Sandvine.

\section{Delimitação}
\label{sec:delimitacao}

Apesar de existirem outras estratégias para distribuição de mídias ao vivo, delimita-se este trabalho nos protocolos dos sistemas para distribuição de mídias ao vivo baseados em uma arquitetura de rede híbrida P2P/CDN, ou seja, par-a-par (\textit{Peer to Peer} - P2P)~\cite{Li2008,4251077,6295665,4378429} e
cliente-servidor com suporte de uma rede de distribuição de conteúdos (\textit{Content Delivery Network} - CDNs)~\cite{1250586,1323289,939452} (Figura~\ref{fig:esquema-p2p-cdn}). Isto porque há evidências contundentes
~\cite{6121327,Xu04acdn-p2p,Dongyan2006,Meskovic2012,4012578,Huang:2008:UHC:1496046.1496064,6035830,5764567,5343509,4797271} de que se trata da principal escolha dos sistemas mais robustos, conseguindo-se escalabilidade do número de usuários e redução de custos com infraestrutura de rede, por meio das redes P2P (escala); ao passo que facilita-se o gerenciamento e obtém-se maior estabilidade de disponibilização dos serviços, por meio das CDNs (qualidade).

\begin{figure}[ht]
\begin{center}
\includegraphics[scale=0.5]{imgs/esquema-p2p-cdn.pdf}
\end{center}
\vspace{-1.5cm}
\caption[Esquema de uma arquitetura híbrida P2P/CDN para distribuição de
conteúdo multimídia.]{Estrutura de rede de uma arquitetura híbrida
P2P/CDN para distribuição de conteúdo multimídia.}
\label{fig:esquema-p2p-cdn}
\end{figure}

Nesse tipo de arquitetura de rede, os servidores da CDN atuam como super nós
para a rede P2P, ao passo que os nós da rede P2P cooperam entre si a fim de
disseminar mais rapidamente os datagramas, reproduzindo-os também localmente. Os datagramas são transmitidos após a captura dos quadros de um vídeo e uma aplicação os comprime, empacota-os e imediatamente os transmite para os sistemas remotos interessados. Do ponto de vista de protocolos de rede, utilizam-se conexões TCP
(\textit{Transmission Control Protocol})~\cite{4346548} para
selecionar os nós parceiros e para troca de mapas de \textit{buffers}, que
servem para indexar quais nós possuem quais partes da mídia; ao passo que
utiliza-se o UDP (\textit{User Datagram Protocol})~\cite{comer2004} para
transmitir datagramas contendo as partes da mídia a uma aplicação capaz de reproduzi-las ao usuário final.

Um aspecto importante para esses sistemas é definir de que forma os nós devem
escalonar o uso de seus recursos de forma que a alocação seja a mais eficiente
possível, evitando-se sobrecarga nos servidores da CDN e nos canais de
comunicação. Em sistemas dessa natureza, os nós estão sempre acessando e
disponibilizando recursos uns dos outros, ao mesmo tempo que os servidores da
CDN organizam os nós da rede P2P e mantêm os serviços de distribuição mais
estáveis, tornando o sistema menos vulnerável ao dinamismo de participação dos
nós de uma redes P2P, também chamado de \textit{churn}~\cite{Stutzbach:2006:UCP:1177080.1177105,5502009}.

% chegada e partida de nós, tempo de disponibilidade, heterogeneidade quanto a
% capacidade de \textit{download} e \textit{upload} etc.

Isto posto, os cenários de aplicação considerados neste trabalho são os que
apresentam um nó de rede gerador de um conteúdo multimídia e milhares de nós
receptores, estabelecendo portanto uma relação \mys. Tais aplicações
possuem uma característica em comum: a existência de muitos usuários
interessados por um mesmo conteúdo e pouco ou nenhum dado individualizado, ou
seja, que precisa ser transmitido apenas para um usuário ou um grupo restrito
deles. Esta característica leva às seguintes peculiaridades:

\begin{enumerate}
 \item o usuário de um potencial nó contribuidor tem que expressar interesse em
um determinado evento no instante da sua ocorrência e não quando já possui o
conteúdo a ser compartilhado, como nos sistemas P2P de compartilhamento de
arquivo. Além disso, as parcerias são realizadas entre os nós com interesses
comuns por um único conteúdo e não por múltiplos conteúdos ao mesmo tempo;

 \item quando o usuário de um potencial nó contribuidor não tem interesse em um
conteúdo, a aplicação, na maioria das vezes, não é executada e portanto a
dependência pelo oportunismo é mais crítica do que nos sistemas de
compartilhamento de arquivos. Isto torna a rede mais dinâmica e consequentemente
os serviços mais instáveis -- há um impacto direto nos parâmetros que determinam
a satisfação do usuário ao reproduzir um conteúdo multimídia devido ao aumento
do \textit{churn};

  \item o estado do mapa de \textit{buffer} de reprodução de cada nó da rede é semelhante, pois não existe a possibilidade de um nó ter um mapa de \textit{buffer} com muito mais dados para reproduzir do que outros nós. Da mesma forma, não faz sentido manter por muito tempo dados já reproduzidos no \textit{buffer} de reprodução. Os datagramas expiram rapidamente\footnote{Em aplicações de transmissão multimídia ao vivo, estima-se \textit{jitter} no máximo de \ut{180}{ms}} e, nestes casos, as aplicações os descartam após reproduzi-los ao usuário final. Assim, o tamanho necessário para o \textit{buffer} de reprodução deve ser o suficiente para armazenar alguns segundos\footnote{Em geral, adota-se entre 5-8 segundos} da mídia e repassá-la aos nós parceiros, requerendo baixa\footnote{Em geral, com MPEG-4, utilizam-se alguns kilobits até algumas dezenas de megabits por segundo.} capacidade de armazenamento dos processadores de rede (roteadores, pontos de acesso, estações de trabalho, celulares, \textit{tablets} etc.);

  \item os caminhos dos fluxos de dados transmitidos por um mesmo servidor da CDN $s_{1}$ para um conjunto de nós $c_{1} .. c_{n}$, localizados em redes distintas, são mais previsíveis. Isto possibilita parcerias de melhor qualidade ao levar em consideração que é possível determinar pontos de intersecção das rotas desses fluxos de dados, uma vez que estes convergem para um mesmo servidor $s_{1}$. Nestes casos, é possível manter apenas um fluxo de dados e replicá-lo no ponto de intersecção. Além disso, conhecidos os caminhos e suas capacidades de transmissão corrente (produto largura de banda -- atraso), pode-se determinar melhores parcerias, fomentando a cooperação e agrupamento de nós com interesses comuns.

\end{enumerate}

Estas peculiaridades viabilizam uma abordagem muito importante adotada neste trabalho: a participação mais efetiva dos roteadores no processo de distribuição de mídias ao vivo. Isto ocorre ao permitir que os roteadores: (i) constituam uma rede de favores com seleção de nós parceiros (outros roteadores) baseados na capacidade de transmissão dos canais entre os clientes e os servidores; (ii) sirvam como pontes de acesso aos servidores da CDN; e (iii) ajudem na execução do serviço de controle de congestionamento. A principal justificativa para constituir redes de favores entre roteadores é baseada na conjectura de que os roteadores são elementos de rede estáveis com relação a sua disponibilidade se comparados aos sistemas finais, atenuando-se o \textit{churn} das redes em comparação àquelas formadas unicamente por sistemas finais. Como consequência, deve-se permitir que as aplicações forneçam serviços mais estáveis aos usuários. Esta decisão também se baseia no fato de que se existir um nó $c$ interessado por um fluxo de dados $P$, transmitido por um servidor $s$ através de um roteador $r$, os pacotes de dados de $P$ que deverão ser entregues a $c$ passarão obrigatoriamente por $r$.
% Os resultados de medições realizadas no contexto de trabalhos anteriores, como as apresentadas em~\cite{5332297}, corroboram com tal abordagem ao discutir questões relacionadas à localidade de tréfego e o conhecimento que a rede possui sobre os fluxos de dados transmitidos.

De modo a generalizar essa discussão, pode-se afirmar que o uso da abordagem supracitada é justificado por uma tendência em utilizar os roteadores para auxiliar e otimizar os serviços das camadas TCP/IP mais acima, como o NAT dinâmico (\textit{Dynamic Network Address Translation}) através de UPnP (\textit{Universal Plug and Play})~\cite{968819}, DNS dinâmico~\cite{1203676}, controle de congestionamento, dentre outros. Essa tendência é também sustentada pelas Redes Centradas no Conteúdo (\textit{Content-Centric Networks} -- CCN)~\cite{6563278,6231276,5936152,Ghodsi:2011:INS:2070562.2070563}.

O fato é que manter informação de estado sobre a taxa de transmissão por fluxo de dados e definir a nova taxa de transmissão de acordo com eventos de perda não é a melhor abordagem~\cite{983548,Katabi2003,4296812}, prática comum nos algoritmos de controle de congestionamento tradicionais, como os utilizados no TCP. Em vez disso, deve-se utilizar protocolos que permitem a ocupação máxima da capacidade de repasse do roteador ao sinalizar para os fluxos de dados competindo pelo uso do canal qual a taxa de transmissão a ser utilizada, definida de acordo com diversos critérios, tais como a ocupação da fila de roteamento, variação do RTT, etc~\cite{4389799,Dukkipati:2005:PSF:2103175.2103204}. Assim, reduz-se drasticamente as perdas de dados, porque raramente ocorre o transbordo das filas de roteamento; promove-se o compartilhamento equânime do canal e descarta-se a necessidade de procedimentos de inicialização que subutilizam os canais de transmissão, como a fase de partida lenta do TCP~\cite{4346548,Dukkipati:2006:WFT:1111322.1111336}.

Neste contexto, baseando-se em resultados de pesquisas publicados recentemente, fazer uso dos algoritmos de controle de congestionamento assistidos pela rede é a melhor abordagem para realizar controle de congestionamento em transmissões de dados na Internet~\cite{983548}. Sendo assim, convém também utilizá-los para distribuir mídias ao vivo. Não somente com esta finalidade, mas também permitindo-se a formação de parcerias com base em informações explícitas da capacidade de transmissão de um ou mais enlaces, conhecidos à medida que se distribui os pacotes de dados. No escopo deste trabalho tal abordagem é adotada, destacando-se o \textit{Rate Control Protocol} (RCP)~\cite{Dukkipati:2008:RCP:1368746,DBLP:journals/ccr/LakshmikanthaSDMB09,4296812}, adaptado no GMTP e escolhido em detrimento a outros protocolos da mesma classe, como o \textit{eXplicit Control Protocol} (XCP)~\cite{Katabi2003,Katabi:2002:CCH:964725.633035,Katabi:2002:CCH:633025.633035}, o
\textit{Variable-Structure Congestion Control Protocol}
(VCP)~\cite{4460574,Huixiang2008,Vinodhini2012,Zhang:2008:FCV:1424657.1424685,
5260888} e o \textit{Congestion Exposure}
(ConEx)~\cite{RFC6789,ConExGRP,Eardley:2011:DAF:1983741.1983751}. Em um momento oportuno, discutem-se os principais motivos para tal escolha.
% Apesar de citar o ConEx, este não é considerado um protocolo para controle de
% congestionamento propriamente dito, mas pode ser útil em auxiliar uma fonte
% transmissora de um fluxo de dados a expor para a rede informações sobre o
% congestionamento sofrido pelos pacotes anteriormente transmitidos no contexto
% de um fluxo de dados (por exemplo, a quantidade de pacotes perdidos). Em
% seguida, com base nas informações de congestionamento, um algoritmo de
% congestionamento pode tomar decisões para regular a taxa de transmissão mais
% apropriada para os sistemas finais.

Por fim, argumenta-se neste trabalho que ao mover a execução de alguns serviços para o núcleo da rede, ou pelo menos utilizar a rede para auxiliar neste processo, facilita-se o uso de alguns recursos antes difíceis de serem utilizados, tais como transmissões de fluxos de dados em modo \textit{multicast}. No caso do \textit{multicast}, embora esteja disponível há mais de 20 anos, utilizar tal abordagem largamente na Internet não se mostrou uma opção viável e poucas soluções o adotaram largamente na Internet~\cite{6681208,819167}. Isto ocorre devido às barreiras administrativas que dificultam a manipulação de rotas \textit{multicast}, principalmente por conta da dependência do administrador da rede em ter que habilitar explicitamente este tipo de tráfego de dados para um cenário específico de aplicação. Contudo, é possível utilizar \textit{multicast} quando controlado por um protocolo capaz de habilitá-lo/desabilitá-lo automaticamente de acordo com a demanda das aplicações, compartilhando-se os fluxos de dados e mantendo-se o princípio da independência dos serviços de rede, ou seja, sem que a aplicação precise se preocupar como isto é feito.

É no contexto de utilização de conceitos e desenvolvimento de protocolos de redes e sistemas distribuídos para transmissão de mídias ao vivo que se insere esse trabalho, motivado pelo grande interesse de pesquisa, indústria e mercado em evoluir o estado da arte. Para estudar e viabilizar uma solução eficiente com base no escopo apresentado, deve-se abordar problemas relacionados à comunicação multi-ponto, escalabilidade quanto ao número de nós e estratégias otimizadas para utilizar os recursos compartilhados da rede, tendo em vista as métricas que determinam a satisfação de um usuário ao assistir a um evento ao vivo através da Internet.

\section{Descrição do Problema}
\label{sec:problematica}

Nos últimos anos, diversos esforços acadêmicos e da indústria foram feitos para
disponibilizar sistemas de distribuição de conteúdo ao vivo na
Internet~\cite{4251077,6410737,wei_modeling_2011,Rod_Dru_2010,Yin:2009:DDH:1631272.1631279,agarwal_performance_2008,massoulie_rate-optimal_2008,pelc_push--pull_2007,venot_peer--peer_2007,liang_hierarchically_2007,huang_anysee2:_2007,qi_huang_p2p_2007,xinyan_zhang_coolstreaming/donet:_2005,zhang_large-scale_2005,wakamiya_retransmission_2004,castro_splitstream:_2003}. A disseminação de diferentes sistemas e protocolos de rede com este propósito tem levado à pulverização de soluções para transporte de dados, gerando uma falta de padronização na forma como tais sistemas transportam seus dados na Internet, principalmente por tais soluções serem completamente implementadas na camada de aplicação~\cite{yaning_liu_friendly_2008,yan_multimedia-aware_2007,mulabegovic_lightweight_2002}. Isto não seria um problema para a infraestrutura de rede e consequentemente para os sistemas finais se essa pulverização não potencializasse duplicações de fluxos de dados da transmissão de um evento destinado a um sub-conjunto de redes contendo nós receptores interessados em tal
evento~\cite{Pianese2011,5062221,Zhang:2012:SSP:2365364.2365643,6089062,5962881,4395123,Seibert2008,guo_survey_2008,4404148}. Como consequência, exponencia-se o consumo desnecessário de recursos computacionais e de rede.

Para entender o panorama atual nesse contexto, considere o seguinte cenário do
sistema de TV tradicional (teledifusão). Quando uma pessoa está assistindo um
canal e troca para outro, o receptor de sinal de TV consegue interpretar o novo
conteúdo mesmo este sendo transmitido por outra emissora de TV. Para que isto
funcione, existem padrões que descrevem o formato do vídeo/áudio (NTSC, PAL-M,
TVD etc.), a forma como os sinais devem ser transmitidos, em diferentes
frequências e como devem ser codificados/decodificados, de acordo com cada emissora de TV, dentre outros. Isto é possível porque todas as TVs simplesmente seguem padrões, independente da sua marca e modelo, caso contrário, somente conseguiriam interpretar o sinal transmitido por um conjunto restrito de emissoras de TV.

Considerando a analogia anterior, os servidores dos atuais sistemas de distribuição multimídia na Internet são as emissoras de TV, ao passo que as aplicações clientes são os aparelhos de TV. A diferença para a analogia supracitada é que na Internet os sistemas não seguem um padrão para transmitir e receber os dados multimídia e consequentemente uma aplicação cliente de um sistema não consegue reproduzir o conteúdo transmitido pelo servidor de outro sistema. É como se cada TV funcionasse apenas para um determinado conjunto de canais que seguem um determinado padrão, sendo incapaz de reproduzir o sinal de vídeo oriundo de outras emissoras de TV que funcionam com base em outros padrões estabelecidos, incluindo alguns proprietários.

% Apesar de existirem protocolos para a Internet que descrevem o conteúdo da mídia transmitida~\cite{RFC2327,RFC3550,RFC2326}, apenas esta função não é suficiente para promover a distribuição de mídias ao vivo em larga escala, pois atualmente não existe um protocolo que considere toda a complexidade existente em se utilizar as redes orientadas a datagramas, ponderando-se as recentes soluções empregadas nos sistemas mais modernos e estudados neste trabalho. Em vez disso, cada sistema implementa suas próprias formas de transporte de dados, com a execução de ações complexas e não interoperáveis entre diferentes sistemas, predominantemente baseadas nos protocolos RTP/RTSP combinado com o UDP.

A transmissão de múltiplos fluxos de dados com o mesmo conteúdo por parte de diferentes sistemas gera um consumo desnecessário de recursos de rede e, principalmente, a impossibilidade de que dois ou mais nós conectados em sistemas distintos possam cooperar entre si, compartilhando o mesmo fluxo de dados transmitido por um servidor, quando há interesse das partes envolvidas. Por exemplo, é comum encontrar na Internet diversos sistemas de distribuição de conteúdo, cada um com milhares de usuários conectados, porém recebendo fluxos independentes do mesmo jogo de futebol, da corrida de fórmula 1,
etc~\cite{zhao_gridmedia+:_2009,fallica_quality_2008,susu_xie_coolstreaming:_2007,hei_insights_2006,4146695,tran_zigzag:_2003,huang_anysee2:_2007,zhang_large-scale_2005}. A duplicação pode ser percebida até em cenários mais simples, quando dois ou mais nós conectados à Internet através do mesmo provedor estão utilizando diferentes sistemas para assistir ao mesmo evento ao vivo. Idealmente, os nós deveriam compartilhar o mesmo fluxo de dados e cada um apresentar o conteúdo da forma definida pela aplicação, desacoplando a forma de transportar os dados da forma como estes são apresentados pela aplicação aos seus respectivos usuários, como no caso do serviço Web (princípio da independência dos serviços).

% Sendo assim, para fortalecer o argumento de que a interoperabilidade entre os sistemas de distribuição de mídias ao vivo é um problema, considere o exemplo do serviço Web.

O grande sucesso do serviço Web, no ponto de vista de protocolo de comunicação, ocorre devido à independência entre a forma que se desacopla o conteúdo a ser transmitido e a forma de comunicação entre o cliente (navegador) e o servidor (web). Independente do modelo e versão do navegador e do servidor web, todos transportam dados utilizando o protocolo TCP, evitando-se assim a pulverização de diferentes formas de transportar os dados de tal serviço -- fica apenas a cargo do desenvolvedor de cada aplicação decidir como exibir as informações recebidas. Contudo, percebe-se a inexistência de um protocolo equivalente ao TCP adequado para os sistemas de distribuição de conteúdos multimídia, apesar da grande demanda e sucesso de utilização dos mais variados sistemas de transmissão multimídia disponíveis na Internet~\cite{huang_anysee2:_2007,4378429,4797218,5456206,zhao_gridmedia+:_2009,li_towards_2008,meng_zhang_understanding_2007,5373760,Alhaisoni2009,4575245,5734106,Yin:2010:LEC:1823746.1823750,4498187,Jannotti:2000:ORM:1251229.1251243,castro_splitstream:_2003,5935134,hei_insights_2006,4803721,Hefeeda:2003:PPM:957013.957022,4146695,6689688,Roverso2012,fallica_quality_2008,4284671,5580077,tran_zigzag:_2003}.

% Nesse contexto, a arquitetura de serviço P2P~\cite{kurose2006} combinada com o \textit{Application Layer Multicast - ALM}~\cite{ALMbook2009} é uma abordagem interessante que explora os aspectos de compartilhamento de fluxo de dados, mas os desenvolvedores ainda continuam obrigados a embutir, na implementação, diretrizes do P2P/ALM, em vez de utilizá-las como os desenvolvedores de navegadores web ou de serviços web fazem: delegar ao TCP algumas importantes responsabilidades e generalizar o processo. O TCP abstrai toda complexidade de algumas responsabilidades da camada de aplicação, tal como garantia de entrega de dados, ordenação de segmentos, controle de congestionamento etc. Algumas funções implementadas em soluções P2P/ALM estão consolidadas e bastante utilizadas nos sistemas de distribuição de conteúdos multimídia ao vivo, cada um a sua maneira e, mesmo que sejam similares, ainda são incompatíveis.

Atualmente, a visão supracitada (HTTP + TCP) não é empregada na Internet para o caso de distribuição de conteúdos multimídia ao vivo, pois a maioria dos serviços de transporte da Internet se limitam a oferecer recursos que auxiliam aplicações elásticas, não oferecendo recursos para auxiliar a execução dos sistemas de distribuição de conteúdos multimídia ao vivo -- a Internet não foi primariamente projetada para este fim. Por esse motivo, nos últimos anos, propuseram-se diversas soluções de aplicação baseadas em arquiteturas P2P e/ou CDN (P2P/CDN) para distribuição de mídias ao vivo, a fim de mitigar a falta de serviços de rede mais específicos e melhorar a qualidade das transmissões desse tipo de dados. Propuseram-se também protocolos de transporte a fim de suprir as necessidades de serviços de rede das aplicações multimídia, como o \textit{Datagram Congestion Control Protocol}(DCCP)~\cite{citeulike:943036,RFC4340}. Apesar de proporcionarem melhorias às aplicações, as soluções existentes ainda são insuficientes para atender à demanda crescente dos serviços de distribuição de mídias ao vivo, de modo que ainda é possível aprimorá-los em escala e em qualidade.

No caso das soluções baseadas em P2P/CDN, utilizam-se \textit{middlewares} que implementam as principais funções necessárias para distribuição de conteúdos multimídia ao vivo. Devido à existência de diferentes opções, cada sistema faz uso de um \textit{middleware} específico (quando o fazem), causando um problema de interoperabilidade entre os sistemas devido à incompatibilidade entre as diferentes propostas. A questão é que os \textit{middlewares} encapsulam e compartilham recursos computacionais complexos para desenvolver aplicações de rede, mas não encapsulam e tampouco compartilham a forma que os nós deveriam se comunicar. Por exemplo, o TCP provê serviços primitivos ao funcionamento do serviço Web (conexão, garantia de entrega, ordenação dos pacotes de dados etc.), ao passo que as aplicações -- clientes (navegadores) e servidores (web) processam o conteúdo a fim de apresentá-lo aos usuários finais. Em essência, as minúcias de comunicar diferentes nós em uma rede é responsabilidade da infraestrutura de rede e não das aplicações. A falta de interoperabilidade tem importância crítica para o caso dos atuais sistemas de distribuição de mídias ao vivo: delega-se muitas responsabilidades às aplicações, que passam a ter que tratar problemas que não existiriam se a rede oferecesse um melhor suporte para essa classe de aplicação. Como consequência, as aplicações se tornam soluções limitadas às estimativas sub-ótimas sobre a real disponibilidade dos recursos de rede, uma vez que não existe um protocolo equivalente ao TCP que provê os serviços primitivos ao funcionamento de tais sistemas.
% Apesar de compatibilidade entre diferentes soluções ser uma decisão
% dos provedores de serviço, neste trabalho, a incompatibilidade de tais sistemas
% é considerada uma propriedade crítica para os casos em que o provedor deseja
% distribuir seu conteúdo de forma aberta, sem qualquer controle de acesso, tal
% como ocorre em sistemas de TVs tradicionais e abertos. Para estes casos, a
% incompatibilidade entre as soluções existentes passa a ser um fator a ser
% considerado. É por questões de compatibilidade nas camadas mais abaixo que se
% conseguiu escalar o serviço Web.

\begin{figure}[b!ht]
  \centering
  \subfigure[Distorção da mídia.]{% 
    \includegraphics[width=.476\textwidth]{imgs/results/problematica-distortion} \label{fig:problematica-distorcao} 
  } 
  \quad 
  \subfigure[Sobrecarga de controle.]{% 
    \includegraphics[width=.476\textwidth]{imgs/results/problematica-packet_control} \label{fig:problematica-sobrecarga}
  } 
  \caption{Confronto entre os sistemas Denacast/CoolStreaming e CCN-TV para as métricas distorção e sobrecarga de controle. Transmitiu-se uma mídia do tipo MPEG4-II, com taxa variável de bits de \ut{1}{Mbps}, através de uma rede simulada com 324 roteadores e diferentes larguras de banda. Mais detalhes sobre este experimento estão disponíveis no Capítulo~\ref{cap:analisedesemp} e no Apêndice~\ref{app:detalhes-experimentos}.} 
  \label{fig:problematica-dena-ccn}
\end{figure}

Para instanciar um cenário de desempenho do estado da prática e do estado da arte nesse contexto, observe a Figura~\ref{fig:problematica-dena-ccn}, a respeito de duas proeminentes propostas estudadas no contexto deste trabalho: o Denacast/CoolStreaming~\cite{Jahromi2012} e o CCN-TV~\cite{6550523}. Com relação à métrica qualidade da mídia transmitida, ilustrada na Figura \ref{fig:problematica-distorcao}, o Denacast/CoolStreaming obtém um desempenho degradante à medida em que aumenta-se o número de clientes interessados pela mesma mídia. Apesar de obter um melhor desempenho se comparado ao Denacast/CoolStreaming, observa-se também um comportamento similar no caso da CCN-TV. Por outro lado, com relação à métrica sobrecarga de controle, ilustrada na Figura~\ref{fig:problematica-sobrecarga}, observa-se uma inversão no desempenho dos sistemas estudados, constatando-se que o Denacast/CoolStreaming obtém melhor desempenho com relação ao CCN-TV. O Denacast/CoolStreaming pertence à categoria das soluções disponíveis na camada de aplicação, ao passo que o CCN-TV pertence à categoria das redes que oferecem serviços de distribuição de conteúdo, no caso a CCN. Enquanto a primeira executa suas próprias estratégias de distribuição de mídia, a segunda utiliza um modelo de serviço não apropriado para este tipo de tráfego de dados, evidenciando-se lacunas para avançar o estado da arte e propor soluções mais otimizadas.

Cenários como estes têm sido observado nos últimos anos, onde os pesquisadores têm apresentado diversas estratégias para otimizar a distribuição de mídias ao vivo na camada de aplicação, quando na verdade o problema é de infraestrutura, não se disponibilizando um protocolo que generalize os serviços comuns dos sistemas de distribuição de mídias ao vivo. Como ilustra-se na Figura~\ref{fig:protocolo-modelagem-p2p}, as aplicações e/ou \textit{middlewares} implementam funções para tratar aspectos de conexão multi-ponto e diferentes topologias~\cite{4404148,5158452,Wu:2008:ELP:1386109.1386112,4215750,5061910,Garroppo:2012:TCS:2160187.2160451,4644134}; seleção de
nós~\cite{6077007,Dai:2009:SPP:1478659.1478730,Tang:2008:EPS:1792514.1792556,6214363,5580021}; tolerância a desconexões e outros problemas causados pelo
\textit{churn}~\cite{5502009,Vassilakis:2010:MNC:1838764.1838902,cui_optimizing_2008,Garroppo:2012:TCS:2160187.2160451,6354810,5158452}; disponibilização de informação de contexto sobre rede para dar suporte à execução dos serviços das aplicações, como localização da rede, medições e custos entre redes para melhorar a qualidade de serviços dos sistemas
finais~\cite{6115303,5284511,6077007,Madhyastha:2009:INP:1558977.1558987}; estratégias para incentivos à cooperação entre nós~\cite{Agarwal:2007:AIG:1287576.1340418,5451106,Agarwal:2006:GBS:1193215.1194219,1309377,6185363,1388342,5580021}; algoritmos para inibir a participação de nós \textit{free-riders}~\cite{1309377,5161007,5421459,4608940}; adaptação de fluxo baseado na capacidade de recepção dos nós~\cite{4251079,6713779,Pantos2013,6077864}; e segurança~\cite{vieira_borges_2010,4539702,4738451,865073,1388342}. De fato, neste trabalho, questiona-se a real necessidade de se tratar os problemas supostamente resolvidos por essas funções e, nesse ínterim, identifica-se quais desses serviços poderiam ser melhor aproveitados se posicionados e adaptados nas camadas apropriadas da pilha de protocolos TCP/IP.

\begin{figure}[b!ht]
\begin{center}
\includegraphics[scale=.78]{imgs/protocolo-modelagem-p2p.pdf}
\end{center}
\vspace{-1cm}
\caption{Funções de aplicação de distribuição de mídias ao vivo baseadas em P2P/CDN.}
\label{fig:protocolo-modelagem-p2p}
\end{figure}

O fato é que os temas supracitados foram ganhando importância ao longo dos anos porque os serviços de transmissão de mídias ao vivo se popularizaram, ao passo que surgiram mais necessidades de sofisticar as aplicações a fim de melhorar seu desempenho em entregar os fluxos de dados para uma população crescente de sistemas finais, com diferentes tipos de conexão e mobilidade. Apesar da arquitetura da Internet ser modularizada em camadas funcionais, as soluções promovidas no contexto dos referidos temas não foram disponibilizadas estrategicamente nas camadas corretas, mas sim apenas na camada de aplicação. Isto se explica pelo fato de que é muito mais fácil desenvolver uma solução na camada de aplicação do que em outras camadas mais abaixo, não apenas por aspecto de facilidade de implementação de software, mas também de implantação em larga escala na Internet, pois todas as outras camadas estão implementadas do sistema operacional para baixo.

A forma mais básica para distribuir conteúdos e já conhecida há pelo menos 3 décadas é o IP \textit{multicast}~\cite{guo_survey_2008}.
% Um nó transmissor de uma mídia ao vivo se torna a raiz de uma árvore \textit{multicast} e os clientes recebem o conteúdo do vídeo através dos vários nós desta árvore, formada pelos roteadores que suportam \textit{multicast} em nível de IP.
Apesar de melhorar escalabilidade no número de receptores do mesmo conteúdo ao vivo, tal estratégia foi considerada insuficiente devido à complexidade de habilitá-la e mantê-la, principalmente em grande escala~\cite{castro_splitstream:_2003}. Para contornar a dificuldade em habilitar o modo \textit{multicast} em nível de IP, propôs-se a arquitetura ALM (\textit{Application Layer Multicast})~\cite{Banerjee:2002:SAL:964725.633045}, que é equivalente ao IP \textit{multicast}, porém implementada em nível de aplicação. A diferença entre o IP \textit{multicast} e o ALM é que no primeiro os roteadores duplicam e repassam os datagramas para os próximos roteadores até alcançar os sistemas finais, ao passo que no ALM os sistemas finais executam as ações citadas anteriormente, mas ainda dependem de funções de rede de mais baixo nível, o que pode aumentar o tempo de processamento e a complexidade da aplicação. Existem diversos \textit{middlewares} baseados em ALM e estes implementam suas próprias interfaces de uso e funcionalidades, incompatíveis entre
si~\cite{Yeo:2003:FMV:947820.947823,Banerjee:2006:OEO:1141103.1648579,1258118,jannotti_overcast:_2000,Kwon:2005:POM:1052084.1648646,1575808,castro_splitstream:_2003}. Sendo assim, a questão de interoperabilidade dos sistemas de distribuição de mídias ao vivo vem à tona mais uma vez.

% Em tal abordagem, os algoritmos de seleção de nós utilizam informações de
% contexto para selecionar nós parceiros de melhor qualidade e assim melhorar a
% experiência do usuário e reduzir a carga
% sobre os provedores de conteúdo. As informações de contexto podem ser o estado
% do \textit{enlace}, distância física entre dois nós, atraso etc. Um esforço de
% pesquisa para este fim é uma proposta conhecida pelo nome de ALTO
% (\textit{Application-Layer Traffic Optimization})~\cite{ALTO}, que prover às
% aplicações informações de contexto e então alimentar os algoritmos de seleção
% de nós parceiros.

Uma possível proposta seria se os protocolos de transporte atuais (TCP, UDP, DCCP, SCTP etc.) pudessem absorver parte da complexidade dos serviços de distribuição multimídia, mas não o fazem porque não foram projetados para atender às necessidades peculiares desse tipo de serviço e alterá-los requereria um grande esforço, ao ponto de culminar em um novo protocolo de rede. Este fato acontece basicamente por dois motivos. O primeiro é um motivo histórico (no caso dos protocolos mais antigos, como o TCP e o UDP), pois na época de suas propostas não se discutia sobre sistemas de distribuição de mídias ao vivo. O segundo motivo é que mesmo os protocolos mais recentes (DCCP, SCTP etc.) não acompanharam a evolução das boas práticas no processo de distribuição de mídias ao vivo, como o uso de arquiteturas P2P/CDN e as diversas funções empregadas nesse contexto.

% Uma possível proposta seria se os protocolos de transporte atuais pudessem absorver parte da complexidade dos serviços de distribuição multimídia, mas não o fazem porque não foram projetados para atender às necessidades peculiares desse tipo de serviço e alterá-los requiriria um grande esforço, ao ponto de culminar em um novo protocolo de rede. Este fato acontece basicamente por dois motivos. O primeiro é um motivo histórico (no caso dos protocolos mais antigos, como o TCP e o UDP), pois na época de suas propostas não se discutia sobre sistemas de distribuição de mídias ao vivo. O segundo motivo é que mesmo os protocolos mais recentes (DCCP, SCTP etc.) não acompanharam a evolução das boas práticas no processo de distribuição de mídias ao vivo, como o uso de arquiteturas P2P/CDN e as diversas funções empregadas nesse contexto.

Para instanciar a discussão anterior, considere o caso do protocolo DCCP, proposto como um protocolo de transporte para transmissão de mídias ao vivo na Internet. O fato é que o DCCP é um protocolo orientado à conexão e portanto para cada novo usuário interessado em receber um fluxo multimídia transmitido, uma nova conexão se faz necessária, não havendo a possibilidade de compartilhamento entre diferentes nós interessados pelo mesmo conteúdo, pelo menos de forma automática e transparente para as aplicações. Este cenário é motivador para que os desenvolvedores de aplicações continuem tentando resolver na camada de aplicação, de forma recorrente e paliativa, um problema que é de infraestrutura de rede. É evidente que os sistemas atuais podem passar a utilizar o DCCP para transportar os segmentos de mídias ao vivo, mas o DCCP apresenta problemas críticos quanto à escalabilidade devido ao mecanismo de conexão e proposta de controle de congestionamento fim-a-fim e portanto os problemas discutidos até aqui continuariam explícitos na camada de aplicação. Estas limitações do DCCP foram constatadas em estudos preliminares realizados no contexto deste trabalho~\cite{6214362,leandro-Globecom-2011,leandro-WP2P-2011}.

% Embora esta seja uma discussão teórica, simulações foram realizados em busca de evidências mais contundentes de que este fato pode ocorrer na prática. Em~\cite{6214362,leandro-Globecom-2011,leandro-WP2P-2011}, apresentam-se os  resultados sobre estas simulações que, em resumo, apenas fluxos DCCP foram suficientes para causar o problema em questão, sequer utilizou-se fluxos de outros protocolos. Em situações mais realistas, o problema se agrava porque o protocolo DCCP disputará o canal de transmissão não apenas com fluxos DCCP, mas também com fluxos de outros protocolos, por exemplo TCP, UDP e SCTP~\cite{iyengar_concurrent_2006,huang_multimedia_2011}. Dessa forma, há um impasse em se utilizar DCCP nas aplicações multimídia porque as aplicações são forçadas a utilizar controle de congestionamento fim-a-fim e são submetidas a um mecanismo de conexão ponto-a-ponto, delegando-se a responsabilidade de conexão multi-ponto à aplicação.

Apesar do protocolo DCCP ter sido utilizado para evidenciar parte dos problemas que acabara de ser apresentado, esta discussão pode ser generalizada para qualquer outro protocolo de rede que seja orientado à conexão e que realize controle de congestionamento de fluxos individualmente. A fim de aumentar a
representatividade de protocolos nesse contexto, o leitor pode consultar outros
trabalhos disponíveis através das referências~\cite{4146841,goutelle2004,CONG:Floyd00:TFRC:art,Sangtae2008,RFC3649,5472999,veno2003,464716,5735831,5560080,4579599,brosh_delay-friendliness_2010,lucas_fair_2009,ju-won_park_tcp-rome:_2008,elaarag_tcp_2008,RFC4960,lin_ma_congestion_2007,yongxiang_liu_tcp-cm:_2002,brassil_structuring_2002,banerjea_tenet_1996} e no Capítulo~\ref{cap:trabalhosrelacionados} deste documento.

% Os protocolos de transporte mais modernos realizam estabelecimento de conexão um-para-um e realizam controle de congestionamento por fluxo de dados, resultando em dois problemas:
% 
% \begin{enumerate}
% 
%   \item \textit{excessivo consumo de recursos computacionais}: para cada nova conexão, o nó transmissor deve alocar recursos computacionais (memória e processamento) para tratar cada nova conexão. Em cenários de transmissão multimídia \mys, se muitos nós estão conectados em um único servidor, eleva-se o consumo de recursos computacionais do nó transmissor proporcionalmente à quantidade de nós receptores interessados pelo fluxo multimídia transmitido. Além disso, embora o conteúdo transmitido por um nó seja de interesse de muitos outros nós, os fluxos são mantidos independentemente uns dos outros, o que gera duplicações desnecessárias e consequentemente desperdício de recursos de rede. Em~\cite{guo_survey_2008}, apresenta-se discussões notáveis sobre as consequências desta estratégia sobre as aplicações de rede.
% 
%   \item \textit{a taxa de transmissão de fluxos DCCP individualmente tenderá a 0 (zero)}: utiliza-se uma equação matemática para definir a taxa de transmissão durante uma conexão. À medida que mais nós se conectam a um nó transmissor, menor será a taxa de transmissão do nó transmissor para cada um dos nós receptores conectados a ele. Para a rede, esta estratégia é equânime e evita que a mesma entre em colapso de congestionamento, mas para cada fluxo de dados isto é ruim. O problema é que à medida que se transmitem novos fluxos de dados na rede, aloca-se uma menor a taxa de transmissão individual para cada um fluxo dos fluxos. A questão é que a taxa de transmissão pode se tornar insuficiente para a recepção de um fluxo multimídia e, por consequência, nenhum nó receptor conseguirá reproduzir a mídia ao usuário final sem interrupções ou possíveis erros, embora todos os fluxos utilizarão o canal de forma equânime.
% % Este problema tem uma relação estreita com o dilema observado por Garrett Hardin em 1968 e denominado de Tragédia dos Bens Comuns (\textit{Tragedy of the Commons})~\cite{tragcomHardin}, presente em diferentes áreas do conhecimento. No caso de protocolos como o DCCP, a tragédia dos bens comuns ocorre porque, 
% 
% \end{enumerate}
% 
% Desta forma, apesar de os algoritmos de controle de congestionamento buscarem
% convergir para o caso do melhor global (equidade para com todos os fluxos e
% assim evitar congestionamento da rede), isto provoca o efeito do caso do pior
% local (redução da taxa de recepção de cada nó da rede). Este fato pode ser
% explicado analiticamente utilizando como base a Equação~\ref{eq:dccpeq-ccid3},
% que define cada taxa de transmissão \textit{$X_i$} para realizar o controle de
% congestionamento em cada fluxo~\cite{Chiu:1989:AID:70207.70208}. Para efeito de
% estudo, escolheu-se a equação do protocolo DCCP/CCID3, mas poderia-se utilizar equações similares propostas em outros algoritmos para controle de congestionamento. Nesta equação, define-se:
% 
% \begin{itemize}
%  \item \textit{$X_i$} é a taxa de transmissão em bytes/segundo;
%  \item \textit{s} é o tamanho do pacote em bytes;
%  \item \textit{R} é o RTT (\textit{Round Trip Time}) em segundos;
%  \item \textit{p} é a taxa de ocorrência de perdas, entre 0 e 1;
%  \item \textit{RTO} (\textit{Retransmission TimeOut}) é o valor do temporizador
% de retransmissão do TCP em segundos; e
%  \item \textit{b} é igual a 1 (no DCCP) e representa o número máximo de pacotes
% confirmados por um único ACK.
% 
% \end{itemize}
% 
% Considerando o problema descrito anteriormente, o uso total da capacidade do
% canal por \textit{N} fluxos DCCP pode ser definido por $C = \sum_{i=1}^{N}
% X_i$. Em condições severas de congestionamento na rede, o valor de \textit{C} é
% equivalente à largura de banda do canal de transmissão. Quando isto ocorre,
% tem-se que \textit{N} atingiu um valor maior do que a rede suporta, fazendo com
% que os \textit{buffers} de recepção dos roteadores alcancem seus limites e
% portanto os valores de \textit{p} e \textit{R} na Equação~\ref{eq:dccpeq-ccid3}
% também aumentam, resultando que o $\displaystyle\lim_{N\to\infty}\frac{C}{N} =
% 0$, logo, $X_i$ se aproxima de 0 (zero).
% 
% \begin{equation}
% X_i = \frac{s}{R \times \sqrt{2 \times b \times \frac{p}{3}} + (RTO \times 3
% \sqrt{3 \times b \times \frac{p}{8}} \times p \times (1 + 32 \times p^{2})}
% \label{eq:dccpeq-ccid3}
% \end{equation}
% 
% \vspace{0.5cm}


% Como consequência, toda transmissão na
% prática termina sendo de múltiplos fluxos \textit{unicast} e
% independentes entre si, apesar dos esforços arquiteturais com o uso de P2P e da
% CDN. Isto ocorre porque os protocolos de transporte essencialmente funcionam em
% modo \textit{unicast}, com a carga para distribuição do conteúdo multimídia sob
% responsabilidade dos servidores das redes CDN, com auxílio cooperativo dos nós
% das redes P2P, nos melhores casos.


% % Para contornar os problemas discutidos, torna-se imprescindível projetar um protocolo de rede com vistas a reduzir a pulverização dos sistemas de distribuição de conteúdo. Uma proposta inspirada em casos consistentes ao longo dos anos, como o serviço Web, e que considere a evolução do estado da arte como aliado nesse processo. Por exemplo, pode-se (re)visitar as principais propostas e funções já consolidadas no contexto das redes P2P, os algoritmos de controle de congestionamento assistidos pela rede que, comprovadamente, fazem melhor uso dos recursos de rede e os novos conceitos das redes centradas na Informação.
% % ~\cite{Sangtae2008,veno2003,RFC3649,Ha2007,4146841,shalunov2011,464716}.

% Diante do exposto, pretende-se responder a seguinte questão de pesquisa: \textit{como distribuir conteúdos multimídia ao vivo na Internet, evitando o fenômeno da tragédia dos bens comuns dos protocolos de transporte, permitindo a interoperabilidade entre os sistemas com base no princípio da independência dos serviços de rede?} Uma pergunta secundária, mas não menos importante é: \textit{como seria o projeto de uma nova arquitetura de distribuição de mídias ao vivo na Internet?}

Diante do exposto, remete-se esta pesquisa ao estudo de técnicas e mudança na perspectiva da execução de serviços de rede em camadas inferiores a da aplicação, buscando-se melhorias substanciais na execução dos sistemas de distribuição de mídia ao vivo, permitindo-se que a rede desempenhe um papel mais efetivo nesse processo. Por isto, pretende-se responder a seguinte questão de pesquisa: \textit{como distribuir conteúdos multimídia ao vivo em larga escala, abstraindo-se a complexidade e promovendo-se a interoperabilidade entre os sistemas com base no princípio da independência dos serviços de rede?}

% Uma pergunta secundária, mas não menos importante é: \textit{quais e como deveriam funcionar os serviços disponíveis na infraestrutura de rede para dar suporte à distribuição de mídias ao vivo se a Internet fosse proposta nos dias atuais, mas considerando-se os conhecimentos adquiridos com a evolução dos sistemas para este fim?}

% % Observando esta questão que deu origem às pesquisas desenvolvidas
% % neste trabalho, propõe-se a seguinte tese de doutorado:

% \section{Hipótese}

Para responder a questão supracitada, adota-se a seguinte hipótese: \textit{a constituição de uma rede de favores entre roteadores que interceptam, realizam \textit{cache} temporário e compartilham pacotes de dados tanto em modo \textit{multicast} quanto em modo \textit{unicast}, auxiliados por servidores para determinar as parcerias com base em um algoritmo para controle de congestionamento assistido pela rede, resulta na distribuição mais eficiente (escala e qualidade) de mídias ao vivo}.

% possibilita a maximização do uso dos recursos de rede,
% a independência dos sistemas e

% Para o problema em questão é adotada a hipótese de que \textit{a constituição
% de uma rede de favores entre roteadores que compartilham fluxos de dados
% transmitidos por servidores de uma CDN, através do uso transparente (para a
% aplicação) de \textit{multicast} negociado no processo de estabelecimento de
% conexão entre os nós transmissores e receptores, com o auxílio de um algoritmo
% de controle de congestionamento assistido pela rede, possibilita a distribuição
% em larga escala de conteúdos multimídia ao vivo}.

\section{Objetivos}

Neste trabalho, o objetivo é o projeto e a avaliação de um protocolo de rede denominado \textit{Global Media Transmission Protocol} (GMTP), que considera uma arquitetura híbrida P2P/CDN para distribuição de mídias ao vivo através da Internet. Mais especificamente, propor um protocolo que explora a relação entre o escalonamento de recursos computacionais em redes P2P, a estabilidade das redes CDN através da proposição de técnicas (algoritmos) que possam aumentar a eficiência de um sistema através da avaliação das métricas que determinam a qualidade de serviço quando usuários reproduzem uma mídia ao vivo através de uma rede. 

% mitigar a complexidade no processo de construção dos sistemas de distribuição de mídias ao vivo na Internet.

Inicialmente, propõe-se dar um passo atrás e repensar \textit{distribuição de mídias ao vivo em uma rede de datagramas IP} com a premissa de que a interoperabilidade dos sistemas é interesse geral de seus fornecedores a fim de permitir que os datagramas referentes a uma mídia ao vivo sejam reproduzidos nas aplicações dos usuários finais o mais rápido possível e com melhor qualidade, sem preocupações com restrições comerciais.

% Com o uso de tal protocolo largamente, objetiva-se permitir que a Internet se torne uma grande e única rede de favores para o fim que se discute.

%  ao mover diversas funções atualmente implementadas nesses sistemas para as camadas de transporte e rede, a fim de utilizar eficientemente os recursos de rede e consequentemente melhorar a qualidade da experiência do usuário ao reproduzir um conteúdo ao vivo na Internet.

Pode-se dividir o objetivo principal deste trabalho nos seguintes objetivos específicos (fases):

\begin{enumerate}

  \item compreender os sistemas e protocolos para distribuição de conteúdos multimídia baseados em arquiteturas P2P/CDN, com suporte a controle de congestionamento e transmissão \textit{multicast} na camada de aplicação. Além disso, revisar as propostas proeminentes nesse contexto, a fim de  entender quais outras funções estão presentes nesse tipo de sistema e compará-las ao GMTP;

  \item projetar o GMTP e discutir as principais funcionalidades com vista à distribuição de mídias ao vivo. Além disso, implementar o GMTP em um ambiente que proporcione a obtenção de valores para as métricas que determinam a experiência de um usuário ao assistir a um evento ao vivo através de uma rede, permitindo-se estudá-lo por meio de diferentes configurações, entender suas vantagens, limites e os impactos que seus recursos podem gerar tanto sobre os nós quanto sobre a rede;

  \item avaliar e discutir o protocolo GMTP em comparação ao estado da arte, discutindo-se sobre suas vantagens e desvantagens.

\end{enumerate}

\section{Relevância do Tema e da Tese}

Distribuição de mídias ao vivo é um tema relevante no contexto de redes de computadores devido aos recentes interesses dos usuários por esse serviço, em particular, na Internet, como se discutiu na Seção~\ref{sec:delimitacao}.

Combinar tópicos específicos do tema estudado em uma solução para melhorar a experiência do usuário ao reproduzir um conteúdo ao vivo é um grande desafio, principalmente devido à consolidação de algumas soluções em paralelo ao surgimento de novas técnicas, métodos e/ou paradigmas, como as redes centrada na Informação e os algoritmos para controle de congestionamento assistidos pela rede. A distribuição de conteúdos multimídia em larga escala é cada vez mais relevante devido às funções e problemas inerentes a essa classe de aplicação, bem como os cenários considerados na Internet, considerando diferentes topologias de rede e heterogeneidade de nós. Estas características, aliadas à transparência da solução na perspectiva do desenvolvedor da aplicação, tornam o tema ainda mais relevante para o contexto de boas práticas em disponibilizar serviços multimídia na Internet.

Nesse contexto, apesar das soluções existentes resolverem parte do problema em discussão, principalmente quando se utiliza redes de distribuição de conteúdo, argumenta-se que ainda é possível obter melhores resultados quanto ao desempenho dos sistemas, não somente na perspectiva do consumo de recursos de rede, mas também do estado da prática no que diz respeito à forma que tais sistemas são desenvolvidos. No que diz respeito à relevância do trabalho na perspectiva de engenharia de software para sistemas distribuídos, considera-se indispensáveis três principais requisitos que estão sendo contemplados e que reforçam a relevância da tese. Estes requisitos servem como motivação para a realização das atividades que foram desenvolvidas ao longo deste trabalho.

\textit{O primeiro requisito é a consistência teórica}. O protocolo de rede proposto foi
concebido a partir de evidências sólidas com base nos trabalhos anteriormente
publicados e em simulações de rede, com o problema-chave apresentado e discutido por meio de fundamentos matemáticos e provas contundentes obtidas com o uso de um confiável simulador de rede. Propõe-se a descrição do protocolo de forma rigorosa e não-ambígua, permitindo um melhor entendimento e futuros
investimentos no protocolo teórico proposto.

\textit{O segundo requisito é a contribuição científica}. Diversos trabalhos relacionados foram estudados antes da concepção do protocolo proposto. A partir deste estudo, identificou-se o problema anunciado anteriormente e foram elencadas as possíveis soluções para o problema, o que culminou com a definição deste trabalho. Até o momento da escrita deste documento, não foram encontrados trabalhos que combinem as características aqui propostas com base no objetivo supracitado, o que reforça o caráter de originalidade e contribuição científica, a qual já vem sendo respaldada pela comunidade através da publicação de artigos em veículos relevantes da área e pelo interesse industrial, como apresentado na Seção~\ref{sec:publicacoes}.

\textit{O terceiro requisito é o potencial prático}. A implementação do protocolo de rede, assim como o conjunto de ferramentas desenvolvidas e que serão mantidas, tem como objetivo demonstrar que a abordagem é viável e praticável.
% Um protocolo de rede simplesmente especificado sem nenhuma implementação real tornaria as reais contribuições deste trabalho apenas suposições.
O compromisso com a utilização dos conceitos para construir soluções que possam ser aplicadas na indústria, torna o trabalho relevante em termos práticos, sobretudo em escala global na Internet.

\section{Estrutura do Documento}

O restante deste documento está organizado da seguinte forma:

\begin{itemize}
  \item No Capítulo~\ref{cap:fundamentacao}, apresentam-se os principais
conceitos relacionados aos sistemas de distribuição de mídias ao vivo em
arquiteturas P2P.

  \item No Capítulo~\ref{cap:trabalhosrelacionados}, apresentam-se os trabalhos relacionados a esta pesquisa, destacando-se os principais avanços científicos no que diz respeito aos protocolos e sistemas de distribuição de mídias ao vivo.

  \item No Capítulo~\ref{cap:mudccp}, apresenta-se o protocolo \textit{Global Media Transmission Protocol} (GMTP).

%   \item No Capítulo~\ref{cap:mudccp-tecnica} continua-se com as discussões
% sobre o protocolo \mudccp, porém fornecendo-se detalhes acerca do funcionamento
% do protocolo no tocante a três principais aspectos, o cabeçalho de pacotes, o
% processo de conexão e o mecanismo para controle de congestionamento.

%   \item No Capítulo~\ref{cap:metodosexperimentos}, apresentam-se  são apresentados os métodos e
% experimentos adotados neste trabalho, destacando-se o mecanismo estatístico
% utilizado para obtenção de métricas específicas a fim de analizar o desempenho
% do protocolo \mudccps em transmissões de fluxos de dados multimídia.

  \item No Capítulo~\ref{cap:analisedesemp}, apresentam-se os resultados sobre o desempenho do protocolo GMTP quando confrontado com duas outras proeminentes soluções disponíveis na literatura.

  \item Por fim, no Capítulo~\ref{cap:conclusao}, apresentam-se as considerações finais, discutindo-se os principais tópicos elencados neste trabalho, conclusões e trabalhos futuros.
\end{itemize}
