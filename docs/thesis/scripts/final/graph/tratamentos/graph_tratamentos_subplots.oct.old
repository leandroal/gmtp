#!/opt/local/bin/octave -q

# colors: "blue", "black", "cyan", "green", "magenta", "red", "white", and "yellow"


# Graph setup
axissize = 14;
ticksize = 10;
borderlinesize = 1;
markersize = 2;
plotlinewidth = 3;
legendfontsize = 14;

graphdata_denacast=load("-force", "../../../parser/results/denacast-tratamento.txt");
graphdata_ccntv=load("-force", "../../../parser/results/ccntv-tratamento.txt");
graphdata_gmtp=load("-force", "../../../parser/results/gmtp-tratamento.txt");

f = gcf();
set(f,"visible","off") 

function setup_axies(borderlinesize, ticksize, ylimit, xticklabel, isyticklabel)
    set(gca(),
        "ylim", [0 ylimit],
        "xlim", [0 7],
        "xtick", [1, 2, 3, 4, 5, 6],
        "xticklabel", xticklabel
    );
    if (isyticklabel == 0)
        set(gca(), "yticklabel", {});
    endif
    set(gca(), "xgrid", "off", "ygrid", "on", "linewidth", borderlinesize, "fontsize", ticksize, "fontweight", "bold");
    #set(gca(), "defaultaxesfontname", "Helvetica,Bold")
    #set(gca(),'FontName','/Library/Fonts/HelveticaCY.dfont')
endfunction

# Startup time

xticklabel = {'0.5', '1.5', '15', '30', '60', '80'}; 

subplot(2, 3, 1);
hold on;
h = errorbar(graphdata_denacast(1:6, 2:2), graphdata_denacast(1:6, 4:4));
set (h, "color", "black", "linestyle", "none", "linewidth", 2);
h = errorbar(graphdata_gmtp(1:6, 2:2), graphdata_gmtp(1:6, 4:4));
set (h, "color", "black", "linestyle", "none");
plot(
    [1:6], graphdata_denacast(1:6, 2:2),
	"marker", "s",
	"color", "red",
	"markerfacecolor", "red",
	"markersize", markersize,
	"linestyle", "-",
	"linewidth", plotlinewidth,
    [1:6], graphdata_gmtp(1:6, 2:2),
	"marker", "d",
	"color", "blue",
	"markerfacecolor", "blue",
	"linestyle", "-",
	"markersize", markersize,
	"linewidth", plotlinewidth
);
hold off;
setup_axies(borderlinesize, ticksize, 80, xticklabel, 1);
t = text(2.2, 84.9, "1 servidor", "fontsize", ticksize, "fontweight", "bold");

subplot(2, 3, 2);
hold on;
h = errorbar(graphdata_denacast(:, 2:2), graphdata_denacast(:, 4:4));
set (h, "color", "black", "linestyle", "none");
h = errorbar(graphdata_gmtp(:, 2:2), graphdata_gmtp(:, 4:4));
set (h, "color", "black", "linestyle", "none");
plot(
    [1:6], graphdata_denacast(7:12, 2:2),
	"marker", "s",
	"color", "red",
	"markerfacecolor", "red",
	"markersize", markersize,
	"linestyle", "-",
	"linewidth", plotlinewidth,
    [1:6], graphdata_gmtp(7:12, 2:2),
	"marker", "d",
	"color", "blue",
	"markerfacecolor", "blue",
	"linestyle", "-",
	"markersize", markersize,
	"linewidth", plotlinewidth
);
hold off;
setup_axies(borderlinesize, ticksize, 80, xticklabel, 0);
t = text(1.9, 84.9, "3 servidores", "fontsize", ticksize, "fontweight", "bold");

subplot(2, 3, 3);
plot(
    [1:6], graphdata_denacast(13:18, 2:2),
	[";{\bf {\fontsize{12} Denacast/CoolStreaming}};"],
	"marker", "s",
	"color", "red",
	"markerfacecolor", "red",
	"markersize", markersize,
	"linestyle", "-",
	"linewidth", plotlinewidth,
    [1:6], graphdata_gmtp(13:18, 2:2),
	[";{\bf {\fontsize{14} GMTP}};"],
	"marker", "d",
	"color", "blue",
	"markerfacecolor", "blue",
	"linestyle", "-",
	"markersize", markersize,
	"linewidth", plotlinewidth
);
setup_axies(borderlinesize, ticksize, 80, xticklabel, 0);
hold off;

t = title("\n", "fontsize", axissize, "fontweight", "bold");
t = text(1.9, 84.9, "5 servidores", "fontsize", ticksize, "fontweight", "bold");


subplot(2, 3, 4);
hold on;

h = errorbar(graphdata_ccntv(:, 2:2), graphdata_ccntv(:, 4:4));
set (h, "color", "black", "linestyle", "none");
h = errorbar(graphdata_gmtp(:, 2:2), graphdata_gmtp(:, 4:4));
set (h, "color", "black", "linestyle", "none");
plot(
    [1:6], graphdata_ccntv(1:6, 2:2),
	"marker", "s",
	"color", "green",
	"markerfacecolor", "green",
	"markersize", markersize,
	"linestyle", "-",
	"linewidth", plotlinewidth,
    [1:6], graphdata_gmtp(1:6, 2:2),
	"marker", "d",
	"color", "blue",
	"markerfacecolor", "blue",
	"linestyle", "-",
	"markersize", markersize,
	"linewidth", plotlinewidth
);
fmt = text(-2.5, 7, "Atraso de Inicializacao (s)",
             "fontweight", "bold",
	         "fontsize", axissize, "rotation", 90);
setup_axies(borderlinesize, ticksize, 10, xticklabel, 1);

subplot(2, 3, 5);
h = errorbar(graphdata_ccntv(:, 2:2), graphdata_ccntv(:, 4:4));
set (h, "color", "black", "linestyle", "none");
h = errorbar(graphdata_gmtp(:, 2:2), graphdata_gmtp(:, 4:4));
set (h, "color", "black", "linestyle", "none");
plot(
    [1:6], graphdata_ccntv(7:12, 2:2),
	"marker", "s",
	"color", "green",
	"markerfacecolor", "green",
	"markersize", markersize,
	"linestyle", "-",
	"linewidth", plotlinewidth,
    [1:6], graphdata_gmtp(7:12, 2:2),
	"marker", "d",
	"color", "blue",
	"markerfacecolor", "blue",
	"linestyle", "-",
	"markersize", markersize,
	"linewidth", plotlinewidth
);
fmt = xlabel("\nNumero de nos clientes (x1000)",
	         "fontweight", "bold",
             "fontsize", axissize);
setup_axies(borderlinesize, ticksize, 10, xticklabel, 0);

subplot(2, 3, 6);
h = errorbar(graphdata_ccntv(13:18, 2:2), graphdata_ccntv(13:18, 4:4));
set (h, "color", "black", "linestyle", "none");
h = errorbar(graphdata_gmtp(13:18, 2:2), graphdata_gmtp(13:18, 4:4));
set (h, "color", "black", "linestyle", "none");
plot(
    [1:6], graphdata_ccntv(13:18, 2:2),
	[";{\bf {\fontsize{14} CCN-TV}};"],
	"marker", "s",
	"color", "green",
	"markerfacecolor", "green",
	"markersize", markersize,
	"linestyle", "-",
	"linewidth", plotlinewidth,
    [1:6], graphdata_gmtp(13:18, 2:2),
	[";{\bf {\fontsize{14} GMTP}};"],
	"marker", "d",
	"color", "blue",
	"markerfacecolor", "blue",
	"linestyle", "-",
	"markersize", markersize,
	"linewidth", plotlinewidth
);
setup_axies(borderlinesize, ticksize, 10, xticklabel, 0);
hold off;


#subplot(2, 1, 2);
#hold on;
#h = errorbar(graphdata_ccntv(:, 2:2), graphdata_ccntv(:, 4:4));
#set (h, "color", "black", "linestyle", "none");
#h = errorbar(graphdata_gmtp(:, 2:2), graphdata_gmtp(:, 4:4));
#set (h, "color", "black", "linestyle", "none");
#plot(
#    [1:6], graphdata_ccntv(1:6, 2:2),
#	[";{\bf {\fontsize{", legendfontsize, "} CCN-TV}};"],
#	"marker", "o",
#	"color", "green",
#	"markerfacecolor", "green",
#	"markersize", markersize,
#	"linestyle", "-",
#	"linewidth", plotlinewidth,
#    [7:12], graphdata_ccntv(7:12, 2:2),
#	"marker", "o",
#	"color", "green",
#	"markerfacecolor", "green",
#	"markersize", markersize,
#	"linestyle", "-",
#	"linewidth", plotlinewidth,
#    [13:18], graphdata_ccntv(13:18, 2:2),
#	"marker", "o",
#	"color", "green",
#	"markerfacecolor", "green",
#	"markersize", markersize,
#	"linestyle", "-",
#	"linewidth", plotlinewidth,
#    [1:6], graphdata_gmtp(1:6, 2:2),
#	[";{\bf {\fontsize{", legendfontsize, "} GMTP}};"],
#	"marker", "d",
#	"color", "blue",
#	"markerfacecolor", "blue",
#	"linestyle", "-",
#	"markersize", markersize,
#	"linewidth", plotlinewidth,
#    [7:12], graphdata_gmtp(7:12, 2:2),
#	"marker", "d",
#	"color", "blue",
#	"markerfacecolor", "blue",
#	"linestyle", "-",
#	"markersize", markersize,
#	"linewidth", plotlinewidth,
#    [13:18], graphdata_gmtp(13:18, 2:2),
#	"marker", "d",
#	"color", "blue",
#	"markerfacecolor", "blue",
#	"linestyle", "-",
#	"markersize", markersize,
#	"linewidth", plotlinewidth
#);
#hold off;

print("-color", "-deps", "../../../../documento/imgs/results/tratamentos-startup_time.eps");
#print("-S1800,1200", "-color", "-deps", "../../../../documento/imgs/results/tratamentos-startup_time.eps");

